<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link type="text/css" rel="stylesheet" href="/jiji/css/sidebar.css"><script type="text/javascript" src="/jiji/js/side.js"></script><title>webpack | Walle 记记</title><meta name="description" content="walle ">
    <link rel="preload" href="/jiji/assets/js/runtime~app.685934de.js" as="script"><link rel="preload" href="/jiji/assets/css/styles.da9db145.css" as="style"><link rel="preload" href="/jiji/assets/js/1812.a606ff3d.js" as="script"><link rel="preload" href="/jiji/assets/js/app.c5b474e9.js" as="script">
    <link rel="stylesheet" href="/jiji/assets/css/styles.da9db145.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/jiji/" class=""><!----><span class="site-name">Walle 记记</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/jiji/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="学习记"><span class="title">学习记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="学习记"><span class="title">学习记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/study/1.html/html.md" class="nav-link" aria-label="1.html"><!--[--><!--]--> 1.html <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/2.CSS/less.md" class="nav-link" aria-label="2.CSS"><!--[--><!--]--> 2.CSS <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/2.CSS/less.md" class="nav-link" aria-label="less"><!--[--><!--]--> less <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/2.CSS/scss.md" class="nav-link" aria-label="scss"><!--[--><!--]--> scss <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/3.JS/javascript.md" class="nav-link" aria-label="3.JS"><!--[--><!--]--> 3.JS <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/4.ES6/ES6.md" class="nav-link" aria-label="4.ES6"><!--[--><!--]--> 4.ES6 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/5.JQuery/JQuery.md" class="nav-link" aria-label="5.JQuery"><!--[--><!--]--> 5.JQuery <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/7.Git/git.md" class="nav-link" aria-label="7.Git"><!--[--><!--]--> 7.Git <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/8.Canvas/canvas.md" class="nav-link" aria-label="8.Canvas"><!--[--><!--]--> 8.Canvas <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/9.Node/Nodejs.md" class="nav-link" aria-label="9.Node"><!--[--><!--]--> 9.Node <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/9.Node/Nodejs.md" class="nav-link" aria-label="Nodejs"><!--[--><!--]--> Nodejs <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/9.Node/koa.md" class="nav-link" aria-label="koa"><!--[--><!--]--> koa <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/10.Vue/VUE-Router.md" class="nav-link" aria-label="10.Vue"><!--[--><!--]--> 10.Vue <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE-Router.md" class="nav-link" aria-label="VUE-Router"><!--[--><!--]--> VUE-Router <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE-Vuex.md" class="nav-link" aria-label="VUE-Vuex"><!--[--><!--]--> VUE-Vuex <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE-axios.md" class="nav-link" aria-label="VUE-axios"><!--[--><!--]--> VUE-axios <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE-cli.md" class="nav-link" aria-label="VUE-cli"><!--[--><!--]--> VUE-cli <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE.md" class="nav-link" aria-label="VUE"><!--[--><!--]--> VUE <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE3.md" class="nav-link" aria-label="VUE3"><!--[--><!--]--> VUE3 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/nuxt.md" class="nav-link" aria-label="nuxt"><!--[--><!--]--> nuxt <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/vite.md" class="nav-link" aria-label="vite"><!--[--><!--]--> vite <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/12.Webpack/webpack.md" class="nav-link" aria-label="12.Webpack"><!--[--><!--]--> 12.Webpack <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/13.TypeScript/Typescript.md" class="nav-link" aria-label="13.TypeScript"><!--[--><!--]--> 13.TypeScript <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/14.设计模式/设计模式.md" class="nav-link" aria-label="14.设计模式"><!--[--><!--]--> 14.设计模式 <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/15.移动端/uniapp.md" class="nav-link" aria-label="15.移动端"><!--[--><!--]--> 15.移动端 <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/15.移动端/uniapp.md" class="nav-link" aria-label="uniapp"><!--[--><!--]--> uniapp <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/15.移动端/小程序.assets" class="nav-link" aria-label="小程序"><!--[--><!--]--> 小程序 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/15.移动端/小程序.md" class="nav-link" aria-label="小程序"><!--[--><!--]--> 小程序 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/15.移动端/移动端.md" class="nav-link" aria-label="移动端"><!--[--><!--]--> 移动端 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/16.前端性能/前端优化.md" class="nav-link" aria-label="16.前端性能"><!--[--><!--]--> 16.前端性能 <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/16.前端性能/前端优化.md" class="nav-link" aria-label="前端优化"><!--[--><!--]--> 前端优化 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/16.前端性能/性能指标.md" class="nav-link" aria-label="性能指标"><!--[--><!--]--> 性能指标 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/17.ESLint/eslint.md" class="nav-link" aria-label="17.ESLint"><!--[--><!--]--> 17.ESLint <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/18.Jest/jest.md" class="nav-link" aria-label="18.Jest"><!--[--><!--]--> 18.Jest <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/18.Jest/jest.md" class="nav-link" aria-label="jest"><!--[--><!--]--> jest <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/18.Jest/vitest.md" class="nav-link" aria-label="vitest"><!--[--><!--]--> vitest <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/19.Flutter" class="nav-link" aria-label="19.Flutter"><!--[--><!--]--> 19.Flutter <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/App常见交互方式.md" class="nav-link" aria-label="App常见交互方式"><!--[--><!--]--> App常见交互方式 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/Dart-flutter.md" class="nav-link" aria-label="Dart-flutter"><!--[--><!--]--> Dart-flutter <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/Getx.md" class="nav-link" aria-label="Getx"><!--[--><!--]--> Getx <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/container.md" class="nav-link" aria-label="container"><!--[--><!--]--> container <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/devTools.md" class="nav-link" aria-label="devTools"><!--[--><!--]--> devTools <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_native.md" class="nav-link" aria-label="flutter_native"><!--[--><!--]--> flutter_native <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_routes.md" class="nav-link" aria-label="flutter_routes"><!--[--><!--]--> flutter_routes <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_tools.md" class="nav-link" aria-label="flutter_tools"><!--[--><!--]--> flutter_tools <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_ui.md" class="nav-link" aria-label="flutter_ui"><!--[--><!--]--> flutter_ui <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_util.md" class="nav-link" aria-label="flutter_util"><!--[--><!--]--> flutter_util <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter学习路径.md" class="nav-link" aria-label="flutter学习路径"><!--[--><!--]--> flutter学习路径 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/20.Android/android.md" class="nav-link" aria-label="20.Android"><!--[--><!--]--> 20.Android <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/21.Ios/ios.md" class="nav-link" aria-label="21.Ios"><!--[--><!--]--> 21.Ios <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/22.算法/算法.md" class="nav-link" aria-label="22.算法"><!--[--><!--]--> 22.算法 <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/23.webgl/GIS" class="nav-link" aria-label="23.webgl"><!--[--><!--]--> 23.webgl <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/23.webgl/GIS" class="nav-link" aria-label="GIS"><!--[--><!--]--> GIS <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/23.webgl/webgl.md" class="nav-link" aria-label="webgl"><!--[--><!--]--> webgl <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/24.English/语法.md" class="nav-link" aria-label="24.English"><!--[--><!--]--> 24.English <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="项目记"><span class="title">项目记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="项目记"><span class="title">项目记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/project/webpack5多项目构建.md" class="nav-link" aria-label="webpack5多项目构建"><!--[--><!--]--> webpack5多项目构建 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/project/技术调研.md" class="nav-link" aria-label="技术调研"><!--[--><!--]--> 技术调研 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="读书记"><span class="title">读书记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="读书记"><span class="title">读书记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/book/ES6标准入门.md" class="nav-link" aria-label="ES6标准入门"><!--[--><!--]--> ES6标准入门 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/book/JavaScript设计模式与开发实践.md" class="nav-link" aria-label="JavaScript设计模式与开发实践"><!--[--><!--]--> JavaScript设计模式与开发实践 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/book/唯物辩证法大纲.md" class="nav-link" aria-label="唯物辩证法大纲"><!--[--><!--]--> 唯物辩证法大纲 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="资源记"><span class="title">资源记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="资源记"><span class="title">资源记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/resources/flutter资源.md" class="nav-link" aria-label="flutter资源"><!--[--><!--]--> flutter资源 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/resources/serverless.md" class="nav-link" aria-label="serverless"><!--[--><!--]--> serverless <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/resources/ui框架.md" class="nav-link" aria-label="ui框架"><!--[--><!--]--> ui框架 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/resources/前端资源.md" class="nav-link" aria-label="前端资源"><!--[--><!--]--> 前端资源 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/resources/工具.md" class="nav-link" aria-label="工具"><!--[--><!--]--> 工具 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="明天记"><span class="title">明天记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="明天记"><span class="title">明天记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/tomorrow/书单.md" class="nav-link" aria-label="书单"><!--[--><!--]--> 书单 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/tomorrow/明天记.md" class="nav-link" aria-label="明天记"><!--[--><!--]--> 明天记 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="另辟蹊径记"><span class="title">另辟蹊径记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="另辟蹊径记"><span class="title">另辟蹊径记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/money/基金.md" class="nav-link" aria-label="基金"><!--[--><!--]--> 基金 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/WALL-E-WEB" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/jiji/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="学习记"><span class="title">学习记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="学习记"><span class="title">学习记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/study/1.html/html.md" class="nav-link" aria-label="1.html"><!--[--><!--]--> 1.html <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/2.CSS/less.md" class="nav-link" aria-label="2.CSS"><!--[--><!--]--> 2.CSS <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/2.CSS/less.md" class="nav-link" aria-label="less"><!--[--><!--]--> less <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/2.CSS/scss.md" class="nav-link" aria-label="scss"><!--[--><!--]--> scss <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/3.JS/javascript.md" class="nav-link" aria-label="3.JS"><!--[--><!--]--> 3.JS <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/4.ES6/ES6.md" class="nav-link" aria-label="4.ES6"><!--[--><!--]--> 4.ES6 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/5.JQuery/JQuery.md" class="nav-link" aria-label="5.JQuery"><!--[--><!--]--> 5.JQuery <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/7.Git/git.md" class="nav-link" aria-label="7.Git"><!--[--><!--]--> 7.Git <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/8.Canvas/canvas.md" class="nav-link" aria-label="8.Canvas"><!--[--><!--]--> 8.Canvas <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/9.Node/Nodejs.md" class="nav-link" aria-label="9.Node"><!--[--><!--]--> 9.Node <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/9.Node/Nodejs.md" class="nav-link" aria-label="Nodejs"><!--[--><!--]--> Nodejs <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/9.Node/koa.md" class="nav-link" aria-label="koa"><!--[--><!--]--> koa <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/10.Vue/VUE-Router.md" class="nav-link" aria-label="10.Vue"><!--[--><!--]--> 10.Vue <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE-Router.md" class="nav-link" aria-label="VUE-Router"><!--[--><!--]--> VUE-Router <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE-Vuex.md" class="nav-link" aria-label="VUE-Vuex"><!--[--><!--]--> VUE-Vuex <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE-axios.md" class="nav-link" aria-label="VUE-axios"><!--[--><!--]--> VUE-axios <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE-cli.md" class="nav-link" aria-label="VUE-cli"><!--[--><!--]--> VUE-cli <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE.md" class="nav-link" aria-label="VUE"><!--[--><!--]--> VUE <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE3.md" class="nav-link" aria-label="VUE3"><!--[--><!--]--> VUE3 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/nuxt.md" class="nav-link" aria-label="nuxt"><!--[--><!--]--> nuxt <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/vite.md" class="nav-link" aria-label="vite"><!--[--><!--]--> vite <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/12.Webpack/webpack.md" class="nav-link" aria-label="12.Webpack"><!--[--><!--]--> 12.Webpack <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/13.TypeScript/Typescript.md" class="nav-link" aria-label="13.TypeScript"><!--[--><!--]--> 13.TypeScript <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/14.设计模式/设计模式.md" class="nav-link" aria-label="14.设计模式"><!--[--><!--]--> 14.设计模式 <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/15.移动端/uniapp.md" class="nav-link" aria-label="15.移动端"><!--[--><!--]--> 15.移动端 <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/15.移动端/uniapp.md" class="nav-link" aria-label="uniapp"><!--[--><!--]--> uniapp <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/15.移动端/小程序.assets" class="nav-link" aria-label="小程序"><!--[--><!--]--> 小程序 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/15.移动端/小程序.md" class="nav-link" aria-label="小程序"><!--[--><!--]--> 小程序 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/15.移动端/移动端.md" class="nav-link" aria-label="移动端"><!--[--><!--]--> 移动端 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/16.前端性能/前端优化.md" class="nav-link" aria-label="16.前端性能"><!--[--><!--]--> 16.前端性能 <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/16.前端性能/前端优化.md" class="nav-link" aria-label="前端优化"><!--[--><!--]--> 前端优化 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/16.前端性能/性能指标.md" class="nav-link" aria-label="性能指标"><!--[--><!--]--> 性能指标 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/17.ESLint/eslint.md" class="nav-link" aria-label="17.ESLint"><!--[--><!--]--> 17.ESLint <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/18.Jest/jest.md" class="nav-link" aria-label="18.Jest"><!--[--><!--]--> 18.Jest <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/18.Jest/jest.md" class="nav-link" aria-label="jest"><!--[--><!--]--> jest <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/18.Jest/vitest.md" class="nav-link" aria-label="vitest"><!--[--><!--]--> vitest <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/19.Flutter" class="nav-link" aria-label="19.Flutter"><!--[--><!--]--> 19.Flutter <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/App常见交互方式.md" class="nav-link" aria-label="App常见交互方式"><!--[--><!--]--> App常见交互方式 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/Dart-flutter.md" class="nav-link" aria-label="Dart-flutter"><!--[--><!--]--> Dart-flutter <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/Getx.md" class="nav-link" aria-label="Getx"><!--[--><!--]--> Getx <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/container.md" class="nav-link" aria-label="container"><!--[--><!--]--> container <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/devTools.md" class="nav-link" aria-label="devTools"><!--[--><!--]--> devTools <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_native.md" class="nav-link" aria-label="flutter_native"><!--[--><!--]--> flutter_native <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_routes.md" class="nav-link" aria-label="flutter_routes"><!--[--><!--]--> flutter_routes <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_tools.md" class="nav-link" aria-label="flutter_tools"><!--[--><!--]--> flutter_tools <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_ui.md" class="nav-link" aria-label="flutter_ui"><!--[--><!--]--> flutter_ui <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_util.md" class="nav-link" aria-label="flutter_util"><!--[--><!--]--> flutter_util <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter学习路径.md" class="nav-link" aria-label="flutter学习路径"><!--[--><!--]--> flutter学习路径 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/20.Android/android.md" class="nav-link" aria-label="20.Android"><!--[--><!--]--> 20.Android <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/21.Ios/ios.md" class="nav-link" aria-label="21.Ios"><!--[--><!--]--> 21.Ios <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/22.算法/算法.md" class="nav-link" aria-label="22.算法"><!--[--><!--]--> 22.算法 <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/23.webgl/GIS" class="nav-link" aria-label="23.webgl"><!--[--><!--]--> 23.webgl <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/23.webgl/GIS" class="nav-link" aria-label="GIS"><!--[--><!--]--> GIS <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/23.webgl/webgl.md" class="nav-link" aria-label="webgl"><!--[--><!--]--> webgl <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/24.English/语法.md" class="nav-link" aria-label="24.English"><!--[--><!--]--> 24.English <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="项目记"><span class="title">项目记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="项目记"><span class="title">项目记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/project/webpack5多项目构建.md" class="nav-link" aria-label="webpack5多项目构建"><!--[--><!--]--> webpack5多项目构建 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/project/技术调研.md" class="nav-link" aria-label="技术调研"><!--[--><!--]--> 技术调研 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="读书记"><span class="title">读书记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="读书记"><span class="title">读书记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/book/ES6标准入门.md" class="nav-link" aria-label="ES6标准入门"><!--[--><!--]--> ES6标准入门 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/book/JavaScript设计模式与开发实践.md" class="nav-link" aria-label="JavaScript设计模式与开发实践"><!--[--><!--]--> JavaScript设计模式与开发实践 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/book/唯物辩证法大纲.md" class="nav-link" aria-label="唯物辩证法大纲"><!--[--><!--]--> 唯物辩证法大纲 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="资源记"><span class="title">资源记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="资源记"><span class="title">资源记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/resources/flutter资源.md" class="nav-link" aria-label="flutter资源"><!--[--><!--]--> flutter资源 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/resources/serverless.md" class="nav-link" aria-label="serverless"><!--[--><!--]--> serverless <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/resources/ui框架.md" class="nav-link" aria-label="ui框架"><!--[--><!--]--> ui框架 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/resources/前端资源.md" class="nav-link" aria-label="前端资源"><!--[--><!--]--> 前端资源 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/resources/工具.md" class="nav-link" aria-label="工具"><!--[--><!--]--> 工具 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="明天记"><span class="title">明天记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="明天记"><span class="title">明天记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/tomorrow/书单.md" class="nav-link" aria-label="书单"><!--[--><!--]--> 书单 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/tomorrow/明天记.md" class="nav-link" aria-label="明天记"><!--[--><!--]--> 明天记 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="另辟蹊径记"><span class="title">另辟蹊径记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="另辟蹊径记"><span class="title">另辟蹊径记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/money/基金.md" class="nav-link" aria-label="基金"><!--[--><!--]--> 基金 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/WALL-E-WEB" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">webpack</p><ul class=""><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#入口出口" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="入口出口"><!--[--><!--]--> 入口出口 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#webpack的介绍" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="webpack的介绍"><!--[--><!--]--> webpack的介绍 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#开发自动编译" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="开发自动编译"><!--[--><!--]--> 开发自动编译 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#watch" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="watch"><!--[--><!--]--> watch <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#webpack-dev-server" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="webpack-dev-server"><!--[--><!--]--> webpack-dev-server <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#webpack-dev-middleware" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="webpack-dev-middleware"><!--[--><!--]--> webpack-dev-middleware <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#小结" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="小结"><!--[--><!--]--> 小结 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#scripts作用" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="scripts作用"><!--[--><!--]--> scripts作用 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#save-和-save-dev-区别" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="--save 和 --save-dev 区别"><!--[--><!--]--> --save 和 --save-dev 区别 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#devdependencies和-dependencies区别" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="devDependencies和 dependencies区别"><!--[--><!--]--> devDependencies和 dependencies区别 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#打包css-less-sass" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="打包css less sass"><!--[--><!--]--> 打包css less sass <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#打包图片-font" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="打包图片,font"><!--[--><!--]--> 打包图片,font <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#url-loader" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="url-loader"><!--[--><!--]--> url-loader <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#img标签图片资源loader" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="img标签图片资源loader"><!--[--><!--]--> img标签图片资源loader <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#babel-loader" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="babel-loader"><!--[--><!--]--> babel-loader <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#generator" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="generator"><!--[--><!--]--> generator <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#source-map的使用" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="source map的使用"><!--[--><!--]--> source map的使用 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#devtool" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="devtool"><!--[--><!--]--> devtool <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#这么多模式用哪个好" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="这么多模式用哪个好？"><!--[--><!--]--> 这么多模式用哪个好？ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#插件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="插件"><!--[--><!--]--> 插件 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#html-webpack-plugin" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="html-webpack-plugin"><!--[--><!--]--> html-webpack-plugin <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#下载清空dist的插件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="下载清空dist的插件"><!--[--><!--]--> 下载清空dist的插件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#copy-webpack-puugin" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="copy-webpack-puugin"><!--[--><!--]--> copy-webpack-puugin <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#bannerplugin-webpack内置插件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="BannerPlugin webpack内置插件"><!--[--><!--]--> BannerPlugin webpack内置插件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#webpack-spritesmith" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="webpack-spritesmith"><!--[--><!--]--> webpack-spritesmith <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#webpack-dev-server-1" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="webpack -dev-server"><!--[--><!--]--> webpack -dev-server <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#webpack-config-js" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="webpack.config.js"><!--[--><!--]--> webpack.config.js <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#package-json" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="package.json"><!--[--><!--]--> package.json <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#webpack跨域" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="webpack跨域"><!--[--><!--]--> webpack跨域 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#package-json-1" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="package.json"><!--[--><!--]--> package.json <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#webpack-config-js-1" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="webpack.config.js"><!--[--><!--]--> webpack.config.js <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#多页面打包" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="多页面打包"><!--[--><!--]--> 多页面打包 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#第三方库的两种引入方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="第三方库的两种引入方式"><!--[--><!--]--> 第三方库的两种引入方式 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#development-production不同配置文件打包" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Development / Production不同配置文件打包"><!--[--><!--]--> Development / Production不同配置文件打包 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#定义环境变量" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="定义环境变量"><!--[--><!--]--> 定义环境变量 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#跨域http-proxy" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="跨域http proxy"><!--[--><!--]--> 跨域http proxy <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#hmr的使用" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="HMR的使用"><!--[--><!--]--> HMR的使用 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#production模式打包自带优化" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="production模式打包自带优化"><!--[--><!--]--> production模式打包自带优化 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#css优化" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="css优化"><!--[--><!--]--> css优化 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#将css提取到独立的文件中" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="将css提取到独立的文件中"><!--[--><!--]--> 将css提取到独立的文件中 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#自动添加css前缀" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="自动添加css前缀"><!--[--><!--]--> 自动添加css前缀 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#开启css压缩" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="开启css压缩"><!--[--><!--]--> 开启css压缩 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#js代码优化分离" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="js代码优化分离"><!--[--><!--]--> js代码优化分离 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#手动配置多入口" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="手动配置多入口"><!--[--><!--]--> 手动配置多入口 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#抽取公共代码" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="抽取公共代码"><!--[--><!--]--> 抽取公共代码 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#动态导入-懒加载" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="动态导入 (懒加载)"><!--[--><!--]--> 动态导入 (懒加载) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#splitchunksplugin配置参数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="SplitChunksPlugin配置参数"><!--[--><!--]--> SplitChunksPlugin配置参数 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#prefetching和preloading" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="prefetching和preloading"><!--[--><!--]--> prefetching和preloading <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#减少打包时间" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="减少打包时间"><!--[--><!--]--> 减少打包时间 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#noparse" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="noParse"><!--[--><!--]--> noParse <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#ignoreplugin" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="IgnorePlugin"><!--[--><!--]--> IgnorePlugin <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#usebuiltins" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="useBuiltIns"><!--[--><!--]--> useBuiltIns <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#babel-core-核心" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="babel-core（核心）"><!--[--><!--]--> babel-core（核心） <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#babel-polyfill" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="babel-polyfill"><!--[--><!--]--> babel-polyfill <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#三种方案对比" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="三种方案对比"><!--[--><!--]--> 三种方案对比 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#babel-preset-env" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="@babel/preset-env"><!--[--><!--]--> @babel/preset-env <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#babel-runtime" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="@babel/runtime"><!--[--><!--]--> @babel/runtime <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#babel-cli命令行编译" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="babel/cli命令行编译"><!--[--><!--]--> babel/cli命令行编译 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#babel-plugin" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="@babel/plugin"><!--[--><!--]--> @babel/plugin <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#babel-presets-插件集合" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="@babel/presets 插件集合"><!--[--><!--]--> @babel/presets 插件集合 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#babel-polyfill-1" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="@babel/polyfill"><!--[--><!--]--> @babel/polyfill <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#babel-plugin-transform-runtime" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="@babel/plugin-transform-runtime"><!--[--><!--]--> @babel/plugin-transform-runtime <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#babel-runtime-1" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="@babel/runtime"><!--[--><!--]--> @babel/runtime <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/12.Webpack/webpack.html#browserslist-配置" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Browserslist 配置"><!--[--><!--]--> Browserslist 配置 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="webpack" tabindex="-1"><a class="header-anchor" href="#webpack" aria-hidden="true">#</a> webpack</h1><p>英文官网:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">webpack.js.org</span><span class="token regex-delimiter">/</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>打包压缩混淆代码工具
官网<span class="token operator">:</span>webpack<span class="token punctuation">.</span>js<span class="token punctuation">.</span>org
打包<span class="token operator">:</span>npm run build  <span class="token comment">//vue-cli中打包</span>
安装简写<span class="token operator">:</span>npm i <span class="token operator">-</span><span class="token constant">D</span> webpack webpack<span class="token operator">-</span>cli

安装<span class="token operator">:</span>
npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev webpack
npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev webpack@<span class="token operator">&lt;</span>版本号<span class="token operator">&gt;</span>
    
打包本地运行方法<span class="token operator">:</span>
 nodejs<span class="token operator">:</span>	npm install http<span class="token operator">-</span>server <span class="token operator">-</span>g
打包后目录<span class="token operator">:</span>http<span class="token operator">-</span>server
后端口运行即可 要在地址后面加 index<span class="token punctuation">.</span>html#<span class="token operator">/</span>

http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>pianshen<span class="token punctuation">.</span>com<span class="token operator">/</span>article<span class="token operator">/</span><span class="token number">1996316392</span><span class="token operator">/</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="入口出口" tabindex="-1"><a class="header-anchor" href="#入口出口" aria-hidden="true">#</a> 入口出口</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>创建webpack<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js文件中

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">&#39;./path/to/my/entry/file.js&#39;</span><span class="token punctuation">,</span> <span class="token comment">//入口</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//出口绝对路径拼接</span>
    <span class="token comment">//path:path.join(__dirname,&#39;./dist/&#39;),</span>
    filename<span class="token operator">:</span> <span class="token string">&#39;bundle.js&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
    mode<span class="token operator">:</span><span class="token string">&#39;development&#39;</span> <span class="token comment">//默认production</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="webpack的介绍" tabindex="-1"><a class="header-anchor" href="#webpack的介绍" aria-hidden="true">#</a> webpack的介绍</h2><ul><li><code>webpack</code> 就是一个打包工具，类似的工具还有 <code>gulp</code> 这之类的</li><li>现在要打包都是用 <code>webpack</code> 会在一些老项目里遇到别的工具</li><li>下载webpack模块</li></ul><div class="language-npm ext-npm line-numbers-mode"><pre class="language-npm"><code>npm i -D webpack webpack-cli
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>-D 是 --save-dev 的缩写</li></ul><blockquote><p>如果安装慢用淘宝镜像（cnpm）</p></blockquote><ul><li>打包命令</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npx webpack
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><blockquote><p>webpack会帮你打包src里面的文件，默认找的是src里index.js</p><p>它只会打包index.js这一个文件，如果发现index.js里面有对其他文件的依赖，那么才会其他文件</p><p>它也可以打包模块化的JS，让浏览器认识</p></blockquote><h2 id="开发自动编译" tabindex="-1"><a class="header-anchor" href="#开发自动编译" aria-hidden="true">#</a> 开发自动编译</h2><h3 id="watch" tabindex="-1"><a class="header-anchor" href="#watch" aria-hidden="true">#</a> watch</h3><ol><li><p>在<code>webpack</code>指令后面加上<code>--watch</code>参数即可</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm webpack <span class="token operator">--</span>watch
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>配置文件添加watch:true</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// webpack的配置文件遵循着CommonJS规范</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">&#39;./src/main.js&#39;</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// path.resolve() : 解析当前相对路径的绝对路径</span>
    <span class="token comment">// path: path.resolve(&#39;./dist/&#39;),</span>
    <span class="token comment">// path: path.resolve(__dirname, &#39;./dist/&#39;),</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;./dist/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">&#39;bundle.js&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mode<span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>
  watch<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li><li><p>配置package.json指定build</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;walle-webc&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;build&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack --config&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;build:watch&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack --watch&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.41.5&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.3.10&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
    npm run build<span class="token operator">:</span>watch
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li></ol><h3 id="webpack-dev-server" tabindex="-1"><a class="header-anchor" href="#webpack-dev-server" aria-hidden="true">#</a> webpack-dev-server</h3><p>devServer会在内存中生成一个打包好的<code>bundle.js</code>;</p><p>并不是生成在dist文件里;位置如下图:</p><p>index.html中引入js为 /</p><p><img src="/image/webpack//image-20191230221821528.png" alt="image-20191230221821528"></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>安装<span class="token operator">:</span> 需要先安装webpack
npm i webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server webpack <span class="token operator">-</span><span class="token constant">D</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol><li><p>package.json</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;walle-webc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build:watch&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack --watch&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack-dev-server&quot;</span><span class="token punctuation">,</span>
     <span class="token property">&quot;dev2&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack-dev-server --hot --open --port 8090&quot;</span>
      <span class="token comment">//--hot  热更替 只会重新加载修改部分</span>
      <span class="token comment">//--open 自动启动浏览器</span>
      <span class="token comment">//--port 指定端口</span>
      <span class="token comment">//--compress 打包压缩gzip压缩</span>
      <span class="token comment">//--contentBase src 当index位于src下 指定路径为src下</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

--------------
运行npm run dev
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li><li><p>配置文件webpack.config.js–devServer</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 入口文件配置</span>
  entry<span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// 出口文件配置项</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 输出的路径，webpack2起就规定必须是绝对路径</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 输出文件名字</span>
    filename<span class="token operator">:</span> <span class="token string">&#39;bundle.js&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    port<span class="token operator">:</span> <span class="token number">8090</span><span class="token punctuation">,</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    contentBase<span class="token operator">:</span><span class="token string">&#39;./src&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mode<span class="token operator">:</span> <span class="token string">&#39;development&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>修改<span class="token operator">:</span><span class="token keyword">package</span><span class="token punctuation">.</span>json的scripts<span class="token operator">:</span> <span class="token string">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server&quot;</span>
运行 npm run dev
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol><h3 id="webpack-dev-middleware" tabindex="-1"><a class="header-anchor" href="#webpack-dev-middleware" aria-hidden="true">#</a> webpack-dev-middleware</h3><p><code>webpack-dev-middleware</code> 是一个容器(wrapper)，它可以把 webpack 处理后的文件传递给一个服务器(server)。 <code>webpack-dev-server</code> 在内部使用了它，同时，它也可以作为一个单独的包来使用，以便进行更多自定义设置来实现更多的需求。</p><ol><li><p>安装 <code>express</code> 和 <code>webpack-dev-middleware</code>：</p><p><code>npm i express webpack-dev-middleware -D</code></p></li><li><p>新建<code>server.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpackDevMiddleware <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-dev-middleware&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./webpack.config.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">webpackDevMiddleware</span><span class="token punctuation">(</span>compiler<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  publicPath<span class="token operator">:</span> <span class="token string">&#39;/&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;http://localhost:3000&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li><li><p>配置<code>package.json</code>中的scripts:<code>&quot;server&quot;: &quot;node server.js&quot;</code></p></li><li><p>运行: <code>npm run server</code></p></li></ol><p>注意: 如果要使用<code>webpack-dev-middleware</code>, 必须使用<code>html-webpack-plugin</code>插件, 否则html文件无法正确的输出到express服务器的根目录</p><h4 id="小结" tabindex="-1"><a class="header-anchor" href="#小结" aria-hidden="true">#</a> 小结</h4><p>只有在开发时才需要使用自动编译工具, 例如: webpack-dev-server</p><p>项目上线时都会直接使用webpack进行打包构建, 不需要使用这些自动编译工具</p><p>自动编译工具只是为了<strong>提高开发体验</strong></p><h1 id="webpack有四大核心概念" tabindex="-1"><a class="header-anchor" href="#webpack有四大核心概念" aria-hidden="true">#</a> webpack有四大核心概念:</h1><ul><li>入口(entry): 程序的入口js</li><li>输出(output): 打包后存放的位置</li><li>loader: 用于对模块的源代码进行转换 //module</li><li>插件(plugins): 插件目的在于解决 loader无法实现的<strong>其他事</strong></li></ul><p><a href="https://www.webpackjs.com/concepts/#%E5%85%A5%E5%8F%A3-entry-" target="_blank" rel="noopener noreferrer">传送门<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><ul><li><p>在文件里写以下代码</p></li><li><p>打包时要带上这个配置文件</p></li></ul><div class="language-npm ext-npm line-numbers-mode"><pre class="language-npm"><code>npx webpack --config webpack.config.js

--config 后面指定按 指定文件打包
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>这个意思是打包，并且用webpack.config.js的配置来打包</li><li>默认它其实就会去找 webpack.config.js 这个文件来作为配置</li><li>在webpack老版本的时候，必须自己制定这个配置文件</li><li>也可以不叫 <code>webpack.config.js</code> 叫别的名字，叫别的名字必须制定配置文件的名字</li></ul><p><a href="https://www.webpackjs.com/concepts/#%E5%87%BA%E5%8F%A3-output-" target="_blank" rel="noopener noreferrer">传送门<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><ul><li>webpack.config.js</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>

    <span class="token comment">//打包入口</span>
    entry<span class="token operator">:</span><span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span>

    <span class="token comment">//打包出口</span>
    output<span class="token operator">:</span><span class="token punctuation">{</span>

        <span class="token comment">// 打包后的路径，默认是./dist</span>
        <span class="token comment">// 打包后的路径必须写绝对路径</span>
        path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&#39;./dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">//打包后的文件名，默认叫main.js</span>
        filename<span class="token operator">:</span><span class="token string">&#39;index.js&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="scripts作用" tabindex="-1"><a class="header-anchor" href="#scripts作用" aria-hidden="true">#</a> scripts作用</h2><ul><li>npm run 后面要接 scripts 里面的名字</li><li>npm run build 它就相当于找到 package.json 里面的 scripts 里面的 build ，再把 build 对应的代码执行起来</li><li>总结作用：它的作用可以把一串复杂的命令打包起来，然后要运行，只要 npm run xxx就行了</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">package</span><span class="token punctuation">.</span>json

<span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;buildcustom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config webpack.custom.config.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">//指定打包配置文件</span>
    <span class="token string">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;watch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --watch&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;dev2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --compress --hot --port 5000 --open --contentBase src&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node server.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
      
<span class="token operator">--</span>compress  <span class="token comment">//gzip压缩</span>
<span class="token operator">--</span>hot 		<span class="token comment">//热更新,保存自动更新页面</span>
<span class="token operator">--</span>port <span class="token number">5000</span> <span class="token comment">//端口</span>
<span class="token operator">--</span>open 		<span class="token comment">//npm run dev 后自动打开页面</span>
<span class="token operator">--</span>contentBase src&quot;<span class="token punctuation">,</span> <span class="token comment">//指定默认打开路径</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="save-和-save-dev-区别" tabindex="-1"><a class="header-anchor" href="#save-和-save-dev-区别" aria-hidden="true">#</a> --save 和 --save-dev 区别</h2><ul><li>--save 会把你下载的第三方包信息保存到 <code>dependencies</code></li><li>--save-dev 会把你下载的第三方包保存到 <code>devDependencies</code></li><li>npm i 插件名 默认相当于 npm i --save 插件名</li></ul><h2 id="devdependencies和-dependencies区别" tabindex="-1"><a class="header-anchor" href="#devdependencies和-dependencies区别" aria-hidden="true">#</a> devDependencies和 dependencies区别</h2><ul><li><p>devDependencies ：开发时需要，正式上线不需要</p><ul><li>所以对于这类插件，记得下载时一定要用 --save-dev 的命令</li></ul></li><li><p>dependencies： 里面的插件代表开发打包后也会要用</p><ul><li>直接npm i 就行了，因为npm i 默认就是 --save</li><li>如果是cnpm i 那么必须自己加 --save</li></ul></li></ul><h1 id="打包loader" tabindex="-1"><a class="header-anchor" href="#打包loader" aria-hidden="true">#</a> 打包loader</h1><p>基本使用方法:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1.</span>安装loader<span class="token operator">:</span>
	npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev style<span class="token operator">-</span>loader css<span class="token operator">-</span>loader
<span class="token number">2.</span>module中添加rules<span class="token operator">:</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="打包css-less-sass" tabindex="-1"><a class="header-anchor" href="#打包css-less-sass" aria-hidden="true">#</a> 打包css less sass</h2><ul><li><p>webpack默认只认识.js文件，如果想打包解析别的文件格式，就需要对应的loader</p></li><li><p>下载loader</p><ul><li><p>style-loader css-loader</p></li><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev style<span class="token operator">-</span>loader css<span class="token operator">-</span>loader
  npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev less<span class="token operator">-</span>loader less
  npm install sass<span class="token operator">-</span>loader node<span class="token operator">-</span>sass webpack <span class="token operator">--</span>save<span class="token operator">-</span>dev
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>webpack.config.js</p></li><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;less-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.s(a|c)ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;sass-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul></li></ul><h2 id="打包图片-font" tabindex="-1"><a class="header-anchor" href="#打包图片-font" aria-hidden="true">#</a> 打包图片,font</h2><ul><li><p>默认不支持打包图片</p></li><li><p>所以要下载对应loader</p></li><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev file<span class="token operator">-</span>loader
  
  url路径的
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>  webpack.config.js
  
  
  const path = require(&#39;path&#39;);
  
  module.exports = <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> &#39;./src/index.js&#39;<span class="token punctuation">,</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
      filename<span class="token operator">:</span> &#39;bundle.js&#39;<span class="token punctuation">,</span>
      path<span class="token operator">:</span> path.resolve(__dirname<span class="token punctuation">,</span> &#39;dist&#39;)
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
      rules<span class="token operator">:</span> <span class="token punctuation">[</span>
  +       <span class="token punctuation">{</span>test<span class="token operator">:</span> /\.(png|svg|jpg|gif)$/<span class="token punctuation">,</span>use<span class="token operator">:</span> <span class="token punctuation">[</span>&#39;file-loader&#39;<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  		<span class="token punctuation">{</span>test<span class="token operator">:</span> /\.(png|svg|jpg|gif)$/<span class="token punctuation">,</span>
  			use<span class="token operator">:</span> <span class="token punctuation">{</span>
  			  loader<span class="token operator">:</span>&#39;url-loader&#39;<span class="token punctuation">,</span>
  			  options<span class="token operator">:</span><span class="token punctuation">{</span>
  			  	limit<span class="token operator">:</span><span class="token number">5</span> * <span class="token number">1024</span><span class="token punctuation">,</span>  <span class="token comment">//大于5kb 转为base64</span>
  			  	outputPath<span class="token operator">:</span>&#39;images&#39;<span class="token punctuation">,</span>  <span class="token comment">//指定图片打不路径</span>
  			  	name<span class="token operator">:</span>&#39;<span class="token punctuation">[</span>name<span class="token punctuation">]</span>-<span class="token punctuation">[</span>hash<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">]</span>.<span class="token punctuation">[</span>ext<span class="token punctuation">]</span>&#39;  <span class="token comment">//防止重名</span>
  			  <span class="token punctuation">}</span>
  			<span class="token punctuation">}</span>
  		<span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>;
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div></li></ul><h2 id="url-loader" tabindex="-1"><a class="header-anchor" href="#url-loader" aria-hidden="true">#</a> url-loader</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev url<span class="token operator">-</span>loader

url<span class="token operator">-</span>loader 功能类似于 file<span class="token operator">-</span>loader，但是在文件大小（单位 byte）低于指定的限制时，可以返回一个 DataURL。

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif|svg)(\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff2?|eot|ttf|otf)(\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(mp4|webm|ogg|mp3|wav|flac|aac)(\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&#39;url-loader&#39;</span><span class="token punctuation">,</span>
             options<span class="token operator">:</span> <span class="token punctuation">{</span>
              outputPath<span class="token operator">:</span><span class="token string">&#39;img&#39;</span><span class="token punctuation">,</span>
              name<span class="token operator">:</span> <span class="token string">&#39;[name].[ext]&#39;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="img标签图片资源loader" tabindex="-1"><a class="header-anchor" href="#img标签图片资源loader" aria-hidden="true">#</a> img标签图片资源loader</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm install <span class="token operator">-</span>s html<span class="token operator">-</span>withimg<span class="token operator">-</span>loader

html 标签中img src 中引入的图片会被打包
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>webpack<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js

<span class="token punctuation">{</span>
	test<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(htm|html)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
	loader<span class="token operator">:</span><span class="token string">&#39;html-withimg-loader&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="babel-loader" tabindex="-1"><a class="header-anchor" href="#babel-loader" aria-hidden="true">#</a> babel-loader</h2><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>ES6 ES7 转换为 ES5
babeljs.com

安装最新<span class="token operator">:</span>npm i babel-loader @babel/core @babel/preset-env webpack -D

@babel/core  核心包
@babel/preset-env 预设包<span class="token punctuation">,</span>语言包

<span class="token punctuation">{</span>
    	test<span class="token operator">:</span>/\.js$/<span class="token punctuation">,</span>
        use<span class="token operator">:</span><span class="token punctuation">{</span>
            loader<span class="token operator">:</span>&#39;babel-loader&#39;<span class="token punctuation">,</span>
-                options<span class="token operator">:</span><span class="token punctuation">{</span>
-                    presets<span class="token operator">:</span><span class="token punctuation">[</span>&#39;@babel/env&#39;<span class="token punctuation">]</span><span class="token punctuation">,</span>
-                    plugins<span class="token operator">:</span><span class="token punctuation">[</span>&#39;@babel/plugin-proposal-class-properties&#39;<span class="token punctuation">]</span>
-                <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
		exclude<span class="token operator">:</span> /node_modules/ <span class="token comment">//不打包node_modules</span>
<span class="token punctuation">}</span>

建一个 .babelrc文件<span class="token punctuation">,</span>json格式 把options写入这个文件
<span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;@babel/plugin-proposal-class-properties&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="generator" tabindex="-1"><a class="header-anchor" href="#generator" aria-hidden="true">#</a> <code>generator</code></h3><p>如果需要使用<code>generator</code>，无法直接使用babel进行转换，因为会将<code>generator</code>转换为一个<code>regeneratorRuntime</code>，然后使用<code>mark</code>和<code>wrap</code>来实现<code>generator</code></p><p>但由于babel并没有内置<code>regeneratorRuntime</code>，所以无法直接使用</p><p>需要安装插件:</p><p>​ <code>npm i @babel/plugin-transform-runtime -D</code></p><p>同时还需安装运行时依赖:</p><p>​ <code>npm i @babel/runtime -D</code></p><p>在<code>.babelrc</code>中添加插件:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;@babel/env&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;@babel/plugin-proposal-class-properties&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>如果需要使用ES6/7中对象原型提供的新方法，babel默认情况无法转换，即使用了<code>transform-runtime</code>的插件也不支持转换原型上的方法</p><p>需要使用另一个模块:</p><p>​ <code>npm i @babel/polyfill -S</code></p><p>该模块需要在使用新方法的地方直接引入:</p><p>​ <code>import &#39;@babel/polyfill&#39;</code></p><h2 id="source-map的使用" tabindex="-1"><a class="header-anchor" href="#source-map的使用" aria-hidden="true">#</a> source map的使用</h2><h4 id="devtool" tabindex="-1"><a class="header-anchor" href="#devtool" aria-hidden="true">#</a> devtool</h4><p>此选项控制是否生成，以及如何生成 source map。</p><p>使用 <a href="https://www.webpackjs.com/plugins/source-map-dev-tool-plugin" target="_blank" rel="noopener noreferrer"><code>SourceMapDevToolPlugin</code><span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> 进行更细粒度的配置。查看 <a href="https://www.webpackjs.com/loaders/source-map-loader" target="_blank" rel="noopener noreferrer"><code>source-map-loader</code><span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> 来处理已有的 source map。</p><p>选择一种 <a href="http://blog.teamtreehouse.com/introduction-source-maps" target="_blank" rel="noopener noreferrer">source map<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> 格式来增强调试过程。不同的值会明显影响到构建(build)和重新构建(rebuild)的速度。</p><blockquote><p>可以直接使用 <code>SourceMapDevToolPlugin</code>/<code>EvalSourceMapDevToolPlugin</code> 来替代使用 <code>devtool</code> 选项，它有更多的选项，但是切勿同时使用 <code>devtool</code> 选项和 <code>SourceMapDevToolPlugin</code>/<code>EvalSourceMapDevToolPlugin</code> 插件。因为<code>devtool</code> 选项在内部添加过这些插件，所以会应用两次插件。</p></blockquote><table><thead><tr><th>devtool</th><th>构建速度</th><th>重新构建速度</th><th>生产环境</th><th>品质(quality)</th></tr></thead><tbody><tr><td>(none)</td><td>+++</td><td>+++</td><td>yes</td><td>打包后的代码</td></tr><tr><td>eval</td><td>+++</td><td>+++</td><td>no</td><td>生成后的代码</td></tr><tr><td>cheap-eval-source-map</td><td>+</td><td>++</td><td>no</td><td>转换过的代码（仅限行）</td></tr><tr><td>cheap-module-eval-source-map</td><td>o</td><td>++</td><td>no</td><td>原始源代码（仅限行）</td></tr><tr><td>eval-source-map</td><td>--</td><td>+</td><td>no</td><td>原始源代码</td></tr><tr><td>cheap-source-map</td><td>+</td><td>o</td><td>no</td><td>转换过的代码（仅限行）</td></tr><tr><td>cheap-module-source-map</td><td>o</td><td>-</td><td>no</td><td>原始源代码（仅限行）</td></tr><tr><td>inline-cheap-source-map</td><td>+</td><td>o</td><td>no</td><td>转换过的代码（仅限行）</td></tr><tr><td>inline-cheap-module-source-map</td><td>o</td><td>-</td><td>no</td><td>原始源代码（仅限行）</td></tr><tr><td>source-map</td><td>--</td><td>--</td><td>yes</td><td>原始源代码</td></tr><tr><td>inline-source-map</td><td>--</td><td>--</td><td>no</td><td>原始源代码</td></tr><tr><td>hidden-source-map</td><td>--</td><td>--</td><td>yes</td><td>原始源代码</td></tr><tr><td>nosources-source-map</td><td>--</td><td>--</td><td>yes</td><td>无源代码内容</td></tr></tbody></table><h4 id="这么多模式用哪个好" tabindex="-1"><a class="header-anchor" href="#这么多模式用哪个好" aria-hidden="true">#</a> 这么多模式用哪个好？</h4><p>开发环境推荐：</p><p>​ <strong>cheap-module-eval-source-map</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>plugins<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
module<span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
devtool<span class="token operator">:</span><span class="token string">&#39;cheap-module-eval-source-map&#39;</span>
在webpack<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js中
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>生产环境推荐：</p><p>​ <strong>none(不使用source map)</strong></p><p>原因如下：</p><ol><li>**使用 cheap 模式可以大幅提高 soure map 生成的效率。**大部分情况我们调试并不关心列信息，而且就算 source map 没有列，有些浏览器引擎（例如 v8） 也会给出列信息。</li><li><strong>使用 module 可支持 babel 这种预编译工具，映射转换前的代码</strong>。</li><li>**使用 eval 方式可大幅提高持续构建效率。**官方文档提供的速度对比表格可以看到 eval 模式的重新构建速度都很快。</li><li>**使用 eval-source-map 模式可以减少网络请求。**这种模式开启 DataUrl 本身包含完整 sourcemap 信息，并不需要像 sourceURL 那样，浏览器需要发送一个完整请求去获取 sourcemap 文件，这会略微提高点效率。而生产环境中则不宜用 eval，这样会让文件变得极大。</li></ol><h3 id="插件" tabindex="-1"><a class="header-anchor" href="#插件" aria-hidden="true">#</a> 插件</h3><h1 id="plugin插件" tabindex="-1"><a class="header-anchor" href="#plugin插件" aria-hidden="true">#</a> plugin插件</h1><p>基本使用方法:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1.</span>安装插件<span class="token operator">:</span> 
	npm i clean<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin <span class="token operator">-</span><span class="token constant">D</span>`
<span class="token number">2.</span>引入插件<span class="token operator">:</span> 
	<span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;clean-webpack-plugin&#39;</span><span class="token punctuation">)</span>
<span class="token number">3.</span>使用插件<span class="token punctuation">,</span> 在plugins中直接创建对象即可<span class="token operator">:</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          filename<span class="token operator">:</span> <span class="token string">&#39;index.html&#39;</span><span class="token punctuation">,</span>
          template<span class="token operator">:</span> <span class="token string">&#39;./src/index.html&#39;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="html-webpack-plugin" tabindex="-1"><a class="header-anchor" href="#html-webpack-plugin" aria-hidden="true">#</a> html-webpack-plugin</h2><p><a href="https://www.webpackjs.com/guides/output-management/#%E8%AE%BE%E5%AE%9A-htmlwebpackplugin" target="_blank" rel="noopener noreferrer">传送门<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><ul><li><p>webpack默认只能打包js</p></li><li><p>如果要打包html，还得下载一个html的插件</p></li><li><p>并且要修改配置文件，不能只是独立的html，还得给一个js的入口文件</p></li><li><p>步骤：</p><ul><li><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>  <span class="token function">npm</span> <span class="token function">install</span> --save-dev html-webpack-plugin
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>修改webpack.config.js</p></li><li><p>先导入</p></li><li><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token comment">//title设置打包后的html标题</span>
          title<span class="token operator">:</span> <span class="token string">&#39;测试&#39;</span><span class="token punctuation">,</span>
          filename<span class="token operator">:</span> <span class="token string">&#39;index.html&#39;</span><span class="token punctuation">,</span> <span class="token comment">//打包后的文件名称</span>
          template<span class="token operator">:</span><span class="token string">&#39;./src/index.html&#39;</span> <span class="token comment">//导入自己的html;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>    
    <span class="token operator">-</span> 会自动把入口文件的js  打包后的js文件 导入到打包后的html里面来
    <span class="token operator">-</span> 如果只是写title，它会帮你创建新的空的html<span class="token punctuation">,</span>并导入js依赖
    <span class="token operator">-</span> 如果写template跟路径，就代表找到template对应的路径的html文件，把它打包起来，并添加依赖

<span class="token number">1.</span> <span class="token function">devServer时根据模板在express项目根目录下生成html文件</span><span class="token punctuation">(</span>类似于devServer生成内存中的bundle<span class="token punctuation">.</span>js<span class="token punctuation">)</span>
<span class="token number">2.</span> devServer时自动引入bundle<span class="token punctuation">.</span>js
<span class="token number">3.</span> 打包时会自动生成index<span class="token punctuation">.</span>html

## clean<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin 

<span class="token punctuation">[</span>中文传送门<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>webpackjs<span class="token punctuation">.</span>com<span class="token operator">/</span>guides<span class="token operator">/</span>output<span class="token operator">-</span>management<span class="token operator">/</span>#<span class="token operator">%</span><span class="token constant">E6</span><span class="token operator">%</span><span class="token constant">B8</span><span class="token operator">%</span><span class="token number">85</span><span class="token operator">%</span><span class="token constant">E7</span><span class="token operator">%</span><span class="token number">90</span><span class="token operator">%</span><span class="token number">86</span><span class="token operator">-</span>dist<span class="token operator">-</span><span class="token operator">%</span><span class="token constant">E6</span><span class="token operator">%</span><span class="token number">96</span><span class="token operator">%</span><span class="token number">87</span><span class="token operator">%</span><span class="token constant">E4</span><span class="token operator">%</span><span class="token constant">BB</span><span class="token operator">%</span><span class="token constant">B6</span><span class="token operator">%</span><span class="token constant">E5</span><span class="token operator">%</span><span class="token constant">A4</span><span class="token operator">%</span><span class="token constant">B9</span><span class="token punctuation">)</span>

<span class="token punctuation">[</span>英文官网<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>webpack<span class="token punctuation">.</span>js<span class="token punctuation">.</span>org<span class="token operator">/</span>guides<span class="token operator">/</span>output<span class="token operator">-</span>management<span class="token operator">/</span>#cleaning<span class="token operator">-</span>up<span class="token operator">-</span>the<span class="token operator">-</span>dist<span class="token operator">-</span>folder<span class="token punctuation">)</span>

<span class="token operator">-</span> 

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="下载清空dist的插件" tabindex="-1"><a class="header-anchor" href="#下载清空dist的插件" aria-hidden="true">#</a> 下载清空dist的插件</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm install clean-webpack-plugin --save-dev
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li><p>webpack.config.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;clean-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">  //清空 dist 文件夹
</span><span class="token prefix unchanged"> </span><span class="token line">  new CleanWebpackPlugin()
</span></span>]
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul><h2 id="copy-webpack-puugin" tabindex="-1"><a class="header-anchor" href="#copy-webpack-puugin" aria-hidden="true">#</a> copy-webpack-puugin</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm i copy<span class="token operator">-</span>webpack<span class="token operator">-</span>puugin <span class="token operator">-</span><span class="token constant">D</span>

<span class="token keyword">const</span> CopyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;copy-webpack-plugin&#39;</span><span class="token punctuation">)</span>

plugins<span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">copyWebpackPuugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            from<span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&#39;assets&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//从这里拷贝到to</span>
            to<span class="token operator">:</span><span class="token string">&#39;assets&#39;</span>  <span class="token comment">//拷贝到src里的assets</span>
        <span class="token punctuation">}</span>
   <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="bannerplugin-webpack内置插件" tabindex="-1"><a class="header-anchor" href="#bannerplugin-webpack内置插件" aria-hidden="true">#</a> BannerPlugin webpack内置插件</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span>  生成头部注释
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p><ol><li><p>引入webpack</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>创建插件对象</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&#39;index.html&#39;</span><span class="token punctuation">,</span>
      template<span class="token operator">:</span> <span class="token string">&#39;./src/index.html&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        from<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;assets&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        to<span class="token operator">:</span> <span class="token string">&#39;assets&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span><span class="token punctuation">(</span><span class="token string">&#39;程序员牛逼!&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ol><p>=======</p><h2 id="webpack-spritesmith" tabindex="-1"><a class="header-anchor" href="#webpack-spritesmith" aria-hidden="true">#</a> webpack-spritesmith</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>多图片生成雪碧图且生成css

https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>npmjs<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token keyword">package</span><span class="token operator">/</span>webpack<span class="token operator">-</span>spritesmith
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>ea05b67cfe300825f0bac46dab0ee838a92702d1</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><h1 id="用webpack模拟出vue-cli" tabindex="-1"><a class="header-anchor" href="#用webpack模拟出vue-cli" aria-hidden="true">#</a> 用webpack模拟出vue-cli</h1><ul><li>创建一个项目文件夹，进来输入 npm init -y</li><li>创建src文件夹，里面放main.js</li><li>创建public文件夹，里面放index.html</li><li>下载webpack和webpack-cli</li><li>写 webpack.config.js <ul><li>配置入口 （./src/main.js）</li><li>配置出口</li><li>配置使用自己的html <ul><li>下载html插件</li><li>改配置，配置的template里面写./public/index.html</li></ul></li></ul></li><li>下载css-loader</li><li>下载vue-loader</li><li>main.js里写以前那些vue的初始化代码</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> VueLoaderPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;vue-loader/lib/plugin&#39;</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//入口</span>
  entry<span class="token operator">:</span> <span class="token string">&quot;./src/main.js&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">//出口</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;./dist/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">&#39;index.js&#39;</span> <span class="token comment">//出口文件名</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置这个微型服务器的根目录</span>
    contentBase<span class="token operator">:</span> <span class="token string">&#39;./dist&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">//vue模块</span>
        loader<span class="token operator">:</span> <span class="token string">&#39;vue-loader&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">//css模块</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;css-loader&#39;</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  plugins<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">//插件管理</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">//title设置打包后的html标题</span>
      template<span class="token operator">:</span> <span class="token string">&quot;./public/index.html&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">VueLoaderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// production，会打包的慢一点，它里面会压缩代码</span>
  <span class="token comment">// development，打包相对快一点，它里面的代码不压缩</span>
  mode<span class="token operator">:</span><span class="token string">&quot;production&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h2 id="webpack-dev-server-1" tabindex="-1"><a class="header-anchor" href="#webpack-dev-server-1" aria-hidden="true">#</a> webpack -dev-server</h2><p><a href="https://www.webpackjs.com/guides/development/#%E4%BD%BF%E7%94%A8-webpack-dev-server" target="_blank" rel="noopener noreferrer">传送门<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p>为你提供了一个简单的 web server，并且具有 live reloading(实时重新加载) 功能</p><ul><li><p>安装</p><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server
  
  https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>blog<span class="token punctuation">.</span>csdn<span class="token punctuation">.</span>net<span class="token operator">/</span>hdchangchang<span class="token operator">/</span>article<span class="token operator">/</span>details<span class="token operator">/</span><span class="token number">80112593</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li><li><p>配置webpack.config.js</p><ul><li><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> devServer: {
</span><span class="token prefix unchanged"> </span><span class="token line">    contentBase: &#39;./dist&#39;
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li><li><p>运行起来</p><ul><li><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>  npx webpack-dev-server --open
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ul></li><li><p>每次这么运行非常麻烦，所以这个命令写在package.json的<code>scripts</code>里面</p></li><li><p>我们就用 npm run xxx 运行</p></li></ul><h1 id="参数解读" tabindex="-1"><a class="header-anchor" href="#参数解读" aria-hidden="true">#</a> 参数解读:</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server有三种配置方式，有配置文件方式、<span class="token keyword">package</span><span class="token punctuation">.</span>json方式和纯node的<span class="token constant">API</span>实现方式，
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="webpack-config-js" tabindex="-1"><a class="header-anchor" href="#webpack-config-js" aria-hidden="true">#</a> webpack.config.js</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
mode<span class="token operator">:</span><span class="token string">&#39;development&#39;</span> <span class="token operator">/</span> <span class="token string">&#39;production&#39;</span> 指定模式
devtool<span class="token operator">:</span><span class="token string">&quot;cheap-module-eval-source-map&quot;</span> <span class="token comment">//压缩.map文件或不用  测试环境</span>
devtool<span class="token operator">:</span><span class="token string">&quot;none&quot;</span> <span class="token comment">//生产环境推荐使用</span>
devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;public&quot;</span><span class="token punctuation">)</span><span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span><span class="token comment">//本地服务器所加载的页面所在的目录</span>
    historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//不跳转; 应对返回404页面时定向到特定页面用的</span>
    historyApiFallback<span class="token operator">:</span><span class="token punctuation">{</span>
       rewrites<span class="token operator">:</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span>from<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>to<span class="token operator">:</span><span class="token string">&#39;/404.html&#39;</span><span class="token punctuation">}</span>
       <span class="token punctuation">]</span>
  	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    host<span class="token operator">:</span><span class="token string">&#39;0.0.0.0&#39;</span><span class="token punctuation">,</span> <span class="token comment">//服务器的主机号，默认是localhost，</span>
    port<span class="token operator">:</span><span class="token number">7000</span><span class="token punctuation">,</span><span class="token comment">//端口号</span>
    inline<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//实时刷新</span>
    hot<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//热替换</span>
    compress<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//gzip压缩</span>
    overlay<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//浏览器输出编译错误的，默认是关闭的，需要手动打开：</span>
    stats<span class="token operator">:</span> <span class="token string">&quot;errors-only&quot;</span> <span class="token punctuation">,</span><span class="token comment">//编译的时候shell上的输出内容</span>
    open<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//dev server将直接打开浏览器</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            target<span class="token operator">:</span> <span class="token string">&quot;http://localhost:3000&quot;</span><span class="token punctuation">,</span>
            changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;^/api&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span>如果不希望”api”在传递中被传递过去，可以使用rewrite的方式实现：
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>，<span class="token comment">//重定向</span>
    
    publicPath<span class="token operator">:</span><span class="token string">&#39;/assets/&#39;</span><span class="token comment">//编译后文件的路径 http://localhost:8080/assets/bundle.js</span>
 <span class="token punctuation">}</span>
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>blog<span class="token punctuation">.</span>csdn<span class="token punctuation">.</span>net<span class="token operator">/</span>franktaoge<span class="token operator">/</span>article<span class="token operator">/</span>details<span class="token operator">/</span><span class="token number">80083317</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="package-json" tabindex="-1"><a class="header-anchor" href="#package-json" aria-hidden="true">#</a> package.json</h2><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>
<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;buildcustom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config webpack.custom.config.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">//指定打包配置文件</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;watch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --watch&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dev2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --compress --hot --port 5000 --open --contentBase src&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node server.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
      
--compress  <span class="token comment">//gzip压缩</span>
--hot 		<span class="token comment">//热更新,保存自动更新页面</span>
--port <span class="token number">5000</span> <span class="token comment">//端口</span>
--open 		<span class="token comment">//npm run dev 后自动打开页面</span>
--contentBase src&quot;<span class="token punctuation">,</span> <span class="token comment">//指定默认打开路径</span>
--devtool source-map <span class="token comment">//生成 .map文件</span>
--watch 	<span class="token comment">//监听模式</span>
--config XXX.js <span class="token comment">//执行另一个js文件 //默认是webpack.config.js</span>
-p			<span class="token comment">//压缩混淆</span>
-d			<span class="token comment">//生成map映射文件</span>
--progress  <span class="token comment">//显示进度条</span>
--color 	<span class="token comment">//添加颜色</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="webpack跨域" tabindex="-1"><a class="header-anchor" href="#webpack跨域" aria-hidden="true">#</a> webpack跨域</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>webpack的devServer<span class="token punctuation">.</span>proxy就是使用了非常强大的 http<span class="token operator">-</span>proxy<span class="token operator">-</span>middleware 包


 <span class="token comment">// 开发配置</span>
    dev<span class="token operator">:</span> <span class="token punctuation">{</span>
        assetsRoot<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 静态资源文件夹</span>
        assetsSubDirectory<span class="token operator">:</span> <span class="token string">&quot;static&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// 发布路径</span>
        assetsPublicPath<span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// Various Dev Server settings</span>
        host<span class="token operator">:</span> <span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// dev-server监听的端口</span>
        port<span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
        autoOpenBrowser<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        proxyTable<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">//综合收件</span>
            <span class="token string">&#39;/api&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                target<span class="token operator">:</span> <span class="token string">&quot;http://www.baidu.com&quot;</span><span class="token punctuation">,</span> <span class="token comment">//开发环境</span>
                changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token string">&#39;^/api&#39;</span><span class="token operator">:</span> <span class="token string">&#39;api&#39;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//是否使用 cssSourceMap</span>
        cssSourceMap<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>

作者：htyin
链接：https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>juejin<span class="token punctuation">.</span>im<span class="token operator">/</span>post<span class="token operator">/</span><span class="token number">5</span>cb3d6ecf265da03b57b4b21
来源：掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h1 id="webpack文件" tabindex="-1"><a class="header-anchor" href="#webpack文件" aria-hidden="true">#</a> webpack文件</h1><h2 id="package-json-1" tabindex="-1"><a class="header-anchor" href="#package-json-1" aria-hidden="true">#</a> package.json</h2><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-basic&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;buildcustom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config webpack.custom.config.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;watch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --watch&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dev2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --compress --hot --port 5000 --open --contentBase src&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node server.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>	<span class="token comment">//开发使用</span>
    <span class="token property">&quot;webpack-dev-server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.3.1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>		<span class="token comment">//上线使用</span>
    <span class="token property">&quot;@babel/polyfill&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.4.4&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="webpack-config-js-1" tabindex="-1"><a class="header-anchor" href="#webpack-config-js-1" aria-hidden="true">#</a> webpack.config.js</h2><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>const path = require(&#39;path&#39;)
const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)
const CleanWebpackPlugin = require(&#39;clean-webpack-plugin&#39;)
const CopyWebpackPlugin = require(&#39;copy-webpack-plugin&#39;)
const webpack = require(&#39;webpack&#39;)

<span class="token comment">// webpack的配置文件遵循着CommonJS规范</span>
module.exports = <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> &#39;./src/main.js&#39;<span class="token punctuation">,</span>  <span class="token comment">//入口</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>					<span class="token comment">//出口</span>
    <span class="token comment">// path.resolve() : 解析当前相对路径的绝对路径</span>
    <span class="token comment">// path: path.resolve(&#39;./dist/&#39;),</span>
    <span class="token comment">// path: path.resolve(__dirname, &#39;./dist/&#39;),</span>
    path<span class="token operator">:</span> path.join(__dirname<span class="token punctuation">,</span> &#39;./dist/&#39;)<span class="token punctuation">,</span>
    filename<span class="token operator">:</span> &#39;bundle.js&#39;<span class="token punctuation">,</span>
    publicPath<span class="token operator">:</span> &#39;/&#39;
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mode<span class="token operator">:</span> &#39;production&#39;<span class="token punctuation">,</span>
  <span class="token comment">// 开启监视模式, 此时执行webpack指令进行打包会监视文件变化自动打包</span>
  <span class="token comment">// watch: true</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token comment">// contentBase: &#39;./src&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    new HtmlWebpackPlugin(<span class="token punctuation">{</span>
      filename<span class="token operator">:</span> &#39;index.html&#39;<span class="token punctuation">,</span>
      template<span class="token operator">:</span> &#39;./src/index.html&#39;
    <span class="token punctuation">}</span>)<span class="token punctuation">,</span>
    new CleanWebpackPlugin()<span class="token punctuation">,</span>
    new CopyWebpackPlugin(<span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        from<span class="token operator">:</span> path.join(__dirname<span class="token punctuation">,</span> &#39;assets&#39;)<span class="token punctuation">,</span>
        to<span class="token operator">:</span> &#39;assets&#39;
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>)<span class="token punctuation">,</span>
    new webpack.BannerPlugin(&#39;真牛biubiu!&#39;)
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> /\.css$/<span class="token punctuation">,</span>
        <span class="token comment">// webpack读取loader时 是从右到左的读取, 会将css文件先交给最右侧的loader来处理</span>
        <span class="token comment">// loader的执行顺序是从右到左以管道的方式链式调用</span>
        <span class="token comment">// css-loader: 解析css文件</span>
        <span class="token comment">// style-loader: 将解析出来的结果 放到html中, 使其生效</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>&#39;style-loader&#39;<span class="token punctuation">,</span> &#39;css-loader&#39;<span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> test<span class="token operator">:</span> /\.less$/<span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token punctuation">[</span>&#39;style-loader&#39;<span class="token punctuation">,</span> &#39;css-loader&#39;<span class="token punctuation">,</span> &#39;less-loader&#39;<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> test<span class="token operator">:</span> /\.s(a|c)ss$/<span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token punctuation">[</span>&#39;style-loader&#39;<span class="token punctuation">,</span> &#39;css-loader&#39;<span class="token punctuation">,</span> &#39;sass-loader&#39;<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> /\.(jpg|jpeg|png|bmp|gif)$/<span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> &#39;url-loader&#39;<span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            limit<span class="token operator">:</span> <span class="token number">5</span> * <span class="token number">1024</span><span class="token punctuation">,</span>
            outputPath<span class="token operator">:</span> &#39;images&#39;<span class="token punctuation">,</span>
            name<span class="token operator">:</span> &#39;<span class="token punctuation">[</span>name<span class="token punctuation">]</span>-<span class="token punctuation">[</span>hash<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">]</span>.<span class="token punctuation">[</span>ext<span class="token punctuation">]</span>&#39;
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      exclude<span class="token operator">:</span> /node_modules/<span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// devtool: &#39;cheap-module-eval-source-map&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div><h1 id="webpack高级" tabindex="-1"><a class="header-anchor" href="#webpack高级" aria-hidden="true">#</a> webpack高级</h1><h2 id="多页面打包" tabindex="-1"><a class="header-anchor" href="#多页面打包" aria-hidden="true">#</a> 多页面打包</h2><p>在<code>webpack.config.js</code>中修改入口和出口配置</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token comment">// 1. 修改为多入口</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
      main<span class="token operator">:</span> <span class="token string">&#39;./src/main.js&#39;</span><span class="token punctuation">,</span>
      other<span class="token operator">:</span> <span class="token string">&#39;./src/other.js&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;./dist/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// filename: &#39;bundle.js&#39;,</span>
    <span class="token comment">// 2. 多入口无法对应一个固定的出口, 所以修改filename为[name]变量</span>
    filename<span class="token operator">:</span> <span class="token string">&#39;[name].js&#39;</span><span class="token punctuation">,</span>
    publicPath<span class="token operator">:</span> <span class="token string">&#39;/&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// 3. 如果用了html插件,需要手动配置多入口对应的html文件,将指定其对应的输出文件</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          template<span class="token operator">:</span> <span class="token string">&#39;./index.html&#39;</span><span class="token punctuation">,</span>
          filename<span class="token operator">:</span> <span class="token string">&#39;index.html&#39;</span><span class="token punctuation">,</span>
          chunks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;main&#39;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          template<span class="token operator">:</span> <span class="token string">&#39;./index.html&#39;</span><span class="token punctuation">,</span>
          filename<span class="token operator">:</span> <span class="token string">&#39;other.html&#39;</span><span class="token punctuation">,</span>
          <span class="token comment">// chunks: [&#39;other&#39;, &#39;main&#39;]</span>
          chunks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;other&#39;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>修改入口为对象，支持多个js入口，同时修改output输出的文件名为<code>&#39;[name].js&#39;</code>表示各自已入口文件名作为输出文件名，但是<code>html-webpack-plugin</code>不支持此功能，所以需要再拷贝一份插件，用于生成两个html页面，实现多页应用</p><h2 id="第三方库的两种引入方式" tabindex="-1"><a class="header-anchor" href="#第三方库的两种引入方式" aria-hidden="true">#</a> 第三方库的两种引入方式</h2><p>可以通过<code>expose-loader</code>进行全局变量的注入，同时也可以使用内置插件<code>webpack.ProvidePlugin</code>对每个模块的闭包空间，注入一个变量，自动加载模块，而不必到处 <code>import</code> 或 <code>require</code></p><ul><li><p>expose-loader <strong>将库引入到全局作用域</strong></p><ol><li><p>安装<code>expose-loader</code></p><p><code>npm i -D expose-loader</code></p></li><li><p>配置loader</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    test<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;jquery&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    use<span class="token operator">:</span> <span class="token punctuation">{</span>
      loader<span class="token operator">:</span> <span class="token string">&#39;expose-loader&#39;</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token string">&#39;<!--vuepress-ssr-app-->#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>tips: <code>require.resolve</code> 用来获取模块的绝对路径。所以这里的loader只会作用于 jquery 模块。并且只在 bundle 中使用到它时，才进行处理。</p></li></ol></li><li><p>webpack.ProvidePlugin <strong>将库自动加载到每个模块</strong></p><ol><li><p>引入webpack</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>创建插件对象</p><p>要自动加载 <code>jquery</code>，我们可以将两个变量都指向对应的 node 模块</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  $<span class="token operator">:</span> <span class="token string">&#39;jquery&#39;</span><span class="token punctuation">,</span>
  jQuery<span class="token operator">:</span> <span class="token string">&#39;jquery&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol></li></ul><h2 id="development-production不同配置文件打包" tabindex="-1"><a class="header-anchor" href="#development-production不同配置文件打包" aria-hidden="true">#</a> Development / Production不同配置文件打包</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>`npm i -D webpack-merge`
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>项目开发时一般需要使用两套配置文件，用于开发阶段打包（不压缩代码，不优化代码，增加效率）和上线阶段打包（压缩代码，优化代码，打包后直接上线使用）</p><p>抽取三个配置文件：</p><ul><li><p>webpack.base.js</p></li><li><p>webpack.prod.js</p></li><li><p>webpack.dev.js</p></li></ul><p>步骤如下：</p><ol><li><p>将开发环境和生产环境公用的配置放入base中，不同的配置各自放入prod或dev文件中（例如：mode）</p></li><li><p>然后在dev和prod中使用<code>webpack-merge</code>把自己的配置与base的配置进行合并后导出</p><p><code>npm i -D webpack-merge</code></p></li><li><p>将package.json中的脚本参数进行修改，通过<code>--config</code>手动指定特定的配置文件</p></li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>webpack<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>js

<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-merge&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> baseConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./webpack.base.js&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// 引入webpack</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// webpack的配置文件遵循着CommonJS规范</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// 开启监视模式, 此时执行webpack指令进行打包会监视文件变化自动打包</span>
  <span class="token comment">// watch: true</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 开启热更新</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token comment">// contentBase: &#39;./src&#39;</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// /api/getUserInfo</span>
      <span class="token comment">// 当前端请求 /api 地址时, 会将请求转发到 </span>
      <span class="token comment">// http://localhost:9999/api</span>
      <span class="token comment">// 举例: 客户端现在请求的时 /api/getUserInfo</span>
      <span class="token comment">// 此时会将请求转发到: http://localhost:9999/api/getUserInfo</span>
      <span class="token comment">// &#39;/api&#39;: &#39;http://localhost:9999&#39;,</span>
      <span class="token comment">// 此时会将请求转发到: http://localhost:9999/getUserInfo</span>
      <span class="token comment">// &#39;/getUserInfo&#39;: &#39;http://localhost:9999&#39;</span>
      <span class="token string">&#39;/api&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        target<span class="token operator">:</span> <span class="token string">&#39;http://localhost:9999&#39;</span><span class="token punctuation">,</span>
        <span class="token comment">// 转发请求时不会携带 /api</span>
        <span class="token comment">// http://localhost:9999/getUserInfo</span>
        pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&#39;^/api&#39;</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">&#39;cheap-module-eval-source-map&#39;</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token constant">IS_DEV</span><span class="token operator">:</span> <span class="token string">&#39;true&#39;</span><span class="token punctuation">,</span>
      <span class="token comment">// test: &#39;1 + 1&#39;, // DefinePlugin会解析定义的环境变量表达式, 当成JS执行</span>
      <span class="token comment">// test2: &#39;&quot;zs&quot;&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>webpack<span class="token punctuation">.</span>prod<span class="token punctuation">.</span>js

<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-merge&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> baseConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./webpack.base.js&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// webpack的配置文件遵循着CommonJS规范</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">&#39;cheap-module-source-map&#39;</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token constant">IS_DEV</span><span class="token operator">:</span> <span class="token string">&#39;false&#39;</span><span class="token punctuation">,</span>
      <span class="token comment">// test: &#39;1 + 1&#39;, // DefinePlugin会解析定义的环境变量表达式, 当成JS执行</span>
      <span class="token comment">// test2: &#39;&quot;zs&quot;&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>webpack<span class="token punctuation">.</span>base<span class="token punctuation">.</span>js

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;clean-webpack-plugin&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> CopyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;copy-webpack-plugin&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// webpack的配置文件遵循着CommonJS规范</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// entry: &#39;./src/main.js&#39;,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    index<span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
    other<span class="token operator">:</span> <span class="token string">&#39;./src/other.js&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// path.resolve() : 解析当前相对路径的绝对路径</span>
    <span class="token comment">// path: path.resolve(&#39;./dist/&#39;),</span>
    <span class="token comment">// path: path.resolve(__dirname, &#39;./dist/&#39;),</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;..&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;./dist/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// filename: &#39;bundle.js&#39;,</span>
    filename<span class="token operator">:</span> <span class="token string">&#39;[name].js&#39;</span><span class="token punctuation">,</span>
    publicPath<span class="token operator">:</span> <span class="token string">&#39;/&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 开启监视模式, 此时执行webpack指令进行打包会监视文件变化自动打包</span>
  <span class="token comment">// watch: true</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&#39;index.html&#39;</span><span class="token punctuation">,</span>
      template<span class="token operator">:</span> <span class="token string">&#39;./src/index.html&#39;</span><span class="token punctuation">,</span>
      chunks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;index&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;other&#39;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&#39;other.html&#39;</span><span class="token punctuation">,</span>
      template<span class="token operator">:</span> <span class="token string">&#39;./src/other.html&#39;</span><span class="token punctuation">,</span>
      chunks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;other&#39;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        from<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;..&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;assets&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        to<span class="token operator">:</span> <span class="token string">&#39;assets&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span><span class="token punctuation">(</span><span class="token string">&#39;biubiu!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      $<span class="token operator">:</span> <span class="token string">&#39;jquery&#39;</span><span class="token punctuation">,</span>
      jQuery<span class="token operator">:</span> <span class="token string">&#39;jquery&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// webpack读取loader时 是从右到左的读取, 会将css文件先交给最右侧的loader来处理</span>
        <span class="token comment">// loader的执行顺序是从右到左以管道的方式链式调用</span>
        <span class="token comment">// css-loader: 解析css文件</span>
        <span class="token comment">// style-loader: 将解析出来的结果 放到html中, 使其生效</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;less-loader&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.s(a|c)ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;sass-loader&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpg|jpeg|png|bmp|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&#39;url-loader&#39;</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            limit<span class="token operator">:</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
            outputPath<span class="token operator">:</span> <span class="token string">&#39;images&#39;</span><span class="token punctuation">,</span>
            name<span class="token operator">:</span> <span class="token string">&#39;[name]-[hash:6].[ext]&#39;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff|woff2|eot|svg|ttf)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token string">&#39;url-loader&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span>
          <span class="token comment">// options: {</span>
          <span class="token comment">//   presets: [&#39;@babel/env&#39;],</span>
          <span class="token comment">//   plugins: [</span>
          <span class="token comment">//     &#39;@babel/plugin-proposal-class-properties&#39;,</span>
          <span class="token comment">//     &#39;@babel/plugin-transform-runtime&#39;</span>
          <span class="token comment">//   ]</span>
          <span class="token comment">// }</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>

      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(htm|html)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">&#39;html-withimg-loader&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// {</span>
      <span class="token comment">//   // 用于解析jQuery模块的绝对路径</span>
      <span class="token comment">//   test: require.resolve(&#39;jquery&#39;),</span>
      <span class="token comment">//   use: {</span>
      <span class="token comment">//     loader: &#39;expose-loader&#39;,</span>
      <span class="token comment">//     options: &#39;<!--vuepress-ssr-app-->#39;</span>
      <span class="token comment">//   }</span>
      <span class="token comment">// }</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br></div></div><h2 id="定义环境变量" tabindex="-1"><a class="header-anchor" href="#定义环境变量" aria-hidden="true">#</a> 定义环境变量</h2><p>除了区分不同的配置文件进行打包，还需要在开发时知道当前的环境是开发阶段或上线阶段，所以可以借助内置插件<code>DefinePlugin</code>来定义环境变量。最终可以实现开发阶段与上线阶段的api地址自动切换。</p><ol><li><p>引入webpack</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>创建插件对象，并定义环境变量</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token constant">IS_DEV</span><span class="token operator">:</span> <span class="token string">&#39;false&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>在src打包的代码环境下可以直接使用</p></li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>config<span class="token punctuation">.</span>js
<span class="token keyword">const</span> <span class="token constant">DEV_BASE_URL</span> <span class="token operator">=</span> <span class="token string">&#39;https://weixiao.bdxhcom.com:9028&#39;</span><span class="token comment">//线上测试环境</span>
<span class="token keyword">const</span> <span class="token constant">PRO_BASE_URL</span> <span class="token operator">=</span> <span class="token string">&#39;https://wxapi.bdxhcom.com&#39;</span><span class="token comment">//正式环境</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">==</span> <span class="token string">&#39;development&#39;</span> <span class="token operator">?</span> <span class="token constant">DEV_BASE_URL</span> <span class="token operator">:</span> <span class="token constant">PRO_BASE_URL</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string">&#39;process.env&#39;</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../config/dev.env&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">&#39;process.env.FILE_NAME&#39;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NamedModulesPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// HMR shows correct file names in console on update.</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NoEmitOnErrorsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// https://github.com/ampedandwired/html-webpack-plugin</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&#39;index.html&#39;</span><span class="token punctuation">,</span>
      template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">../src/apply/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.html</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      inject<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="跨域http-proxy" tabindex="-1"><a class="header-anchor" href="#跨域http-proxy" aria-hidden="true">#</a> 跨域http proxy</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>本地地址<span class="token operator">:</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3000</span>&#39;<span class="token punctuation">,</span>
目标地址<span class="token operator">:</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">9999</span>
devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token comment">// contentBase: &#39;./src&#39;</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#39;/api&#39;</span><span class="token operator">:</span> <span class="token string">&#39;http://localhost:9999&#39;</span> <span class="token comment">//带有/api/xx的接口转成此目标</span>
      写法二\
      <span class="token string">&#39;/api&#39;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      		target<span class="token operator">:</span><span class="token string">&#39;http://localhost:9999&#39;</span><span class="token punctuation">,</span>
      		pathRewrite<span class="token operator">:</span><span class="token punctuation">{</span>
      			<span class="token string">&#39;^/api&#39;</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span>  <span class="token comment">////无需带有/api/xx的接口转成此</span>
      		<span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
      
注意<span class="token operator">:</span>axios中的baseurl 要设为<span class="token string">&#39;/api&#39;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="hmr的使用" tabindex="-1"><a class="header-anchor" href="#hmr的使用" aria-hidden="true">#</a> HMR的使用</h2><p>需要对某个模块进行热更新时，可以通过<code>module.hot.accept</code>方法进行文件监视</p><p>只要模块内容发生变化，就会触发回调函数，从而可以重新读取模块内容，做对应的操作</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">&#39;./hotmodule.js&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;hotmodule.js更新了&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./hotmodule.js&#39;</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h1 id="webpack优化" tabindex="-1"><a class="header-anchor" href="#webpack优化" aria-hidden="true">#</a> webpack优化</h1><h2 id="production模式打包自带优化" tabindex="-1"><a class="header-anchor" href="#production模式打包自带优化" aria-hidden="true">#</a> production模式打包自带优化</h2><ul><li><p>tree shaking</p><p>tree shaking 是一个术语，通常用于打包时移除 JavaScript 中的未引用的代码(dead-code)，它依赖于 ES6 模块系统中 <code>import</code>和 <code>export</code>的<strong>静态结构</strong>特性。</p><p>开发时引入一个模块后，如果只使用其中一个功能，上线打包时只会把用到的功能打包进bundle，其他没用到的功能都不会打包进来，可以实现最基础的优化</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>又引用则打包<span class="token punctuation">,</span>没有的就不打包
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li><p>scope hoisting</p><p>scope hoisting的作用是将模块之间的关系进行结果推测， 可以让 Webpack 打包出来的代码文件更小、运行的更快</p><p>scope hoisting 的实现原理其实很简单：分析出模块之间的依赖关系，尽可能的把打散的模块合并到一个函数中去，但前提是不能造成代码冗余。<br> 因此只有那些被引用了一次的模块才能被合并。</p><p>由于 scope hoisting 需要分析出模块之间的依赖关系，因此源码必须采用 ES6 模块化语句，不然它将无法生效。<br> 原因和tree shaking一样。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token operator">+</span>b<span class="token punctuation">)</span>  <span class="token comment">// console.log(3)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>代码压缩</p><p>所有代码使用UglifyJsPlugin插件进行压缩、混淆</p></li></ul><h2 id="css优化" tabindex="-1"><a class="header-anchor" href="#css优化" aria-hidden="true">#</a> css优化</h2><h3 id="将css提取到独立的文件中" tabindex="-1"><a class="header-anchor" href="#将css提取到独立的文件中" aria-hidden="true">#</a> 将css提取到独立的文件中</h3><p><code>mini-css-extract-plugin</code>是用于将CSS提取为独立的文件的插件，对每个包含css的js文件都会创建一个CSS文件，支持按需加载css和sourceMap</p><p>只能用在webpack4中，有如下优势:</p><ul><li>异步加载</li><li>不重复编译，性能很好</li><li>容易使用</li><li>只针对CSS</li></ul><p>使用方法：</p><ol><li><p>安装</p><p><code>npm i -D mini-css-extract-plugin</code></p></li><li><p>在webpack配置文件中引入插件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mini-css-extract-plugin&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>创建插件对象，配置抽离的css文件名，支持placeholder语法</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	filename<span class="token operator">:</span> <span class="token string">&#39;[name].css&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>将原来配置的所有<code>style-loader</code>替换为<code>MiniCssExtractPlugin.loader</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
<span class="token comment">// webpack读取loader时 是从右到左的读取, 会将css文件先交给最右侧的loader来处理</span>
<span class="token comment">// loader的执行顺序是从右到左以管道的方式链式调用</span>
<span class="token comment">// css-loader: 解析css文件</span>
<span class="token comment">// style-loader: 将解析出来的结果 放到html中, 使其生效</span>
<span class="token comment">// use: [&#39;style-loader&#39;, &#39;css-loader&#39;]</span>
use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;postcss-loader&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// { test: /\.less$/, use: [&#39;style-loader&#39;, &#39;css-loader&#39;, &#39;less-loader&#39;] },</span>
<span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;less-loader&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// { test: /\.s(a|c)ss$/, use: [&#39;style-loader&#39;, &#39;css-loader&#39;, &#39;sass-loader&#39;] },</span>
<span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.s(a|c)ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;sass-loader&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ol><h3 id="自动添加css前缀" tabindex="-1"><a class="header-anchor" href="#自动添加css前缀" aria-hidden="true">#</a> 自动添加css前缀</h3><p>使用<code>postcss</code>，需要用到<code>postcss-loader</code>和<code>autoprefixer</code>插件</p><ol><li><p>安装</p><p><code>npm i -D postcss-loader autoprefixer</code></p></li><li><p>修改webpack配置文件中的loader，将<code>postcss-loader</code>放置在<code>css-loader</code>的右边（调用链从右到左）</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
<span class="token comment">// webpack读取loader时 是从右到左的读取, 会将css文件先交给最右侧的loader来处理</span>
<span class="token comment">// loader的执行顺序是从右到左以管道的方式链式调用</span>
<span class="token comment">// css-loader: 解析css文件</span>
<span class="token comment">// style-loader: 将解析出来的结果 放到html中, 使其生效</span>
<span class="token comment">// use: [&#39;style-loader&#39;, &#39;css-loader&#39;]</span>
use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;postcss-loader&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// { test: /\.less$/, use: [&#39;style-loader&#39;, &#39;css-loader&#39;, &#39;less-loader&#39;] },</span>
<span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;postcss-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;less-loader&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// { test: /\.s(a|c)ss$/, use: [&#39;style-loader&#39;, &#39;css-loader&#39;, &#39;sass-loader&#39;] },</span>
<span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.s(a|c)ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;postcss-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;sass-loader&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>vue<span class="token operator">-</span>loader中css配置			
<span class="token punctuation">{</span>
				test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				use<span class="token operator">:</span> <span class="token punctuation">[</span>
					<span class="token string">&#39;vue-style-loader&#39;</span><span class="token punctuation">,</span>
					<span class="token punctuation">{</span>
					  loader<span class="token operator">:</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span>
					  options<span class="token operator">:</span> <span class="token punctuation">{</span> importLoaders<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token string">&#39;postcss-loader&#39;</span>
				<span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li><li></li></ol><pre><code>项目根目录下添加`postcss`的配置文件：`postcss.config.js`
</code></pre><ol start="4"><li><p>在<code>postcss</code>的配置文件中使用插件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;autoprefixer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol><h3 id="开启css压缩" tabindex="-1"><a class="header-anchor" href="#开启css压缩" aria-hidden="true">#</a> 开启css压缩</h3><p>需要使用<code>optimize-css-assets-webpack-plugin</code>插件来完成css压缩</p><p>但是由于配置css压缩时会覆盖掉webpack默认的优化配置，导致JS代码无法压缩，所以还需要手动把JS代码压缩插件导入进来：<code>terser-webpack-plugin</code></p><ol><li><p>安装</p><p><code>npm i -D optimize-css-assets-webpack-plugin terser-webpack-plugin </code></p></li><li><p>导入插件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> TerserJSPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;terser-webpack-plugin&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> OptimizeCSSAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;optimize-css-assets-webpack-plugin&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>在webpack配置文件中添加配置节点</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
  minimizer<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">TerserJSPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">OptimizeCSSAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol><p>tips: webpack4默认采用的JS压缩插件为：<code>uglifyjs-webpack-plugin</code>，在<code>mini-css-extract-plugin</code>上一个版本中还推荐使用该插件，但最新的v0.6中建议使用<code>teser-webpack-plugin</code>来完成js代码压缩，具体原因未在官网说明，我们就按照最新版的官方文档来做即可</p><h2 id="js代码优化分离" tabindex="-1"><a class="header-anchor" href="#js代码优化分离" aria-hidden="true">#</a> js代码优化分离</h2><p>Code Splitting是webpack打包时用到的重要的优化特性之一，此特性能够把代码分离到不同的 bundle 中，然后可以按需加载或并行加载这些文件。代码分离可以用于获取更小的 bundle，以及控制资源加载优先级，如果使用合理，会极大影响加载时间。</p><p>有三种常用的代码分离方法：</p><ul><li><p>入口起点(entry points)：使用<code>entry</code>配置手动地分离代码。</p></li><li><p>防止重复(prevent duplication)：使用 <code>SplitChunksPlugin</code>去重和分离 chunk。</p></li><li><p>动态导入(dynamic imports)：通过模块的内联函数调用来分离代码。</p></li><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// vue: &quot;Vue&quot;,</span>
    <span class="token comment">// &quot;vue-router&quot;: &quot;VueRouter&quot;,</span>
    <span class="token comment">// vuex: &quot;Vuex&quot;,</span>
    <span class="token comment">// iview: &quot;iView&quot;,</span>
    <span class="token comment">// axios: &quot;axios&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
      
<span class="token number">1.</span>后再 index<span class="token punctuation">.</span>html 手动引入 所需
<span class="token number">2.</span>删掉<span class="token keyword">import</span> 引入
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>jb51<span class="token punctuation">.</span>net<span class="token operator">/</span>article<span class="token operator">/</span><span class="token number">164542.</span>htm

或
 externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&#39;vue&#39;</span><span class="token operator">:</span> <span class="token string">&#39;Vue&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;vue-router&#39;</span><span class="token operator">:</span> <span class="token string">&#39;VueRouter&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;vuex&#39;</span><span class="token operator">:</span> <span class="token string">&#39;Vuex&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;axios&#39;</span><span class="token operator">:</span> <span class="token string">&#39;axios&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  css<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  js<span class="token operator">:</span> <span class="token punctuation">[</span>
   <span class="token string">&quot;https://baidu.com&quot;</span>
  <span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></li></ul><h3 id="手动配置多入口" tabindex="-1"><a class="header-anchor" href="#手动配置多入口" aria-hidden="true">#</a> 手动配置多入口</h3><ol><li><p>在webpack配置文件中配置多个入口</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>entry<span class="token operator">:</span> <span class="token punctuation">{</span>
  main<span class="token operator">:</span> <span class="token string">&#39;./src/main.js&#39;</span><span class="token punctuation">,</span>
  other<span class="token operator">:</span> <span class="token string">&#39;./src/other.js&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
output<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// path.resolve() : 解析当前相对路径的绝对路径</span>
  <span class="token comment">// path: path.resolve(&#39;./dist/&#39;),</span>
  <span class="token comment">// path: path.resolve(__dirname, &#39;./dist/&#39;),</span>
  path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;..&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;./dist/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// filename: &#39;bundle.js&#39;,</span>
  filename<span class="token operator">:</span> <span class="token string">&#39;[name].bundle.js&#39;</span><span class="token punctuation">,</span>
  publicPath<span class="token operator">:</span> <span class="token string">&#39;/&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li><li><p>在main.js和other.js中都引入同一个模块，并使用其功能</p><p>main.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">&#39;jquery&#39;</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;div&gt;&lt;/div&gt;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">&#39;main&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span><span class="token string">&#39;body&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>other.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">&#39;jquery&#39;</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;div&gt;&lt;/div&gt;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">&#39;other&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span><span class="token string">&#39;body&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>修改package.json的脚本，添加一个使用dev配置文件进行打包的脚本（目的是不压缩代码检查打包的bundle时更方便）</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./build/webpack.prod.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dev-build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./build/webpack.dev.js&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>运行<code>npm run dev-build</code>，进行打包</p></li><li><p>查看打包后的结果，发现other.bundle.js和main.bundle.js都同时打包了jQuery源文件</p><p><img src="/image/webpack//main.bundle.js.png" alt="main"></p><p><img src="/image/webpack//other.bundle.js.png" alt="other"></p></li></ol><p>这种方法存在一些问题:</p><ul><li>如果入口 chunks 之间包含重复的模块，那些重复模块都会被引入到各个 bundle 中。</li><li>这种方法不够灵活，并且不能将核心应用程序逻辑进行动态拆分代码。</li></ul><h3 id="抽取公共代码" tabindex="-1"><a class="header-anchor" href="#抽取公共代码" aria-hidden="true">#</a> 抽取公共代码</h3><p>tips: Webpack v4以上使用的插件为<code>SplitChunksPlugin</code>，以前使用的<code>CommonsChunkPlugin</code>已经被移除了，最新版的webpack只需要在配置文件中的<code>optimization</code>节点下添加一个<code>splitChunks</code>属性即可进行相关配置</p><ol><li><p>修改webpack配置文件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      chunks<span class="token operator">:</span> <span class="token string">&#39;all&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>运行<code>npm run dev-build</code>重新打包</p></li><li><p>查看<code>dist</code>目录</p><p><img src="/image/webpack//1558771916946.png" alt="1558771916946"></p></li><li><p>查看<code>vendors~main~other.bundle.js</code>，其实就是把都用到的jQuery打包到了一个单独的js中</p><p><img src="/image/webpack//1558772012664.png" alt="1558772012664"></p></li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
      
        <span class="token comment">// 分割代码块</span>
       splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
        chunks<span class="token operator">:</span> &quot;<span class="token keyword">async</span>”<span class="token punctuation">,</span><span class="token comment">//默认作用于异步chunk，值为all/initial/async/function(chunk),值为function时第一个参数为遍历所有入口chunk时的chunk模块，chunk._modules为chunk所有依赖的模块，通过chunk的名字和所有依赖模块的resource可以自由配置,会抽取所有满足条件chunk的公有模块，以及模块的所有依赖模块，包括css</span>
        minSize<span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>  <span class="token comment">//表示在压缩前的最小模块大小,默认值是30kb</span>
        minChunks<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token comment">// 表示被引用次数，默认为1；</span>
         maxAsyncRequests<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>  <span class="token comment">//所有异步请求不得超过5个</span>
        maxInitialRequests<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>  <span class="token comment">//初始话并行请求不得超过3个</span>
        automaticNameDelimiter<span class="token operator">:</span><span class="token string">&#39;~&#39;</span><span class="token punctuation">,</span><span class="token comment">//名称分隔符，默认是~</span>
        name<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">//打包后的名称，默认是chunk的名字通过分隔符（默认是～）分隔</span>
        cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//设置缓存组用来抽取满足不同规则的chunk,下面以生成common为例</span>
         common<span class="token operator">:</span> <span class="token punctuation">{</span>
         name<span class="token operator">:</span> <span class="token string">&#39;common&#39;</span><span class="token punctuation">,</span>  <span class="token comment">//抽取的chunk的名字</span>
         <span class="token function">chunks</span><span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//同外层的参数配置，覆盖外层的chunks，以chunk为维度进行抽取</span>
         <span class="token punctuation">}</span><span class="token punctuation">,</span>
         <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> chunks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//可以为字符串，正则表达式，函数，以module为维度进行抽取，只要是满足条件的module都会被抽取到该common的chunk中，为函数时第一个参数是遍历到的每一个模块，第二个参数是每一个引用到该模块的chunks数组。自己尝试过程中发现不能提取出css，待进一步验证。</span>
         <span class="token punctuation">}</span><span class="token punctuation">,</span>
        priority<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>  <span class="token comment">//优先级，一个chunk很可能满足多个缓存组，会被抽取到优先级高的缓存组中</span>
       minChunks<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>  <span class="token comment">//最少被几个chunk引用</span>
       reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span>，<span class="token comment">//  如果该chunk中引用了已经被抽取的chunk，直接引用该chunk，不会重复打包代码</span>
       enforce<span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token comment">// 如果cacheGroup中没有设置minSize，则据此判断是否使用上层的minSize，true：则使用0，false：使用上层minSize</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="动态导入-懒加载" tabindex="-1"><a class="header-anchor" href="#动态导入-懒加载" aria-hidden="true">#</a> 动态导入 (懒加载)</h3><p>webpack4默认是允许import语法动态导入的，但是需要babel的插件支持，最新版babel的插件包为：<code>@babel/plugin-syntax-dynamic-import</code>，以前老版本不是<code>@babel</code>开头，已经无法使用，需要注意</p><p>动态导入最大的好处是实现了懒加载，用到哪个模块才会加载哪个模块，可以提高SPA应用程序的首屏加载速度，Vue、React、Angular框架的路由懒加载原理一样</p><ol><li><p>安装babel插件</p><p><code>npm install -D @babel/plugin-syntax-dynamic-import</code></p></li><li><p>修改.babelrc配置文件，添加<code>@babel/plugin-syntax-dynamic-import</code>插件</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;@babel/plugin-proposal-class-properties&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;@babel/plugin-syntax-dynamic-import&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li><li><p>将jQuery模块进行动态导入</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;jquery&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> $ <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;div&gt;&lt;/div&gt;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">&#39;main&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>给某个按钮添加点击事件，点击后调用getComponent函数创建元素并添加到页面</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;btn&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      item<span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span><span class="token string">&#39;body&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ol><h3 id="splitchunksplugin配置参数" tabindex="-1"><a class="header-anchor" href="#splitchunksplugin配置参数" aria-hidden="true">#</a> SplitChunksPlugin配置参数</h3><p>webpack4之后，使用<code>SplitChunksPlugin</code>插件替代了以前<code>CommonsChunkPlugin</code></p><p>而<code>SplitChunksPlugin</code>的配置，只需要在webpack配置文件中的<code>optimization</code>节点下的<code>splitChunks</code>进行修改即可，如果没有任何修改，则会使用默认配置</p><p>默认的<code>SplitChunksPlugin</code> 配置适用于绝大多数用户</p><p>webpack 会基于如下默认原则自动分割代码：</p><ul><li>公用代码块或来自 <em>node_modules</em> 文件夹的组件模块。</li><li>打包的代码块大小超过 30k（最小化压缩之前）。</li><li>按需加载代码块时，同时发送的请求最大数量不应该超过 5。</li><li>页面初始化时，同时发送的请求最大数量不应该超过 3。</li></ul><p>以下是<code>SplitChunksPlugin</code>的默认配置：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      chunks<span class="token operator">:</span> <span class="token string">&#39;async&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 只对异步加载的模块进行拆分，可选值还有all | initial</span>
      minSize<span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span> <span class="token comment">// 模块最少大于30KB才拆分</span>
      maxSize<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token comment">// 模块大小无上限，只要大于30KB都拆分</span>
      minChunks<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 模块最少引用一次才会被拆分</span>
      maxAsyncRequests<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">// 异步加载时同时发送的请求数量最大不能超过5,超过5的部分不拆分</span>
      maxInitialRequests<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// 页面初始化时同时发送的请求数量最大不能超过3,超过3的部分不拆分</span>
      automaticNameDelimiter<span class="token operator">:</span> <span class="token string">&#39;~&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 默认的连接符</span>
      name<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 拆分的chunk名,设为true表示根据模块名和CacheGroup的key来自动生成,使用上面连接符连接</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 缓存组配置,上面配置读取完成后进行拆分,如果需要把多个模块拆分到一个文件,就需要缓存,所以命名为缓存组</span>
        vendors<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 自定义缓存组名</span>
          test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 检查node_modules目录,只要模块在该目录下就使用上面配置拆分到这个组</span>
          priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span> <span class="token comment">// 权重-10,决定了哪个组优先匹配,例如node_modules下有个模块要拆分,同时满足vendors和default组,此时就会分到vendors组,因为-10 &gt; -20</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 默认缓存组名</span>
          minChunks<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 最少引用两次才会被拆分</span>
          priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token comment">// 权重-20</span>
          reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 如果主入口中引入了两个模块,其中一个正好也引用了后一个,就会直接复用,无需引用两次</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="prefetching和preloading" tabindex="-1"><a class="header-anchor" href="#prefetching和preloading" aria-hidden="true">#</a> prefetching和preloading</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>prefetching<span class="token operator">:</span>当核心 代码加载完毕，偷偷的去加载 这些暂时还没用到的 模块<span class="token punctuation">;</span>
preloading<span class="token operator">:</span>核心模块 一起加载<span class="token punctuation">;</span>


<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPrefetch: true */</span><span class="token string">&#39;axios&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;懒加载 axios&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="减少打包时间" tabindex="-1"><a class="header-anchor" href="#减少打包时间" aria-hidden="true">#</a> 减少打包时间</h3><h4 id="noparse" tabindex="-1"><a class="header-anchor" href="#noparse" aria-hidden="true">#</a> noParse</h4><p>在引入一些第三方模块时，例如jQuery、bootstrap等，我们知道其内部肯定不会依赖其他模块，因为最终我们用到的只是一个单独的js文件或css文件</p><p>所以此时如果webpack再去解析他们的内部依赖关系，其实是非常浪费时间的，我们需要阻止webpack浪费精力去解析这些明知道没有依赖的库</p><p>可以在webpack配置文件的<code>module</code>节点下加上<code>noParse</code>，并配置正则来确定不需要解析依赖关系的模块</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
	noParse<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">jquery|bootstrap</span><span class="token regex-delimiter">/</span></span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="ignoreplugin" tabindex="-1"><a class="header-anchor" href="#ignoreplugin" aria-hidden="true">#</a> IgnorePlugin</h2><p>在引入一些第三方模块时，例如moment，内部会做i18n国际化处理，所以会包含很多语言包，而语言包打包时会比较占用空间，如果我们项目只需要用到中文，或者少数语言，可以忽略掉所有的语言包，然后按需引入语言包</p><p>从而使得构建效率更高，打包生成的文件更小</p><p>需要忽略第三方模块内部依赖的其他模块，只需要三步：</p><ol><li>首先要找到moment依赖的语言包是什么</li><li>使用IgnorePlugin插件忽略其依赖</li><li>需要使用某些依赖时自行手动引入</li></ol><p>具体实现如下：</p><ol><li><p>通过查看moment的源码来分析：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">loadLocale</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> oldLocale <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token comment">// TODO: Find a better way to register and load all the locales in Node</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>locales<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> module <span class="token operator">!==</span> <span class="token string">&#39;undefined&#39;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
        module <span class="token operator">&amp;&amp;</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            oldLocale <span class="token operator">=</span> globalLocale<span class="token punctuation">.</span>_abbr<span class="token punctuation">;</span>
            <span class="token keyword">var</span> aliasedRequire <span class="token operator">=</span> require<span class="token punctuation">;</span>
            <span class="token function">aliasedRequire</span><span class="token punctuation">(</span><span class="token string">&#39;./locale/&#39;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">getSetGlobalLocale</span><span class="token punctuation">(</span>oldLocale<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> locales<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>观察上方代码，同时查看moment目录下确实有locale目录，其中放着所有国家的语言包，可以分析得出：locale目录就是moment所依赖的语言包目录</p></li><li><p>使用IgnorePlugin插件来忽略掉moment模块的locale目录</p><p>在webpack配置文件中安装插件，并传入配置项</p><p>参数1：表示要忽略的资源路径</p><p>参数2：要忽略的资源上下文（所在哪个目录）</p><p>两个参数都是正则对象</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>IgnorePlugin</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.\/locale</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">moment</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>使用moment时需要手动引入语言包，否则默认使用英文</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> moment <span class="token keyword">from</span> <span class="token string">&#39;moment&#39;</span>
<span class="token keyword">import</span> <span class="token string">&#39;moment/locale/zh-cn&#39;</span>
moment<span class="token punctuation">.</span><span class="token function">locale</span><span class="token punctuation">(</span><span class="token string">&#39;zh-CN&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">&#39;days&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">calendar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol><h1 id="babel" tabindex="-1"><a class="header-anchor" href="#babel" aria-hidden="true">#</a> babel</h1><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>babel 总共分为三个阶段：解析，转换，生成。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">// .babelrc 文件</span>
<span class="token punctuation">{</span> 
    <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;transform-es2015-template-literals&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 转译模版字符串的 plugins</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span><span class="token string">&quot;env&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token comment">// 是否自动引入 polyfill，开启此选项必须保证已经安装了 babel-polyfill</span>
            <span class="token comment">// “usage” | “entry” | false, defaults to false.</span>
            <span class="token property">&quot;useBuiltIns&quot;</span><span class="token operator">:</span> <span class="token string">&quot;usage&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;stage-2&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

---
先执行 plugins 的配置项<span class="token punctuation">,</span>再执行 Preset 的配置项；
plugins 配置项，按照声明顺序执行；
Preset 配置项，按照声明逆序执行。

列入以下代码的执行顺序为：

transform-es2015-template-literals
stage<span class="token number">-2</span>
env

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="usebuiltins" tabindex="-1"><a class="header-anchor" href="#usebuiltins" aria-hidden="true">#</a> useBuiltIns</h2><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>我们可能在全局引入 babel-polyfill，这样打包后的整个文件体积必然是会变大的。

useBuiltIns 参数说明：

<span class="token boolean">false</span><span class="token operator">:</span> 不对 polyfills 做任何操作
entry<span class="token operator">:</span> 根据 target 中浏览器版本的支持，将 polyfills 拆分引入，仅引入有浏览器不支持的 polyfill
usage(新)：检测代码中 ES6/<span class="token number">7</span>/<span class="token number">8</span> 等的使用情况，仅仅加载代码中用到的 polyfills


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="babel-core-核心" tabindex="-1"><a class="header-anchor" href="#babel-core-核心" aria-hidden="true">#</a> babel-core（核心）</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>这个模块是最能顾名思义的了，即 babel 的核心模块。babel 的核心 api 都在这个模块中。也就是这个模块会把我们写的 js 代码抽象成 AST 树；然后再将 plugins 转译好的内容解析为 js 代码。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="babel-polyfill" tabindex="-1"><a class="header-anchor" href="#babel-polyfill" aria-hidden="true">#</a> babel-polyfill</h2><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>babel 对一些新的 API 是无法转换，比如 Generator、Set、Proxy、Promise 等全局对象，以及新增的一些方法：includes、Array.form 等。所以这个时候就需要一些工具来为浏览器做这个兼容
官网的定义：babel-polyfill 是为了模拟一个完整的 ES6+ 环境，旨在用于应用程序而不是库/工具。

使用 babel-polyfill 会导致打出来的包非常大，很多其实没有用到，对资源来说是一种浪费。
babel-polyfill 可能会污染全局变量，给很多类的原型链上都作了修改，这就有不可控的因素存在。

因为上面两个问题，所以在 Babel7 中增加了 babel-preset-env，我们设置 <span class="token property">&quot;useBuiltIns&quot;</span><span class="token operator">:</span> <span class="token string">&quot;usage&quot;</span> 这个参数值就可以实现按需加载 babel-polyfill 啦。

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;env&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;transform-runtime&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;helpers&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// defaults to true</span>
      <span class="token string">&quot;polyfill&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// defaults to true</span>
      <span class="token string">&quot;regenerator&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// defaults to true</span>
      <span class="token string">&quot;moduleName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;babel-runtime&quot;</span> <span class="token comment">// defaults to &quot;babel-runtime&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="三种方案对比" tabindex="-1"><a class="header-anchor" href="#三种方案对比" aria-hidden="true">#</a> 三种方案对比</h2><table><thead><tr><th style="text-align:center;">方案</th><th style="text-align:center;">优点</th><th style="text-align:center;">缺点</th></tr></thead><tbody><tr><td style="text-align:center;">@babel/runtime &amp; @babel/plugin-transform-runtime</td><td style="text-align:center;">按需引入, 打包体积小</td><td style="text-align:center;">不能兼容实例方法</td></tr><tr><td style="text-align:center;">@babel/polyfill</td><td style="text-align:center;">完整模拟 ES2015+ 环境</td><td style="text-align:center;">打包体积过大, 污染全局对象和内置的对象原型</td></tr><tr><td style="text-align:center;">@babel/preset-env</td><td style="text-align:center;">按需引入, 可配置性高</td><td style="text-align:center;"></td></tr></tbody></table><p>配置案例</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//.babelrc</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-transform-arrow-functions&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// 设置 箭头函数转换</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="babel-preset-env" tabindex="-1"><a class="header-anchor" href="#babel-preset-env" aria-hidden="true">#</a> @babel/preset-env</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>@babel<span class="token operator">/</span>preset<span class="token operator">-</span>env 主要作用是对我们所使用的并且目标浏览器中缺失的功能进行代码转换和加载 polyfill，在不进行任何配置的情况下，@babel<span class="token operator">/</span>preset<span class="token operator">-</span>env 所包含的插件将支持所有最新的<span class="token constant">JS</span><span class="token function">特性</span><span class="token punctuation">(</span><span class="token constant">ES2015</span><span class="token punctuation">,</span><span class="token constant">ES2016</span>等，不包含 stage 阶段<span class="token punctuation">)</span>，将其转换成<span class="token constant">ES5</span><span class="token function">代码。例如，如果你的代码中使用了可选链</span><span class="token punctuation">(</span>目前，仍在 stage 阶段<span class="token punctuation">)</span>，那么只配置 @babel<span class="token operator">/</span>preset<span class="token operator">-</span>env，转换时会抛出错误，需要另外安装相应的插件。

<span class="token comment">//.babelrc</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>需要说明的是，<code>@babel/preset-env</code> 会根据你配置的目标环境，生成插件列表来编译。对于基于浏览器或 <code>Electron</code> 的项目，官方推荐使用 <code>.browserslistrc</code> 文件来指定目标环境。默认情况下，如果你没有在 <code>Babel</code> 配置文件中(如 .babelrc)设置 <code>targets</code> 或 <code>ignoreBrowserslistConfig</code>，<code>@babel/preset-env</code> 会使用 <code>browserslist</code> 配置源。</p><p>如果你不是要兼容所有的浏览器和环境，推荐你指定目标环境，这样你的编译代码能够保持最小。</p><p>例如，仅包括浏览器市场份额超过0.25％的用户所需的 <code>polyfill</code> 和代码转换（忽略没有安全更新的浏览器，如 IE10 和 BlackBerry）:</p><h2 id="babel-runtime" tabindex="-1"><a class="header-anchor" href="#babel-runtime" aria-hidden="true">#</a> @babel/runtime</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>@babel/runtime 提出来公共的包
@babel/plugin-transform-runtime 所以我们需要这个包来自动引用公共函数

安装:npm i --S @babel/runtime @babel/plugin-transform-runtime
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>js
<span class="token punctuation">{</span>
	<span class="token string">&quot;presets&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token string">&quot;babel/plugin-transform-runtime&quot;</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h1 id="babel参考配置" tabindex="-1"><a class="header-anchor" href="#babel参考配置" aria-hidden="true">#</a> babel参考配置</h1><h3 id="babel-cli命令行编译" tabindex="-1"><a class="header-anchor" href="#babel-cli命令行编译" aria-hidden="true">#</a> babel/cli命令行编译</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev @babel<span class="token operator">/</span>core @babel<span class="token operator">/</span>cli  <span class="token comment">// 自己安装测试时用的</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npx babel index<span class="token punctuation">.</span>js <span class="token operator">--</span>out<span class="token operator">-</span>file out<span class="token punctuation">.</span>js     
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="babel-plugin" tabindex="-1"><a class="header-anchor" href="#babel-plugin" aria-hidden="true">#</a> @babel/plugin</h3><p>​ 插件方式转换</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>安装<span class="token operator">:</span>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev @babel<span class="token operator">/</span>plugin<span class="token operator">-</span>transform<span class="token operator">-</span>arrow<span class="token operator">-</span>functions
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>配置<span class="token operator">:</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">api</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    api<span class="token punctuation">.</span><span class="token function">cache</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 转换箭头函数 插件</span>
    <span class="token keyword">const</span> plugins <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">&quot;@babel/plugin-transform-arrow-functions&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        plugins
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>转换结果:</strong> 只对箭头函数进行转换.</p><p><img src="E:\Wall-E\笔记\-notes-\11、webpack\image-20200714155123916.png" alt="image-20200714155123916"></p><h3 id="babel-presets-插件集合" tabindex="-1"><a class="header-anchor" href="#babel-presets-插件集合" aria-hidden="true">#</a> @babel/presets 插件集合</h3><p>​ 解决babel/plugin 多个插件书写麻烦;</p><p>​ @babel/presets 只对syntax进行转换;</p><p><strong>转换类型分类:</strong></p><ol><li>syntax :如箭头函数,let, const, class等; (使用@babel/presets 转换)</li><li>api: 可以通过函数 重新覆盖的语法 如:includes,map等;(使用@babel/polyfill)</li></ol><p><strong>常见组合:</strong></p><p><a href="https://babel.docschina.org/docs/en/babel-preset-env" target="_blank" rel="noopener noreferrer">@babel/preset-env<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p><a href="https://babel.docschina.org/docs/en/babel-preset-flow" target="_blank" rel="noopener noreferrer">@babel/preset-flow<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p><a href="https://babel.docschina.org/docs/en/babel-preset-react" target="_blank" rel="noopener noreferrer">@babel/preset-react<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p><a href="https://babel.docschina.org/docs/en/babel-preset-typescript" target="_blank" rel="noopener noreferrer">@babel/preset-typescript<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>安装<span class="token operator">:</span>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev @babel<span class="token operator">/</span>preset<span class="token operator">-</span>env
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">api</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  api<span class="token punctuation">.</span><span class="token function">cache</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> presets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    presets
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>**转换结果:**箭头,class,let被编译;</p><p><img src="E:\Wall-E\笔记\-notes-\11、webpack\image-20200714155408077.png" alt="image-20200714155408077"></p><h3 id="babel-polyfill-1" tabindex="-1"><a class="header-anchor" href="#babel-polyfill-1" aria-hidden="true">#</a> @babel/polyfill</h3><p>​ 已经取消;通过配置corejs版本.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>安装<span class="token operator">:</span>npm i <span class="token operator">--</span>save core<span class="token operator">-</span>js@<span class="token number">3</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>modules</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&quot;amd&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;umd&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;systemjs&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;commonjs&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;cjs&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;auto&quot;</span> <span class="token operator">|</span> <span class="token boolean">false</span>，默认值是 auto。

<span class="token boolean">false</span><span class="token operator">:</span>不会对文件的模块语法进行转化

使用 webpack 中的一些新特性，比如 tree shaking 和 sideEffects，就需要设置为 <span class="token boolean">false</span>，


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>useBuiltIns</strong></p><ul><li>false:需要在 js 代码第一行主动 import &#39;@babel/polyfill&#39;，会将@babel/polyfill 整个包全部导入。</li><li>entry:需要在 js 代码第一行主动 import &#39;@babel/polyfill&#39;，会将 browserslist 环境不支持的所有垫片都导入。</li><li>usage:项目里不用主动 import，会自动将代码里已使用到的、且 browserslist 环境不支持的垫片导入。</li></ul><p><strong>targets</strong>:用来配置需要支持的的环境，不仅支持浏览器，还支持 node。</p><p><strong>loose</strong>:默认值是 false，如果 preset-env 中包含的 plugin 支持 loose 的设置，那么可以通过这个字段来做统一的设置。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">api</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  api<span class="token punctuation">.</span><span class="token function">cache</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> presets <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        useBuiltIns<span class="token operator">:</span> <span class="token string">&#39;usage&#39;</span><span class="token punctuation">,</span>
        modules<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
        corejs<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//需要corejs配置版本</span>
          version<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
          proposals<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        targets<span class="token operator">:</span> <span class="token punctuation">{</span>
          browsers<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&#39;&gt; 1%&#39;</span><span class="token punctuation">,</span>
            <span class="token string">&#39;last 2 versions&#39;</span><span class="token punctuation">,</span>
            <span class="token string">&#39;not ie &lt;= 8&#39;</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    presets
    <span class="token comment">// plugins</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p><strong>转换结果:</strong></p><ol><li><p>引入了很多转换所需模块,且每个文件都有引入;</p></li><li><p>会污染全局命名空间，当你写的是公共库时，可能会与使用者本地的方法产生冲突。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>解决<span class="token operator">:</span>@babel<span class="token operator">/</span>runtime和@babel<span class="token operator">/</span>plugin<span class="token operator">-</span>transform<span class="token operator">-</span>runtime
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ol><p><img src="E:\Wall-E\笔记\-notes-\11、webpack\image-20200714164504159.png" alt="image-20200714164504159"></p><h3 id="babel-plugin-transform-runtime" tabindex="-1"><a class="header-anchor" href="#babel-plugin-transform-runtime" aria-hidden="true">#</a> @babel/plugin-transform-runtime</h3><p>作用:</p><ol><li>自动引用公共函数,防止多个文件多次重复引用.</li><li>创建一个沙盒环境,避免全局污染</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm install --save-dev @babel/plugin-transform-runtime
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>默认选项:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;absoluteRuntime&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;corejs&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;helpers&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;regenerator&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 使用不污染全局</span>
        <span class="token property">&quot;useESModules&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7.0.0-beta.0&quot;</span> <span class="token comment">//版本号</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>配置:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">api</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  api<span class="token punctuation">.</span><span class="token function">cache</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> presets <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        useBuiltIns<span class="token operator">:</span> <span class="token string">&#39;usage&#39;</span><span class="token punctuation">,</span>
        corejs<span class="token operator">:</span> <span class="token punctuation">{</span>
          version<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
          proposals<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        targets<span class="token operator">:</span> <span class="token punctuation">{</span>
          browsers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;&gt; 1%&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;last 2 versions&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;not ie&lt;= 8&#39;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> plugins <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">[</span>
          <span class="token string">&#39;@babel/plugin-transform-runtime&#39;</span><span class="token punctuation">,</span> 
          <span class="token punctuation">{</span> corejs<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span>
          <span class="token comment">// </span>
      <span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    presets<span class="token punctuation">,</span>
    plugins
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p><img src="E:\Wall-E\笔记\-notes-\11、webpack\image-20200714170616917.png" alt="image-20200714170616917"></p><h3 id="babel-runtime-1" tabindex="-1"><a class="header-anchor" href="#babel-runtime-1" aria-hidden="true">#</a> @babel/runtime</h3><p>提出来公共的包</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>根据corejs选项选定<span class="token operator">:</span>
npm install <span class="token operator">--</span>save @babel<span class="token operator">/</span>runtime			<span class="token comment">// corejs: false</span>
npm install <span class="token operator">--</span>save @babel<span class="token operator">/</span>runtime<span class="token operator">-</span>corejs2	<span class="token comment">// corejs: 2</span>
npm install <span class="token operator">--</span>save @babel<span class="token operator">/</span>runtime<span class="token operator">-</span>corejs3 	<span class="token comment">// corejs: 3</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">api</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  api<span class="token punctuation">.</span><span class="token function">cache</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> presets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> plugins <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">[</span>
          <span class="token string">&#39;@babel/plugin-transform-runtime&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 防止全局污染</span>
          <span class="token punctuation">{</span> 
            corejs<span class="token operator">:</span> <span class="token boolean">false</span> 
		<span class="token comment">//	corejs: 2</span>
		<span class="token comment">//	corejs: 3</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    presets<span class="token punctuation">,</span>
    plugins
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>最终配置:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">api</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  api<span class="token punctuation">.</span><span class="token function">cache</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> presets <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        useBuiltIns<span class="token operator">:</span> <span class="token string">&#39;usage&#39;</span><span class="token punctuation">,</span> <span class="token comment">//按需导入</span>
        corejs<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 指定版本3</span>
          version<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
          proposals<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        targets<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 浏览器适配范围</span>
          browsers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;&gt; 1%&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;last 2 versions&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;not ie&lt;= 8&#39;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> plugins <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">[</span>
          <span class="token string">&#39;@babel/plugin-transform-runtime&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 防止全局污染</span>
          <span class="token punctuation">{</span> corejs<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    presets<span class="token punctuation">,</span>
    plugins
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>segmentfault<span class="token punctuation">.</span>com<span class="token operator">/</span>a<span class="token operator">/</span><span class="token number">1190000019718925</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="browserslist-配置" tabindex="-1"><a class="header-anchor" href="#browserslist-配置" aria-hidden="true">#</a> Browserslist 配置</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>//.browserslistrc
&gt; 0.25%
not dead


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>https://github.com/browserslist/browserslist</p><h1 id="打包分析" tabindex="-1"><a class="header-anchor" href="#打包分析" aria-hidden="true">#</a> 打包分析</h1><p>项目构建完成后，需要通过一些工具对打包后的bundle进行分析，通过分析才能总结出一些经验，官方推荐的分析方法有两步完成：</p><ol><li><p>使用<code>--profile --json</code>参数，以json格式来输出打包后的结果到某个指定文件中</p><p><code>webpack --profile --json &gt; stats.json</code></p></li><li><p>将stats.json文件放入工具中进行分析</p><p>官方工具：<a href="https://github.com/webpack/analyse" target="_blank" rel="noopener noreferrer">official analyze tool<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p>官方推荐的其他四个工具：</p><ul><li><a href="https://alexkuz.github.io/webpack-chart/" target="_blank" rel="noopener noreferrer">webpack-chart<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li><a href="https://chrisbateman.github.io/webpack-visualizer/" target="_blank" rel="noopener noreferrer">webpack-visualizer<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li><a href="https://github.com/webpack-contrib/webpack-bundle-analyzer" target="_blank" rel="noopener noreferrer">webpack-bundle-analyzer<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> 推荐</li><li><a href="https://webpack.jakoblind.no/optimize" target="_blank" rel="noopener noreferrer">webpack bundle optimize helper<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li></ul><p>其中webpack-bundle-analyzer是一个插件，可以以插件的方式安装到项目中</p></li></ol><p><strong>webpack-bundle-analyzer</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev webpack<span class="token operator">-</span>bundle<span class="token operator">-</span>analyzer

<span class="token keyword">const</span> BundleAnalyzerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-bundle-analyzer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>BundleAnalyzerPlugin<span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

运行打包后访问：<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>：<span class="token number">8888</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h1 id="覆盖率prefetching和preloading" tabindex="-1"><a class="header-anchor" href="#覆盖率prefetching和preloading" aria-hidden="true">#</a> 覆盖率Prefetching和Preloading</h1><p>在优化访问性能时，除了充分利用浏览器缓存之外，还需要涉及一个性能指标：coverage rate（覆盖率）</p><p>可以在Chrome浏览器的控制台中按：ctrl + shift + p，查找coverage，打开覆盖率面板</p><p>开始录制后刷新网页，即可看到每个js文件的覆盖率，以及总的覆盖率</p><p><img src="/image/webpack//1559811338075.png" alt="1559811338075"></p><p>想提高覆盖率，需要尽可能多的使用动态导入，也就是懒加载功能，将一切能使用懒加载的地方都是用懒加载，这样可以大大提高覆盖率</p><p>但有时候使用懒加载会影响用户体验，所以可以在懒加载时使用魔法注释：Prefetching，是指在首页资源加载完毕后，空闲时间时，将动态导入的资源加载进来，这样即可以提高首屏加载速度，也可以解决懒加载可能会影响用户体验的问题，一举两得！</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPrefetch: true */</span> <span class="token string">&#39;jquery&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> $ <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;div&gt;&lt;/div&gt;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">&#39;我是main&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>常用插件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>DefinePlugin
把变量变成 js可用
<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token constant">PRODUCTION</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token constant">VERSION</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">&#39;5fa3b9&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token constant">BROWSER_SUPPORTS_HTML5</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">&#39;typeof window&#39;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">&#39;process.env&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
         <span class="token constant">NODE_ENV</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h1 id="webpack懒加载" tabindex="-1"><a class="header-anchor" href="#webpack懒加载" aria-hidden="true">#</a> webpack懒加载</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;lodash&quot; */</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;lodash&quot; */</span> <span class="token string">&#39;lodash2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
同名模块lodash会打包成一个包
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h1 id="hash区别" tabindex="-1"><a class="header-anchor" href="#hash区别" aria-hidden="true">#</a> hash区别</h1><ul><li><strong>hash</strong></li></ul><p><code>hash</code> 和每次 <code>build</code>有关，没有任何改变的情况下，每次编译出来的 <code>hash</code>都是一样的，但当你改变了任何一点东西，它的<code>hash</code>就会发生改变。</p><p>简单理解，你改了任何东西，<code>hash</code> 就会和上次不一样了。</p><ul><li><strong>chunkhash</strong></li></ul><p><code>chunkhash</code>是根据具体每一个模块文件自己的的内容包括它的依赖计算所得的<code>hash</code>，所以某个文件的改动只会影响它本身的<code>hash</code>，不会影响其它文件。</p><ul><li><strong>contenthash</strong></li></ul><p>它的出现主要是为了解决，让<code>css</code>文件不受<code>js</code>文件的影响。比如<code>foo.css</code>被<code>foo.js</code>引用了，所以它们共用相同的<code>chunkhash</code>值。但这样子是有问题的，如果<code>foo.js</code>修改了代码，<code>css</code>文件就算内容没有任何改变，由于是该模块的 <code>hash</code> 发生了改变，其<code>css</code>文件的<code>hash</code>也会随之改变。</p><p>这个时候我们就可以使用<code>contenthash</code>了，保证即使<code>css</code>文件所处的模块里有任何内容的改变，只要 css 文件内容不变，那么它的<code>hash</code>就不会发生变化。</p><h1 id="dev-serve-打包时间-分析" tabindex="-1"><a class="header-anchor" href="#dev-serve-打包时间-分析" aria-hidden="true">#</a> dev-serve 打包时间 分析</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev speed<span class="token operator">-</span>measure<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">最后更新时间: </span><span class="meta-item-info">2/27/2022, 7:49:47 PM</span></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/jiji/assets/js/runtime~app.685934de.js" defer></script><script src="/jiji/assets/js/1812.a606ff3d.js" defer></script><script src="/jiji/assets/js/app.c5b474e9.js" defer></script>
  </body>
</html>
