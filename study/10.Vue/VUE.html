<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link type="text/css" rel="stylesheet" href="/jiji/css/sidebar.css"><script type="text/javascript" src="/jiji/js/side.js"></script><title>VUE | Walle 记记</title><meta name="description" content="walle ">
    <link rel="preload" href="/jiji/assets/js/runtime~app.127e7072.js" as="script"><link rel="preload" href="/jiji/assets/css/styles.9f8e0fc9.css" as="style"><link rel="preload" href="/jiji/assets/js/812.314801ab.js" as="script"><link rel="preload" href="/jiji/assets/js/app.e4505b8a.js" as="script">
    <link rel="stylesheet" href="/jiji/assets/css/styles.9f8e0fc9.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/jiji/" class=""><!----><span class="site-name">Walle 记记</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/jiji/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="学习记"><span class="title">学习记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="学习记"><span class="title">学习记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/study/1.html/html.md" class="nav-link" aria-label="1.html"><!--[--><!--]--> 1.html <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/3.JS/javascript.md" class="nav-link" aria-label="3.JS"><!--[--><!--]--> 3.JS <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/4.ES6/ES6.md" class="nav-link" aria-label="4.ES6"><!--[--><!--]--> 4.ES6 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/5.JQuery/JQuery.md" class="nav-link" aria-label="5.JQuery"><!--[--><!--]--> 5.JQuery <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/7.Git/git.md" class="nav-link" aria-label="7.Git"><!--[--><!--]--> 7.Git <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/8.Canvas/canvas.md" class="nav-link" aria-label="8.Canvas"><!--[--><!--]--> 8.Canvas <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/9.Node/Nodejs.md" class="nav-link" aria-label="9.Node"><!--[--><!--]--> 9.Node <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/9.Node/Nodejs.md" class="nav-link" aria-label="Nodejs"><!--[--><!--]--> Nodejs <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/9.Node/koa.md" class="nav-link" aria-label="koa"><!--[--><!--]--> koa <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/10.Vue/VUE.md" class="nav-link" aria-label="10.Vue"><!--[--><!--]--> 10.Vue <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE.md" class="nav-link" aria-label="VUE"><!--[--><!--]--> VUE <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE3.md" class="nav-link" aria-label="VUE3"><!--[--><!--]--> VUE3 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/nuxt.md" class="nav-link" aria-label="nuxt"><!--[--><!--]--> nuxt <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/12.Webpack/webpack.md" class="nav-link" aria-label="12.Webpack"><!--[--><!--]--> 12.Webpack <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/13.TypeScript/Typescript.md" class="nav-link" aria-label="13.TypeScript"><!--[--><!--]--> 13.TypeScript <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/14.设计模式/设计模式.md" class="nav-link" aria-label="14.设计模式"><!--[--><!--]--> 14.设计模式 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/15.移动端/移动端.md" class="nav-link" aria-label="15.移动端"><!--[--><!--]--> 15.移动端 <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/16.前端性能/前端优化.md" class="nav-link" aria-label="16.前端性能"><!--[--><!--]--> 16.前端性能 <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/16.前端性能/前端优化.md" class="nav-link" aria-label="前端优化"><!--[--><!--]--> 前端优化 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/16.前端性能/性能指标.md" class="nav-link" aria-label="性能指标"><!--[--><!--]--> 性能指标 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/17.ESLint/eslint.md" class="nav-link" aria-label="17.ESLint"><!--[--><!--]--> 17.ESLint <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/18.Jest/jest.md" class="nav-link" aria-label="18.Jest"><!--[--><!--]--> 18.Jest <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/19.Flutter" class="nav-link" aria-label="19.Flutter"><!--[--><!--]--> 19.Flutter <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/App常见交互方式.md" class="nav-link" aria-label="App常见交互方式"><!--[--><!--]--> App常见交互方式 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/Dart-flutter.md" class="nav-link" aria-label="Dart-flutter"><!--[--><!--]--> Dart-flutter <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/Getx.md" class="nav-link" aria-label="Getx"><!--[--><!--]--> Getx <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_tools.md" class="nav-link" aria-label="flutter_tools"><!--[--><!--]--> flutter_tools <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_ui.md" class="nav-link" aria-label="flutter_ui"><!--[--><!--]--> flutter_ui <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_util.md" class="nav-link" aria-label="flutter_util"><!--[--><!--]--> flutter_util <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/20.Android/android.md" class="nav-link" aria-label="20.Android"><!--[--><!--]--> 20.Android <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/22.算法/算法.md" class="nav-link" aria-label="22.算法"><!--[--><!--]--> 22.算法 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="项目记"><span class="title">项目记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="项目记"><span class="title">项目记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/project/webpack5多项目构建.md" class="nav-link" aria-label="webpack5多项目构建"><!--[--><!--]--> webpack5多项目构建 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a href="/jiji/book" class="nav-link" aria-label="读书记"><!--[--><!--]--> 读书记 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="资源记"><span class="title">资源记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="资源记"><span class="title">资源记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/resources/flutter资源.md" class="nav-link" aria-label="flutter资源"><!--[--><!--]--> flutter资源 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/resources/serverless.md" class="nav-link" aria-label="serverless"><!--[--><!--]--> serverless <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/resources/ui框架.md" class="nav-link" aria-label="ui框架"><!--[--><!--]--> ui框架 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/resources/前端资源.md" class="nav-link" aria-label="前端资源"><!--[--><!--]--> 前端资源 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a href="/jiji/money" class="nav-link" aria-label="另辟蹊径记"><!--[--><!--]--> 另辟蹊径记 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/WALL-E-WEB" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/jiji/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="学习记"><span class="title">学习记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="学习记"><span class="title">学习记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/study/1.html/html.md" class="nav-link" aria-label="1.html"><!--[--><!--]--> 1.html <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/3.JS/javascript.md" class="nav-link" aria-label="3.JS"><!--[--><!--]--> 3.JS <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/4.ES6/ES6.md" class="nav-link" aria-label="4.ES6"><!--[--><!--]--> 4.ES6 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/5.JQuery/JQuery.md" class="nav-link" aria-label="5.JQuery"><!--[--><!--]--> 5.JQuery <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/7.Git/git.md" class="nav-link" aria-label="7.Git"><!--[--><!--]--> 7.Git <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/8.Canvas/canvas.md" class="nav-link" aria-label="8.Canvas"><!--[--><!--]--> 8.Canvas <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/9.Node/Nodejs.md" class="nav-link" aria-label="9.Node"><!--[--><!--]--> 9.Node <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/9.Node/Nodejs.md" class="nav-link" aria-label="Nodejs"><!--[--><!--]--> Nodejs <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/9.Node/koa.md" class="nav-link" aria-label="koa"><!--[--><!--]--> koa <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/10.Vue/VUE.md" class="nav-link" aria-label="10.Vue"><!--[--><!--]--> 10.Vue <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE.md" class="nav-link" aria-label="VUE"><!--[--><!--]--> VUE <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE3.md" class="nav-link" aria-label="VUE3"><!--[--><!--]--> VUE3 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/nuxt.md" class="nav-link" aria-label="nuxt"><!--[--><!--]--> nuxt <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/12.Webpack/webpack.md" class="nav-link" aria-label="12.Webpack"><!--[--><!--]--> 12.Webpack <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/13.TypeScript/Typescript.md" class="nav-link" aria-label="13.TypeScript"><!--[--><!--]--> 13.TypeScript <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/14.设计模式/设计模式.md" class="nav-link" aria-label="14.设计模式"><!--[--><!--]--> 14.设计模式 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/15.移动端/移动端.md" class="nav-link" aria-label="15.移动端"><!--[--><!--]--> 15.移动端 <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/16.前端性能/前端优化.md" class="nav-link" aria-label="16.前端性能"><!--[--><!--]--> 16.前端性能 <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/16.前端性能/前端优化.md" class="nav-link" aria-label="前端优化"><!--[--><!--]--> 前端优化 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/16.前端性能/性能指标.md" class="nav-link" aria-label="性能指标"><!--[--><!--]--> 性能指标 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/17.ESLint/eslint.md" class="nav-link" aria-label="17.ESLint"><!--[--><!--]--> 17.ESLint <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/18.Jest/jest.md" class="nav-link" aria-label="18.Jest"><!--[--><!--]--> 18.Jest <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/19.Flutter" class="nav-link" aria-label="19.Flutter"><!--[--><!--]--> 19.Flutter <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/App常见交互方式.md" class="nav-link" aria-label="App常见交互方式"><!--[--><!--]--> App常见交互方式 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/Dart-flutter.md" class="nav-link" aria-label="Dart-flutter"><!--[--><!--]--> Dart-flutter <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/Getx.md" class="nav-link" aria-label="Getx"><!--[--><!--]--> Getx <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_tools.md" class="nav-link" aria-label="flutter_tools"><!--[--><!--]--> flutter_tools <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_ui.md" class="nav-link" aria-label="flutter_ui"><!--[--><!--]--> flutter_ui <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_util.md" class="nav-link" aria-label="flutter_util"><!--[--><!--]--> flutter_util <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/20.Android/android.md" class="nav-link" aria-label="20.Android"><!--[--><!--]--> 20.Android <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/22.算法/算法.md" class="nav-link" aria-label="22.算法"><!--[--><!--]--> 22.算法 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="项目记"><span class="title">项目记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="项目记"><span class="title">项目记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/project/webpack5多项目构建.md" class="nav-link" aria-label="webpack5多项目构建"><!--[--><!--]--> webpack5多项目构建 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a href="/jiji/book" class="nav-link" aria-label="读书记"><!--[--><!--]--> 读书记 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="资源记"><span class="title">资源记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="资源记"><span class="title">资源记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/resources/flutter资源.md" class="nav-link" aria-label="flutter资源"><!--[--><!--]--> flutter资源 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/resources/serverless.md" class="nav-link" aria-label="serverless"><!--[--><!--]--> serverless <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/resources/ui框架.md" class="nav-link" aria-label="ui框架"><!--[--><!--]--> ui框架 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/resources/前端资源.md" class="nav-link" aria-label="前端资源"><!--[--><!--]--> 前端资源 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a href="/jiji/money" class="nav-link" aria-label="另辟蹊径记"><!--[--><!--]--> 另辟蹊径记 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/WALL-E-WEB" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">VUE</p><ul class=""><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#一、vue-指令" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="一、VUE-指令"><!--[--><!--]--> 一、VUE-指令 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_1-v-text" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1. v-text"><!--[--><!--]--> 1. v-text <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_2-v-html" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2. v-html"><!--[--><!--]--> 2. v-html <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-v-bind" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3. v-bind"><!--[--><!--]--> 3. v-bind <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-0-基本使用" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.0 - 基本使用"><!--[--><!--]--> 3.0 - 基本使用 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-1-class" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.1 - class"><!--[--><!--]--> 3.1 - class <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-1-1-对象语法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.1.1 	-	对象语法"><!--[--><!--]--> 3.1.1 	-	对象语法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-1-2-数组语法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.1.2 	-	数组语法"><!--[--><!--]--> 3.1.2 	-	数组语法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-1-3-组件类名叠加" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.1.3 	-	组件类名叠加"><!--[--><!--]--> 3.1.3 	-	组件类名叠加 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-2-style" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.2 - style"><!--[--><!--]--> 3.2 - style <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-2-1-对象语法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.2.1 - 对象语法"><!--[--><!--]--> 3.2.1 - 对象语法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-2-2-数组语法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.2.2 - 数组语法"><!--[--><!--]--> 3.2.2 - 数组语法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-2-3-多重值" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.2.3 - 多重值"><!--[--><!--]--> 3.2.3 - 多重值 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_4-v-on" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4. v-on"><!--[--><!--]--> 4. v-on <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_4-0-基本" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4.0 - 基本"><!--[--><!--]--> 4.0 - 基本 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_4-1-事件修饰符" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4.1 - 事件修饰符"><!--[--><!--]--> 4.1 - 事件修饰符 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_4-2-滑动事件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4.2 - 滑动事件"><!--[--><!--]--> 4.2 - 滑动事件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#this" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="this"><!--[--><!--]--> this <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_5-v-model" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="5. v-model"><!--[--><!--]--> 5. v-model <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#自定义v-model" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="自定义v-model"><!--[--><!--]--> 自定义v-model <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_6-v-for" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6. v-for"><!--[--><!--]--> 6. v-for <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_6-1-数组渲染" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6.1 - 数组渲染"><!--[--><!--]--> 6.1 - 数组渲染 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_6-2-对象渲染" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6.2 - 对象渲染"><!--[--><!--]--> 6.2 - 对象渲染 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_6-3-计算属性-方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6.3 - 计算属性 方法"><!--[--><!--]--> 6.3 - 计算属性 方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_6-4-使用template" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6.4 - 使用template"><!--[--><!--]--> 6.4 - 使用template <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_6-5-渲染组件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6.5 - 渲染组件"><!--[--><!--]--> 6.5 - 渲染组件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_6-6-v-for中获取不到dom解决" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6.6 - v-for中获取不到DOM解决"><!--[--><!--]--> 6.6 - v-for中获取不到DOM解决 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_6-6-1-this-nexttick" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6.6.1 - this.$nextTick"><!--[--><!--]--> 6.6.1 - this.$nextTick <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_6-6-2-放入updated中获取" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6.6.2 - 放入updated中获取"><!--[--><!--]--> 6.6.2 - 放入updated中获取 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_6-6-3-放入settimeout中获取" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6.6.3 - 放入setTimeout中获取"><!--[--><!--]--> 6.6.3 - 放入setTimeout中获取 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_6-7-v-for强制渲染" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6.7 - v-for强制渲染"><!--[--><!--]--> 6.7 - v-for强制渲染 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#v-if" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="v-if"><!--[--><!--]--> v-if <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#v-show" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="v-show"><!--[--><!--]--> v-show <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#v-cloak" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="v-cloak"><!--[--><!--]--> v-cloak <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#v-once" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="v-once"><!--[--><!--]--> v-once <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#v-pre" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="v-pre"><!--[--><!--]--> v-pre <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#插槽slot" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="插槽slot"><!--[--><!--]--> 插槽slot <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#具名插槽" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="具名插槽:"><!--[--><!--]--> 具名插槽: <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#作用域插槽" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="作用域插槽"><!--[--><!--]--> 作用域插槽 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#this-slots" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="this.$slots"><!--[--><!--]--> this.$slots <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#二、vue-方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="二、VUE-方法"><!--[--><!--]--> 二、VUE-方法 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#filters-过滤器" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="filters-过滤器"><!--[--><!--]--> filters-过滤器 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#computed-计算属性" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="computed-计算属性"><!--[--><!--]--> computed-计算属性 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#watch-侦听器" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="watch-侦听器"><!--[--><!--]--> watch-侦听器 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#注销侦听" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="注销侦听"><!--[--><!--]--> 注销侦听 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#三、生命周期" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="三、生命周期"><!--[--><!--]--> 三、生命周期 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#updated" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="updated"><!--[--><!--]--> updated <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#mounted" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="mounted"><!--[--><!--]--> mounted <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#created" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="created"><!--[--><!--]--> created <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#获取dom元素-ref" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="获取dom元素,ref"><!--[--><!--]--> 获取dom元素,ref <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#nexttick" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="nextTick"><!--[--><!--]--> nextTick <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#钩子函数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="钩子函数"><!--[--><!--]--> 钩子函数 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#es6导入导出" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ES6导入导出"><!--[--><!--]--> ES6导入导出 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#async-await" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="async await"><!--[--><!--]--> async await <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#过渡的类名" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="过渡的类名"><!--[--><!--]--> 过渡的类名 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#css动画" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="css动画"><!--[--><!--]--> css动画 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#过渡动画" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="过渡动画"><!--[--><!--]--> 过渡动画 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#audio" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="&lt;audio&gt;"><!--[--><!--]--> &lt;audio&gt; <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#iscroll插件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="iScroll插件"><!--[--><!--]--> iScroll插件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#nprogress插件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="NProgress插件"><!--[--><!--]--> NProgress插件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#富文本插件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="富文本插件"><!--[--><!--]--> 富文本插件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#dayjs" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="DayJs"><!--[--><!--]--> DayJs <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#moment-js" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="moment-Js"><!--[--><!--]--> moment-Js <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#bigint" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="bigint"><!--[--><!--]--> bigint <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#移动端自适应" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="移动端自适应"><!--[--><!--]--> 移动端自适应 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#stylus安装" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="stylus安装"><!--[--><!--]--> stylus安装 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#vue-ls" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="vue.ls"><!--[--><!--]--> vue.ls <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#获取图片主题色" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="获取图片主题色"><!--[--><!--]--> 获取图片主题色 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#一、vue渲染方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="一、vue渲染方式"><!--[--><!--]--> 一、vue渲染方式 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_1-自定义render函数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.	自定义render函数"><!--[--><!--]--> 1.	自定义render函数 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#非单页写法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="非单页写法："><!--[--><!--]--> 非单页写法： <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#vue-cli写法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="vue-cli写法："><!--[--><!--]--> vue-cli写法： <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#jsx写法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="jsx写法："><!--[--><!--]--> jsx写法： <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_2-template写法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.	 template写法"><!--[--><!--]--> 2.	 template写法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-el写法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.	el写法"><!--[--><!--]--> 3.	el写法 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#二、vue-createelement" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="二、Vue.createElement"><!--[--><!--]--> 二、Vue.createElement <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_1-参数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.	参数:"><!--[--><!--]--> 1.	参数: <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#param-1-string-object-function-元素" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="param-1: {String | Object | Function} 元素"><!--[--><!--]--> param-1: {String | Object | Function} 元素 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_2-属性" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.属性"><!--[--><!--]--> 2.属性 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#三、挂载方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="三、挂载方式"><!--[--><!--]--> 三、挂载方式 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_1-基础用法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.基础用法"><!--[--><!--]--> 1.基础用法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_2-main-js中直接全局注册" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.main.js中直接全局注册"><!--[--><!--]--> 2.main.js中直接全局注册 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-模块化注册" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.模块化注册"><!--[--><!--]--> 3.模块化注册 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#编程式导航" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="编程式导航"><!--[--><!--]--> 编程式导航 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#实现原理" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="实现原理"><!--[--><!--]--> 实现原理 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_1-组件的创建方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.组件的创建方式"><!--[--><!--]--> 1.组件的创建方式 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_1-vue-component" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.vue.component"><!--[--><!--]--> 1.vue.component <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_2-vue-component-2" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.vue.component - 2"><!--[--><!--]--> 2.vue.component - 2 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-vue-extend" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.vue.extend({ })"><!--[--><!--]--> 3.vue.extend({ }) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_4-vm-mount" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4.vm.$mount"><!--[--><!--]--> 4.vm.$mount <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_5-template" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="5.template"><!--[--><!--]--> 5.template <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_6-使用script定义" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6.使用script定义"><!--[--><!--]--> 6.使用script定义 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_7-vue-cli组件挂载方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="7.vue-cli组件挂载方式"><!--[--><!--]--> 7.vue-cli组件挂载方式 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_2-组件传值" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.组件传值"><!--[--><!--]--> 2.组件传值 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#子向父传" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="子向父传"><!--[--><!--]--> 子向父传 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#子父-父子相互传" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="子父,父子相互传"><!--[--><!--]--> 子父,父子相互传 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-组件传参方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.组件传参方式"><!--[--><!--]--> 3.组件传参方式 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_1-prop" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.prop"><!--[--><!--]--> 1.prop <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_2-ref" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.$ref"><!--[--><!--]--> 2.$ref <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-emit-子-父" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.$emit  子 =&gt; 父"><!--[--><!--]--> 3.$emit  子 =&gt; 父 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_4-bus" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4.bus"><!--[--><!--]--> 4.bus <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_5-问题" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="5.问题"><!--[--><!--]--> 5.问题 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_4-vue子组件调用父组件的方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4.Vue子组件调用父组件的方法"><!--[--><!--]--> 4.Vue子组件调用父组件的方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_5-组件缓存方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="5.组件缓存方法"><!--[--><!--]--> 5.组件缓存方法 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_1-标签包裹方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.标签包裹方法"><!--[--><!--]--> 1.标签包裹方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_2-router-meta方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.router.meta方法"><!--[--><!--]--> 2.router.meta方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-路由导航守卫" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.路由导航守卫"><!--[--><!--]--> 3.路由导航守卫 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_4-缓存解决方案" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4.缓存解决方案"><!--[--><!--]--> 4.缓存解决方案 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_6-动态组件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6.动态组件"><!--[--><!--]--> 6.动态组件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_7-异步组件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="7.异步组件"><!--[--><!--]--> 7.异步组件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_8-边界情况" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="8.边界情况"><!--[--><!--]--> 8.边界情况 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_9-递归组件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="9.递归组件"><!--[--><!--]--> 9.递归组件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#build" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="build"><!--[--><!--]--> build <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_1-分析" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.分析："><!--[--><!--]--> 1.分析： <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_2-打包优化" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.打包优化"><!--[--><!--]--> 2.打包优化 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#vue-router路由" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="vue-router路由"><!--[--><!--]--> vue-router路由 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_1-组件导航创建" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.组件导航创建"><!--[--><!--]--> 1.组件导航创建 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_2-传参方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.传参方式"><!--[--><!--]--> 2.传参方式 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-children-子路由" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.children-子路由"><!--[--><!--]--> 3.children-子路由 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_4-导航守卫" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4.导航守卫"><!--[--><!--]--> 4.导航守卫 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#路由解析流程" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="路由解析流程?"><!--[--><!--]--> 路由解析流程? <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#vue-router是如何响应-路由参数变化的" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="vue-router是如何响应 路由参数变化的:"><!--[--><!--]--> vue-router是如何响应 路由参数变化的: <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#route和-router的区别" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="$route和$router的区别"><!--[--><!--]--> $route和$router的区别 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_5-路由的原理" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="5.路由的原理"><!--[--><!--]--> 5.路由的原理 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#abstract模式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="abstract模式:"><!--[--><!--]--> abstract模式: <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#hash模式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="hash模式"><!--[--><!--]--> hash模式 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#实现" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="实现:"><!--[--><!--]--> 实现: <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#history模式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="history模式"><!--[--><!--]--> history模式 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#实现-1" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="实现:"><!--[--><!--]--> 实现: <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_6-属性" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6.-属性"><!--[--><!--]--> 6.-属性 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#router" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="router"><!--[--><!--]--> router <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#route" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="route"><!--[--><!--]--> route <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_7-router-link的props属性" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="7.router-link的props属性"><!--[--><!--]--> 7.router-link的props属性 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_1-to" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.to"><!--[--><!--]--> 1.to <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_2-replace" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.replace"><!--[--><!--]--> 2.replace <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-append" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3. append"><!--[--><!--]--> 3. append <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_4-tag" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4. tag"><!--[--><!--]--> 4. tag <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_5-active-class" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="5.active-class"><!--[--><!--]--> 5.active-class <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_6-exact" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6.exact"><!--[--><!--]--> 6.exact <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_7-events" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="7.events"><!--[--><!--]--> 7.events <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_8、将-激活时的css类名-应用在外层元素" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="8、将&quot;激活时的css类名&quot;应用在外层元素"><!--[--><!--]--> 8、将&quot;激活时的css类名&quot;应用在外层元素 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_8-写法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="8.写法"><!--[--><!--]--> 8.写法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_9-路由登陆判断" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="9.路由登陆判断"><!--[--><!--]--> 9.路由登陆判断 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_10-路由跳转打开新页面方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="10.路由跳转打开新页面方法"><!--[--><!--]--> 10.路由跳转打开新页面方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_1-创建" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.创建:"><!--[--><!--]--> 1.创建: <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#组件分发方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="组件分发方式"><!--[--><!--]--> 组件分发方式 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_2-main-js" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.main.js"><!--[--><!--]--> 2.main.js <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-其他文件引用" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.其他文件引用"><!--[--><!--]--> 3.其他文件引用 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_4-模块化结构-项目结构" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4.模块化结构-项目结构"><!--[--><!--]--> 4.模块化结构-项目结构 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_5-命名空间" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="5.命名空间"><!--[--><!--]--> 5.命名空间 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#命名空间写法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="命名空间写法"><!--[--><!--]--> 命名空间写法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#在带命名空间的模块内访问全局内容" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="在带命名空间的模块内访问全局内容"><!--[--><!--]--> 在带命名空间的模块内访问全局内容 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#在带命名空间的模块注册全局-action" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="在带命名空间的模块注册全局 action"><!--[--><!--]--> 在带命名空间的模块注册全局 action <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#模块自动注册" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="模块自动注册"><!--[--><!--]--> 模块自动注册 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_6-刷新事件beforunload解决持久化" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6.刷新事件beforunload解决持久化"><!--[--><!--]--> 6.刷新事件beforunload解决持久化 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#axios与ajax" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="axios与ajax"><!--[--><!--]--> axios与ajax <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#axiso引用方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="axiso引用方式"><!--[--><!--]--> axiso引用方式 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_1-绑定原型方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.绑定原型方式:"><!--[--><!--]--> 1.绑定原型方式: <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_2-插件方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.插件方法"><!--[--><!--]--> 2.插件方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-接口封装方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.接口封装方式"><!--[--><!--]--> 3.接口封装方式 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_4-多基地址" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4.多基地址"><!--[--><!--]--> 4.多基地址 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#axios全局配置" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="axios全局配置"><!--[--><!--]--> axios全局配置 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#axios传参方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="axios传参方式"><!--[--><!--]--> axios传参方式 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_1-get请求" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.get请求"><!--[--><!--]--> 1.get请求 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_2-post请求" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.post请求"><!--[--><!--]--> 2.post请求 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_3-query-形式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3. query 形式"><!--[--><!--]--> 3. query 形式 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_4-json格式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4. JSON格式"><!--[--><!--]--> 4. JSON格式 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_5-对象写法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="5.对象写法"><!--[--><!--]--> 5.对象写法 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#axios拦截器" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="axios拦截器"><!--[--><!--]--> axios拦截器 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_1-请求拦截" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.请求拦截"><!--[--><!--]--> 1.请求拦截 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#_2-响应拦截" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.响应拦截"><!--[--><!--]--> 2.响应拦截 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#create方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="create方法"><!--[--><!--]--> create方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#post请求方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="post请求方式"><!--[--><!--]--> post请求方式 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#multipart-form-data" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="multipart/form-data"><!--[--><!--]--> multipart/form-data <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#get" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="get"><!--[--><!--]--> get <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#请求转换" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="请求转换"><!--[--><!--]--> 请求转换 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#qs" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="qs"><!--[--><!--]--> qs <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#拦截处理" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="拦截处理"><!--[--><!--]--> 拦截处理 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#插件-1" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="插件"><!--[--><!--]--> 插件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#插件封装" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="插件封装"><!--[--><!--]--> 插件封装 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#html引入" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="html引入:"><!--[--><!--]--> html引入: <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#nuxt" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="nuxt"><!--[--><!--]--> nuxt <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#vue-cli3-0" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="vue-cli3.0+"><!--[--><!--]--> vue-cli3.0+ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/10.Vue/VUE.html#vue-cli3-0-配置文件-命令行跨域解决方案" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="vue-cli3.0+ 配置文件+命令行跨域解决方案"><!--[--><!--]--> vue-cli3.0+ 配置文件+命令行跨域解决方案 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="vue" tabindex="-1"><a class="header-anchor" href="#vue" aria-hidden="true">#</a> VUE</h1><h2 id="一、vue-指令" tabindex="-1"><a class="header-anchor" href="#一、vue-指令" aria-hidden="true">#</a> 一、VUE-指令</h2><ul><li><p>vue提供给HTML标签新增的属性</p></li><li><p>是带有v-前缀的特殊特性</p></li></ul><h3 id="_1-v-text" tabindex="-1"><a class="header-anchor" href="#_1-v-text" aria-hidden="true">#</a> 1. v-text</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
	<span class="token operator">-</span>特点<span class="token operator">:</span>
		<span class="token operator">--</span>强制覆盖标签内所有的内容<span class="token punctuation">;</span>
		<span class="token operator">--</span>不能解析html<span class="token punctuation">;</span>
	<span class="token operator">-</span>语法<span class="token operator">:</span>
    	<span class="token operator">&lt;</span>span v<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">&quot;msg&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 和下面的一样 <span class="token operator">--</span><span class="token operator">&gt;</span>
    	<span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
	
 <span class="token operator">--</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token operator">-</span>特点<span class="token operator">:</span>
		<span class="token operator">--</span>可三元表达式<span class="token punctuation">;</span>
		<span class="token operator">--</span>数值运算<span class="token punctuation">,</span>字符串拼接<span class="token punctuation">;</span>
		<span class="token operator">--</span>数据可是arr<span class="token punctuation">,</span>obj
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_2-v-html" tabindex="-1"><a class="header-anchor" href="#_2-v-html" aria-hidden="true">#</a> 2. v-html</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>强制覆盖里面的内容
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="_3-v-bind" tabindex="-1"><a class="header-anchor" href="#_3-v-bind" aria-hidden="true">#</a> 3. v-bind</h3><h4 id="_3-0-基本使用" tabindex="-1"><a class="header-anchor" href="#_3-0-基本使用" aria-hidden="true">#</a> 3.0 - 基本使用</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>简写<span class="token operator">:</span> <span class="token operator">:</span>
作用<span class="token operator">:</span>将data里数据<span class="token punctuation">,</span>绑定到htm标签的属性上

语法<span class="token operator">:</span>
    <span class="token operator">&lt;</span>img v<span class="token operator">-</span>bind<span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">&#39;msg&#39;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p v<span class="token operator">-</span>bind<span class="token operator">:</span>title<span class="token operator">=</span><span class="token string">&#39;msg&#39;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

<span class="token keyword">class</span>操作<span class="token operator">:</span>
	v<span class="token operator">-</span>bind<span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&#39;参数&#39;</span> <span class="token punctuation">;</span>
	v<span class="token operator">-</span>bind<span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&#39;true ? classA : &#39;</span><span class="token string">&#39; &#39;</span><span class="token punctuation">;</span> <span class="token comment">//三元表达式,classA为data的参数;</span>
	v<span class="token operator">-</span>bind<span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;[classA,classB]&quot;</span><span class="token punctuation">;</span> <span class="token comment">//数值传入多个 类名参数;</span>
	v<span class="token operator">-</span>bind<span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;[classA,classObj]&quot;</span> <span class="token comment">//</span>
	v<span class="token operator">-</span>bind<span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;classObj&quot;</span><span class="token punctuation">;</span>	<span class="token comment">//对象通过value的true或false ;</span>
		classObj<span class="token operator">:</span><span class="token punctuation">{</span>
            classA<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
            classB<span class="token operator">:</span><span class="token boolean">false</span>
        <span class="token punctuation">}</span>

style操作<span class="token operator">:</span>
	v<span class="token operator">-</span>bind<span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&#39;{height=&quot;200px&quot;}&#39;</span><span class="token punctuation">;</span>
	v<span class="token operator">-</span>bind<span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&#39;styleobj&#39;</span><span class="token punctuation">;</span>
	v<span class="token operator">-</span>bind<span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&#39;[styleobj1,styleobj2]&#39;</span>

<span class="token operator">&lt;</span>div v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">&quot;{ id: someProp, &#39;other-attr&#39;: otherProp }&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token comment">//批量绑定</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="_3-1-class" tabindex="-1"><a class="header-anchor" href="#_3-1-class" aria-hidden="true">#</a> 3.1 - class</h4><h5 id="_3-1-1-对象语法" tabindex="-1"><a class="header-anchor" href="#_3-1-1-对象语法" aria-hidden="true">#</a> 3.1.1 - 对象语法</h5><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> v<span class="token operator">-</span>bind<span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;{ active: isActive, &#39;text-danger&#39;: hasError }&quot;</span>
 data<span class="token operator">:</span> <span class="token punctuation">{</span>
  isActive<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  error<span class="token operator">:</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul><h5 id="_3-1-2-数组语法" tabindex="-1"><a class="header-anchor" href="#_3-1-2-数组语法" aria-hidden="true">#</a> 3.1.2 - 数组语法</h5><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div v<span class="token operator">-</span>bind<span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;[activeClass, errorClass]&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
data<span class="token operator">:</span> <span class="token punctuation">{</span>
  activeClass<span class="token operator">:</span> <span class="token string">&#39;active&#39;</span><span class="token punctuation">,</span>
  errorClass<span class="token operator">:</span> <span class="token string">&#39;text-danger&#39;</span>
<span class="token punctuation">}</span>

结果<span class="token operator">:</span><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;active text-danger&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>


数组三元表达式<span class="token operator">:</span>
<span class="token operator">&lt;</span>div v<span class="token operator">-</span>bind<span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;[isActive ? activeClass : &#39;&#39;, errorClass]&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

计算属性类名<span class="token operator">:</span>
<span class="token operator">&lt;</span>div <span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;Aclass&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
computer<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">Aclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>
            <span class="token string">&#39;active&#39;</span><span class="token punctuation">,</span>
            activeA<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div></li></ul><h5 id="_3-1-3-组件类名叠加" tabindex="-1"><a class="header-anchor" href="#_3-1-3-组件类名叠加" aria-hidden="true">#</a> 3.1.3 - 组件类名叠加</h5><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>组件类目叠加规则：
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;my-component&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token string">&#39;&lt;p class=&quot;foo bar&quot;&gt;Hi&lt;/p&gt;&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span>my<span class="token operator">-</span>component <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;baz boo&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>component<span class="token operator">&gt;</span>

渲染结果<span class="token operator">:</span><span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;foo bar baz boo&quot;</span><span class="token operator">&gt;</span>Hi<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

标签类名叠加：
<span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;foo&quot;</span> ：calss<span class="token operator">=</span><span class="token string">&quot;bar&quot;</span><span class="token operator">&gt;</span>Hi<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ul><h4 id="_3-2-style" tabindex="-1"><a class="header-anchor" href="#_3-2-style" aria-hidden="true">#</a> 3.2 - style</h4><h5 id="_3-2-1-对象语法" tabindex="-1"><a class="header-anchor" href="#_3-2-1-对象语法" aria-hidden="true">#</a> 3.2.1 - 对象语法</h5><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div v<span class="token operator">-</span>bind<span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;{ color: activeColor, fontSize: fontSize + &#39;px&#39; }&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

data<span class="token operator">:</span> <span class="token punctuation">{</span>
  activeColor<span class="token operator">:</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">,</span>
  fontSize<span class="token operator">:</span> <span class="token number">30</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul><h5 id="_3-2-2-数组语法" tabindex="-1"><a class="header-anchor" href="#_3-2-2-数组语法" aria-hidden="true">#</a> 3.2.2 - 数组语法</h5><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div v<span class="token operator">-</span>bind<span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;[baseStyles, overridingStyles]&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

baseStyles 为对象
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><h5 id="_3-2-3-多重值" tabindex="-1"><a class="header-anchor" href="#_3-2-3-多重值" aria-hidden="true">#</a> 3.2.3 - 多重值</h5><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;{ display: [&#39;-webkit-box&#39;, &#39;-ms-flexbox&#39;, &#39;flex&#39;] }&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

这样写只会渲染数组中最后一个被浏览器支持的值。在本例中，如果浏览器支持不带浏览器前缀的 flexbox，那么就只会渲染 display<span class="token operator">:</span> flex。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><h3 id="_4-v-on" tabindex="-1"><a class="header-anchor" href="#_4-v-on" aria-hidden="true">#</a> 4. v-on</h3><h4 id="_4-0-基本" tabindex="-1"><a class="header-anchor" href="#_4-0-基本" aria-hidden="true">#</a> 4.0 - 基本</h4><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>简写<span class="token operator">:</span>@
作用<span class="token operator">:</span>给元素绑定事件
	
	事件声明用<span class="token operator">:</span>methods
    
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span> <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button v<span class="token operator">-</span>on<span class="token operator">:</span>click <span class="token operator">=</span> <span class="token string">&#39;fn&#39;</span><span class="token operator">&gt;</span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>button @<span class="token operator">:</span>click <span class="token operator">=</span> <span class="token string">&#39;fn&#39;</span><span class="token operator">&gt;</span>点击<span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token operator">:</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span><span class="token punctuation">{</span>
        msg<span class="token operator">:</span><span class="token string">&quot;库&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> <span class="token string">&#39;酷酷&#39;</span> <span class="token comment">//改变msg的属性值</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token comment">//vue的事件对象是event</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></li></ul><h4 id="_4-1-事件修饰符" tabindex="-1"><a class="header-anchor" href="#_4-1-事件修饰符" aria-hidden="true">#</a> 4.1 - 事件修饰符</h4><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>阻止事件默认行为
	<span class="token operator">&lt;</span>button v<span class="token operator">-</span>on<span class="token operator">:</span>click<span class="token punctuation">.</span>prevent <span class="token operator">=</span> <span class="token string">&#39;fn&#39;</span><span class="token operator">&gt;</span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

<span class="token punctuation">.</span>stop <span class="token operator">-</span> 调用 event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>。
<span class="token punctuation">.</span>prevent <span class="token operator">-</span> 调用 event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>。
<span class="token punctuation">.</span>capture <span class="token operator">-</span> 添加事件侦听器时使用 capture 模式。
<span class="token punctuation">.</span>self <span class="token operator">-</span> 只当事件是从侦听器绑定的元素本身触发时才触发回调。
<span class="token punctuation">.</span><span class="token punctuation">{</span>keyCode <span class="token operator">|</span> keyAlias<span class="token punctuation">}</span> <span class="token operator">-</span> 只当事件是从特定键触发时才触发回调。
<span class="token punctuation">.</span>native <span class="token operator">-</span> 监听组件根元素的原生事件。
<span class="token punctuation">.</span>once <span class="token operator">-</span> 只触发一次回调。
<span class="token punctuation">.</span>left <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">2.2</span><span class="token number">.0</span><span class="token punctuation">)</span> 只当点击鼠标左键时触发。
<span class="token punctuation">.</span>right <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">2.2</span><span class="token number">.0</span><span class="token punctuation">)</span> 只当点击鼠标右键时触发。
<span class="token punctuation">.</span>middle <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">2.2</span><span class="token number">.0</span><span class="token punctuation">)</span> 只当点击鼠标中键时触发。
<span class="token punctuation">.</span>passive <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">2.3</span><span class="token number">.0</span><span class="token punctuation">)</span> 以 <span class="token punctuation">{</span> passive<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> 模式添加侦听器
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ul><h4 id="_4-2-滑动事件" tabindex="-1"><a class="header-anchor" href="#_4-2-滑动事件" aria-hidden="true">#</a> 4.2 - 滑动事件</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>@touchmove<span class="token punctuation">.</span>prevent <span class="token comment">//移动端禁止局部滚动 </span>

@scroll<span class="token punctuation">.</span>prevent <span class="token comment">//PC端禁止局部滚动</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="this" tabindex="-1"><a class="header-anchor" href="#this" aria-hidden="true">#</a> this</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span>指向vue的实例<span class="token punctuation">;</span>

箭头函数<span class="token operator">:</span><span class="token keyword">this</span>指向的是window<span class="token comment">//参数指向的是window</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_5-v-model" tabindex="-1"><a class="header-anchor" href="#_5-v-model" aria-hidden="true">#</a> 5. v-model</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>用于input textarea select <span class="token punctuation">,</span>动态绑定<span class="token punctuation">,</span>双向绑定
用来获取用户输入的内容<span class="token punctuation">;</span>


修饰符<span class="token operator">:</span>
<span class="token punctuation">.</span>lazy <span class="token operator">-</span> 取代 input 监听 change 事件
<span class="token punctuation">.</span>number <span class="token operator">-</span> 输入字符串转为有效的数字
<span class="token punctuation">.</span>trim <span class="token operator">-</span> 输入首尾空格过滤
<span class="token punctuation">.</span>sync 修饰符多个v<span class="token operator">-</span>model
<span class="token operator">&lt;</span>my<span class="token operator">-</span>dialog  <span class="token operator">:</span>visible<span class="token operator">=</span><span class="token string">&quot;dialogVisible&quot;</span>  @update<span class="token operator">:</span>visible<span class="token operator">=</span><span class="token string">&quot;newVisible =&gt; dialogVisible = newVisible&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
   

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="自定义v-model" tabindex="-1"><a class="header-anchor" href="#自定义v-model" aria-hidden="true">#</a> 自定义v-model</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;w-popup&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;w-shade&quot;</span><span class="token operator">&gt;</span>ss<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  model<span class="token operator">:</span> <span class="token punctuation">{</span>
    prop<span class="token operator">:</span> <span class="token string">&#39;show&#39;</span><span class="token punctuation">,</span> <span class="token comment">//注意 是字符串</span>
    event<span class="token operator">:</span> <span class="token string">&#39;mEventChange&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    show<span class="token operator">:</span> Boolean
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;watch mEventChange&#39;</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token comment">//会把值传给v-model</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_6-v-for" tabindex="-1"><a class="header-anchor" href="#_6-v-for" aria-hidden="true">#</a> 6. v-for</h3><p>作用：用于渲染列表；必须带key</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in list&quot;</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>div <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.id&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_6-1-数组渲染" tabindex="-1"><a class="header-anchor" href="#_6-1-数组渲染" aria-hidden="true">#</a> 6.1 - 数组渲染</h4><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>p v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(item,index) in arr&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>p v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in arr&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><h4 id="_6-2-对象渲染" tabindex="-1"><a class="header-anchor" href="#_6-2-对象渲染" aria-hidden="true">#</a> 6.2 - 对象渲染</h4><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(value, key, index) in object&quot;</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ul><h4 id="_6-3-计算属性-方法" tabindex="-1"><a class="header-anchor" href="#_6-3-计算属性-方法" aria-hidden="true">#</a> 6.3 - 计算属性 方法</h4><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>用于过滤数据后渲染

<span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;n in evenNumbers&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> n <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;n in even(numbers)&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> n <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>

data<span class="token operator">:</span> <span class="token punctuation">{</span>
  numbers<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
computed<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">evenNumbers</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numbers<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> number <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>，
  <span class="token function-variable function">even</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">numbers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> numbers<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> number <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li></ul><h4 id="_6-4-使用template" tabindex="-1"><a class="header-anchor" href="#_6-4-使用template" aria-hidden="true">#</a> 6.4 - 使用template</h4><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>用template 包裹多个标签，template不会被渲染到页面，避免多余标签。
<span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&#39;true&#39;</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
	<span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

应用：渲染不同的 li标签
<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in items&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> item<span class="token punctuation">.</span>msg <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;divider&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li></ul><h4 id="_6-5-渲染组件" tabindex="-1"><a class="header-anchor" href="#_6-5-渲染组件" aria-hidden="true">#</a> 6.5 - 渲染组件</h4><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>有些 <span class="token constant">HTML</span> 元素，<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>、<span class="token operator">&lt;</span>ol<span class="token operator">&gt;</span>、<span class="token operator">&lt;</span>table<span class="token operator">&gt;</span> 和 <span class="token operator">&lt;</span>select<span class="token operator">&gt;</span>，
内部只能放特定标签<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>option<span class="token operator">&gt;</span>等；

<span class="token operator">&lt;</span>blog<span class="token operator">-</span>post<span class="token operator">-</span>row <span class="token operator">/</span><span class="token operator">&gt;</span> 为组件

<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>blog<span class="token operator">-</span>post<span class="token operator">-</span>row<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>blog<span class="token operator">-</span>post<span class="token operator">-</span>row<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>blog<span class="token operator">-</span>post<span class="token operator">-</span>row<span class="token operator">&gt;</span> 会被作为无效的内容提升到外部，并导致最终渲染结果出错。

<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>tr is<span class="token operator">=</span><span class="token string">&quot;blog-post-row&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>

需要注意的是如果我们从以下来源使用模板的话，这条限制是不存在的：

<span class="token function">字符串</span> <span class="token punctuation">(</span>例如：template<span class="token operator">:</span> <span class="token string">&#39;...&#39;</span><span class="token punctuation">)</span>
<span class="token function">单文件组件</span> <span class="token punctuation">(</span><span class="token punctuation">.</span>vue<span class="token punctuation">)</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/x-template&quot;</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ul><h4 id="_6-6-v-for中获取不到dom解决" tabindex="-1"><a class="header-anchor" href="#_6-6-v-for中获取不到dom解决" aria-hidden="true">#</a> 6.6 - v-for中获取不到DOM解决</h4><h5 id="_6-6-1-this-nexttick" tabindex="-1"><a class="header-anchor" href="#_6-6-1-this-nexttick" aria-hidden="true">#</a> 6.6.1 - this.$nextTick</h5><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1.</span>
mounted（）<span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//获取DOM</span>
 	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>，

<span class="token number">2.</span>当<span class="token operator">-</span><span class="token keyword">for</span>中渲染数据为异步请求时；<span class="token number">1</span>中方法可能获取不到；需要把<span class="token keyword">this</span><span class="token punctuation">.</span>$nextTick放在获取数据之后；

<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/data&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">//data 为渲染for的数据</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> res<span class="token punctuation">.</span>data
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      		<span class="token comment">//获取DOM</span>
 		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ul><h5 id="_6-6-2-放入updated中获取" tabindex="-1"><a class="header-anchor" href="#_6-6-2-放入updated中获取" aria-hidden="true">#</a> 6.6.2 - 放入updated中获取</h5><ul><li><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>每次跟新视图，都会触发该操作。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ul><h5 id="_6-6-3-放入settimeout中获取" tabindex="-1"><a class="header-anchor" href="#_6-6-3-放入settimeout中获取" aria-hidden="true">#</a> 6.6.3 - 放入setTimeout中获取</h5><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">//获取DOM</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul><h4 id="_6-7-v-for强制渲染" tabindex="-1"><a class="header-anchor" href="#_6-7-v-for强制渲染" aria-hidden="true">#</a> 6.7 - v-for强制渲染</h4><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>层级过深可能影响渲染：用如下强制渲染
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$forceUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><h3 id="v-if" tabindex="-1"><a class="header-anchor" href="#v-if" aria-hidden="true">#</a> v-if</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>v<span class="token operator">-</span><span class="token keyword">if</span>
v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">-</span><span class="token keyword">if</span>
v<span class="token operator">-</span><span class="token keyword">else</span>

v<span class="token operator">-</span><span class="token keyword">else</span> 元素必须立即跟在 v<span class="token operator">-</span><span class="token keyword">if</span> 或 v<span class="token operator">-</span>show 元素的后面——否则它不能被识别。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="v-show" tabindex="-1"><a class="header-anchor" href="#v-show" aria-hidden="true">#</a> v-show</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">&#39;isshow=false&#39;</span>
v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">&#39;isshow&#39;</span>
data<span class="token operator">:</span><span class="token punctuation">{</span>
    isshow<span class="token operator">:</span><span class="token boolean">true</span>
<span class="token punctuation">}</span>
通过控制data的isshow<span class="token punctuation">,</span>来控制v<span class="token operator">-</span>show
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="v-cloak" tabindex="-1"><a class="header-anchor" href="#v-cloak" aria-hidden="true">#</a> v-cloak</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>防止暴露<span class="token punctuation">{</span><span class="token punctuation">{</span>val<span class="token punctuation">}</span><span class="token punctuation">}</span>语法
<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
	<span class="token punctuation">[</span>v<span class="token operator">-</span>cloak<span class="token punctuation">]</span><span class="token punctuation">{</span>
        display<span class="token operator">:</span>none<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&#39;app&#39;</span> v<span class="token operator">-</span>cloak<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="v-once" tabindex="-1"><a class="header-anchor" href="#v-once" aria-hidden="true">#</a> v-once</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>只被渲染一次
<span class="token operator">&lt;</span>p v<span class="token operator">-</span>once<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span> 
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="v-pre" tabindex="-1"><a class="header-anchor" href="#v-pre" aria-hidden="true">#</a> v-pre</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>不解析
<span class="token operator">&lt;</span>p v<span class="token operator">-</span>pre<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span> <span class="token comment">// {{msg}}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="插槽slot" tabindex="-1"><a class="header-anchor" href="#插槽slot" aria-hidden="true">#</a> 插槽slot</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>父用子组件时标签内的内容不会被渲染<span class="token punctuation">;</span>所以在子组件加入<span class="token operator">&lt;</span>slot<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>插槽<span class="token punctuation">,</span>接收父调用子组件标签内的内容<span class="token punctuation">.</span>

父<span class="token operator">:</span>
<span class="token operator">&lt;</span>son<span class="token operator">&gt;</span> 
	<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>son<span class="token operator">&gt;</span>
子<span class="token operator">:</span>
<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>slot<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span> <span class="token comment">// 1 2</span>
	<span class="token operator">&lt;</span>slot<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span> <span class="token comment">// 1 2</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>



</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="具名插槽" tabindex="-1"><a class="header-anchor" href="#具名插槽" aria-hidden="true">#</a> 具名插槽:</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">2.6</span>后弃用
父<span class="token operator">:</span>
<span class="token operator">&lt;</span>son<span class="token operator">&gt;</span> 
	<span class="token operator">&lt;</span>div slot<span class="token operator">=</span><span class="token string">&quot;a&quot;</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>div slot<span class="token operator">=</span><span class="token string">&quot;b&quot;</span><span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>son<span class="token operator">&gt;</span>

子<span class="token operator">:</span>
<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">&quot;a&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span> <span class="token comment">// 1 </span>
	<span class="token operator">&lt;</span>slot  name<span class="token operator">=</span><span class="token string">&quot;b&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span> <span class="token comment">// 2</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

新语法<span class="token operator">:</span> v<span class="token operator">-</span>slot<span class="token operator">:</span> 只能用在组件上或用<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>包起来
	<span class="token operator">-</span>父<span class="token operator">:</span>
        <span class="token operator">&lt;</span>son<span class="token operator">&gt;</span> 
            <span class="token operator">&lt;</span>template v<span class="token operator">-</span>slot<span class="token operator">:</span>a<span class="token operator">&gt;</span> <span class="token comment">//a不需要用&quot;&quot;</span>
                <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span>template v<span class="token operator">-</span>slot<span class="token operator">:</span>b<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>son<span class="token operator">&gt;</span>

	<span class="token operator">-</span>子<span class="token operator">:</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">&quot;a&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span> <span class="token comment">// 1 </span>
            <span class="token operator">&lt;</span>slot  name<span class="token operator">=</span><span class="token string">&quot;b&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span> <span class="token comment">// 2</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h4 id="作用域插槽" tabindex="-1"><a class="header-anchor" href="#作用域插槽" aria-hidden="true">#</a> 作用域插槽</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>子<span class="token operator">:</span>
<span class="token operator">&lt;</span>slot  name<span class="token operator">=</span><span class="token string">&quot;slotName&quot;</span> <span class="token operator">:</span>b<span class="token operator">=</span><span class="token string">&quot;sondata&quot;</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span><span class="token punctuation">{</span>
        sondata<span class="token operator">:</span><span class="token string">&#39;啦啦&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>解决子组件数据向父传递

新语法<span class="token operator">:</span>
父<span class="token operator">:</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">1.正常写法:</span><span class="token template-punctuation string">`</span></span>
<span class="token operator">&lt;</span>template v<span class="token operator">-</span>slot<span class="token operator">:</span>slotName<span class="token operator">=</span><span class="token string">&quot;c&quot;</span> <span class="token operator">&gt;</span> <span class="token comment">//指定插槽并接收数据 slotName为插件槽名,默认:difault</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>c<span class="token punctuation">.</span>b<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token comment">//啦啦</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">2.解构写法:</span><span class="token template-punctuation string">`</span></span>
<span class="token operator">&lt;</span>template v<span class="token operator">-</span>slot<span class="token operator">:</span>slotName<span class="token operator">=</span><span class="token string">&quot;{b}&quot;</span> <span class="token operator">&gt;</span> 
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>b<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token comment">//啦啦</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>动态插槽名
<span class="token operator">&lt;</span>template v<span class="token operator">-</span>slot<span class="token operator">:</span><span class="token punctuation">[</span>slotName<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;{b}&quot;</span> <span class="token operator">&gt;</span> 
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>b<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token comment">//啦啦</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="this-slots" tabindex="-1"><a class="header-anchor" href="#this-slots" aria-hidden="true">#</a> this.$slots</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>子组件中判断是否有用某个slots
<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>slotName <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

默认为slotName为 <span class="token keyword">default</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="二、vue-方法" tabindex="-1"><a class="header-anchor" href="#二、vue-方法" aria-hidden="true">#</a> 二、VUE-方法</h2><h3 id="filters-过滤器" tabindex="-1"><a class="header-anchor" href="#filters-过滤器" aria-hidden="true">#</a> filters-过滤器</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>html中使用：

<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>val <span class="token operator">|</span> <span class="token function">fn</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div <span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">&quot;message | fn(a)&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>


<span class="token number">1.</span>filter的第一个参数为html中的值；
<span class="token number">2.</span>需要<span class="token keyword">return</span> 新值
<span class="token number">3.</span>可传参；
filters<span class="token operator">:</span><span class="token punctuation">{</span>
	<span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span>a</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">~</span><span class="token operator">~</span><span class="token punctuation">(</span>val<span class="token operator">/</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&#39;分&#39;</span><span class="token operator">+</span><span class="token punctuation">(</span>val<span class="token operator">%</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">;</span> <span class="token comment">//使用val不使用this</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>



<span class="token number">1.</span>过滤器可传参数<span class="token punctuation">;</span>

<span class="token number">2.</span>链式调用
<span class="token punctuation">{</span><span class="token punctuation">{</span>val <span class="token operator">|</span> fn <span class="token operator">|</span> fn2<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>`<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//顺序左到右</span>


<span class="token number">3.</span>全局过滤器
 单个
Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">&#39;formaTime&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span>

	多个：
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> filters <span class="token keyword">from</span> <span class="token string">&#39;./filters&#39;</span>

Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> filters<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>filters中获取this的方法</p><ul><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token function">beforeCreate</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	that <span class="token operator">=</span> <span class="token keyword">this</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	filters<span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			
			<span class="token keyword">return</span> x
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ul><h3 id="computed-计算属性" tabindex="-1"><a class="header-anchor" href="#computed-计算属性" aria-hidden="true">#</a> computed-计算属性</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>用法：
<span class="token number">1.</span>在computed属性对象中定义计算属性的方法，在页面中使用<span class="token punctuation">{</span><span class="token punctuation">{</span>方法名<span class="token punctuation">}</span><span class="token punctuation">}</span>来显示计算的结果。

<span class="token number">2.</span>通过getter\setter实现对属性数据的显示和监视，计算属性存在缓存，多次读取只执行一次getter计算。
	只有当计算属性重新赋值时才执行<span class="token keyword">set</span>；

computed<span class="token operator">:</span><span class="token punctuation">{</span>
	<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">~</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token operator">/</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&#39;分&#39;</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token operator">%</span><span class="token number">60</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>fn <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

写法二<span class="token operator">/</span>
computed：<span class="token punctuation">{</span>
    fn：<span class="token punctuation">{</span> <span class="token comment">//对象写法</span>
        <span class="token keyword">get</span>（）<span class="token punctuation">{</span>
        
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
写法三<span class="token operator">:</span>传入参数
computed<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">Compute_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> params<span class="token operator">+</span><span class="token number">2</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

案例设置全选<span class="token operator">:</span>
<span class="token operator">&lt;</span>span @click<span class="token operator">=</span><span class="token string">&quot;isAll = !isAll&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
isAll<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 所有商品都勾选，为true</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>goodsList<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> v<span class="token punctuation">.</span>checked
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span> <span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//点击时改变isAll则会触发set()</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>goodsList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          v<span class="token punctuation">.</span>checked <span class="token operator">=</span> newValue
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h3 id="watch-侦听器" tabindex="-1"><a class="header-anchor" href="#watch-侦听器" aria-hidden="true">#</a> watch-侦听器</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>data<span class="token operator">:</span> <span class="token punctuation">{</span>
    myNumber<span class="token operator">:</span> <span class="token string">&#39;Dawei&#39;</span><span class="token punctuation">,</span>
        obj<span class="token operator">:</span> <span class="token punctuation">{</span>
        a<span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
watch<span class="token operator">:</span><span class="token punctuation">{</span>
   	<span class="token comment">/*第一种写法: 方法写法*/</span>
	<span class="token function">myNumber</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">new</span><span class="token punctuation">,</span>old</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		
	<span class="token punctuation">}</span>
    
    <span class="token comment">/*第二种写法: 字符串方法名*/</span>
    myNumber<span class="token operator">:</span><span class="token string">&#39;方法名&#39;</span>
    
    <span class="token comment">/*第三种写法: 对象*/</span>
    myNumber<span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">new</span><span class="token punctuation">,</span>old</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            
        <span class="token punctuation">}</span>
        immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">//true为立即执行,首次绑定是否执行</span>
    <span class="token punctuation">}</span>
    
     <span class="token comment">/*第四种写法: 字符串对象*/</span>
    <span class="token string">&#39;obj.name&#39;</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">//直接找到要侦听对象,减少性能损耗</span>
        <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">new</span><span class="token punctuation">,</span>old</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        deep<span class="token operator">:</span><span class="token boolean">true</span> <span class="token comment">//深度监听 复杂类型侦听</span>
        immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">//true为立即执行,首次绑定是否执行</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
<span class="token punctuation">}</span>

判断<span class="token operator">:</span>
watch<span class="token operator">:</span><span class="token punctuation">{</span>
	<span class="token string">&quot;$route.params.keywords&quot;</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">,</span>old<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//注意加&quot;&quot;   </span>
		
	<span class="token punctuation">}</span>
   <span class="token comment">//检测$route.params的变化</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>方法:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">new</span><span class="token punctuation">,</span>old</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//要执行的方法</span>
immediate<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">//首次绑定是否执行</span>
deep<span class="token operator">:</span><span class="token boolean">true</span><span class="token comment">//深侦听</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="注销侦听" tabindex="-1"><a class="header-anchor" href="#注销侦听" aria-hidden="true">#</a> 注销侦听</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1.</span>组件内的侦听器会随着组件销毁而销毁<span class="token punctuation">;</span>
<span class="token number">2.</span>组件外的侦听器需要运用unWatch方法注销<span class="token punctuation">;</span>防止内存溢出<span class="token punctuation">;</span>

<span class="token function">侦听中的handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span>如用箭头函数<span class="token punctuation">,</span>则<span class="token keyword">this</span>无法获取vue的实例<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="三、生命周期" tabindex="-1"><a class="header-anchor" href="#三、生命周期" aria-hidden="true">#</a> 三、生命周期</h2><p><img src="/jiji/assets/img/lifecycle-1571713470849.862bafaf.png" alt="Vue"></p><p><img src="/jiji/assets/img/微信图片_20191113224515.a81f4e87.png" alt="微信图片_20191113224515"></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>beforeCreate 	组件实例刚被创建，组件属性计算之前，如data属性等
created 	组件实例创建完成，属性已绑定，但<span class="token constant">DOM</span>还未生成，$el属性还不存在

beforeMount 	模板编译 <span class="token operator">/</span> 挂载之前
mounted 	    模板编译 <span class="token operator">/</span> 挂载之后

beforeUpdate 	组件更新之前
update 	        组件更新之后

beforeDestory 	组件销毁前调用
destoryed 	    组件销毁后调用

activated 	    <span class="token function">组件被激活时调用</span><span class="token punctuation">(</span>能看到的<span class="token punctuation">)</span>
deactivated 	<span class="token function">组件被移除时调用</span><span class="token punctuation">(</span>离开<span class="token punctuation">,</span>看不到的<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="updated" tabindex="-1"><a class="header-anchor" href="#updated" aria-hidden="true">#</a> updated</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>生命周期是一个方法<span class="token punctuation">,</span>
    与el<span class="token punctuation">,</span>data平级<span class="token punctuation">;</span>
页面渲染后执行
<span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
会监听所有数据<span class="token punctuation">,</span>导致性能浪费

解决优化<span class="token operator">:</span>
	
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//等页面更新渲染完成后,再执行</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="mounted" tabindex="-1"><a class="header-anchor" href="#mounted" aria-hidden="true">#</a> mounted</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>生命周期<span class="token operator">:</span>
vue把内部的data和页面内容初始化完毕并渲染挂载到页面上之后<span class="token punctuation">,</span>自动执行mounted
<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="created" tabindex="-1"><a class="header-anchor" href="#created" aria-hidden="true">#</a> created</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>vue创建后
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="获取dom元素-ref" tabindex="-1"><a class="header-anchor" href="#获取dom元素-ref" aria-hidden="true">#</a> 获取dom元素,ref</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>p ref<span class="token operator">=</span><span class="token string">&#39;p&#39;</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>p
<span class="token punctuation">}</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	myScroll <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IScroll</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>box<span class="token punctuation">,</span> <span class="token punctuation">{</span>
		moserWheel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		scrollbars<span class="token operator">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">undate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>myScroll<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="nexttick" tabindex="-1"><a class="header-anchor" href="#nexttick" aria-hidden="true">#</a> nextTick</h3><p>原理：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>基于异步：promise，MutationObserver，setImmediate，setTimeout
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&quot;login&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>divbox1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">&quot;box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token operator">=</span><span class="token number">20</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p><img src="C:\Users\Administrator\Desktop\项目笔记\笔记\-notes-\八、VUE\image-20191230170209052.png" alt="image-20191230170209052"></p><h1 id="自定义指令-directives" tabindex="-1"><a class="header-anchor" href="#自定义指令-directives" aria-hidden="true">#</a> 自定义指令-directives</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>局部指令<span class="token operator">:</span>
    directives<span class="token operator">:</span><span class="token punctuation">{</span>
     hm<span class="token operator">:</span><span class="token punctuation">{</span>
         <span class="token function">inserted</span><span class="token punctuation">(</span><span class="token parameter">ele</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
             el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&#39;text&#39;</span> v<span class="token operator">-</span>hm<span class="token operator">&gt;</span> <span class="token comment">//ele为input元素,执行focus();</span>

全局指令<span class="token operator">:</span>
    Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&#39;focus&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    	<span class="token function-variable function">inserted</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    	<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="钩子函数" tabindex="-1"><a class="header-anchor" href="#钩子函数" aria-hidden="true">#</a> 钩子函数</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>bind：只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。

<span class="token function">inserted：被绑定元素插入父节点时调用</span> <span class="token punctuation">(</span>仅保证父节点存在，但不一定已被插入文档中<span class="token punctuation">)</span>。

update：所在组件的 VNode 更新时调用，但是可能发生在其子 VNode <span class="token function">更新之前。指令的值可能发生了改变，也可能没有。但是你可以通过比较更新前后的值来忽略不必要的模板更新</span> <span class="token punctuation">(</span>详细的钩子函数参数见下<span class="token punctuation">)</span>。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="/jiji/assets/img/image-20191128104621304.e972749a.png" alt="image-20191128104621304"></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>异常处理            
<span class="token keyword">try</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span>  <span class="token comment">//试着执行这句,是否有异常,异常则执行catch</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span>
<span class="token punctuation">}</span>
<span class="token number">0123</span> <span class="token number">4444</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h1 id="vue-es6" tabindex="-1"><a class="header-anchor" href="#vue-es6" aria-hidden="true">#</a> vue-ES6</h1><h2 id="es6导入导出" tabindex="-1"><a class="header-anchor" href="#es6导入导出" aria-hidden="true">#</a> ES6导入导出</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>所有方式的导入<span class="token punctuation">,</span>都会执行被导入文件<span class="token punctuation">.</span>
一个文件默认只能暴露一个
<span class="token operator">-</span>导入方式<span class="token operator">:</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">1-默认</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span>
    <span class="token function">默认暴露</span><span class="token punctuation">(</span>导出<span class="token punctuation">)</span><span class="token operator">:</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> name
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>对象<span class="token punctuation">}</span>
        默认导入<span class="token operator">:</span>
    <span class="token keyword">import</span> name <span class="token keyword">from</span> <span class="token string">&#39;路径&#39;</span>

<span class="token number">2</span><span class="token operator">-</span>按名字暴露<span class="token operator">:</span>
	<span class="token keyword">export</span> <span class="token keyword">const</span> name<span class="token operator">=</span><span class="token string">&quot;jack&quot;</span>
    <span class="token keyword">export</span> <span class="token keyword">const</span> age<span class="token operator">=</span><span class="token string">&quot;18&quot;</span>
    
    导入<span class="token operator">:</span>
	<span class="token keyword">import</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;路径&#39;</span>
	<span class="token keyword">import</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span>age<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;路径&#39;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>例子</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>文件<span class="token operator">:</span>one<span class="token punctuation">.</span>js
<span class="token keyword">export</span> <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&#39;jack&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">&#39;abc&#39;</span>

<span class="token keyword">import</span> name <span class="token keyword">from</span> <span class="token string">&quot;./one.js&quot;</span> <span class="token comment">// abc</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./one.js&quot;</span> <span class="token comment">// jack</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="async-await" tabindex="-1"><a class="header-anchor" href="#async-await" aria-hidden="true">#</a> async await</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// async 是用来修饰函数（方法）的</span>
<span class="token comment">// 代表这个函数里面要做异步操作：读取文件、发请求</span>
<span class="token comment">// 结论1：如果仅仅只有async跟不加也没区别</span>
<span class="token comment">// 结论2：await不能单独使用，必须配合async使用，如果你写await所在的函数没用async修饰，会报错</span>
<span class="token comment">// 结论3：用await修饰的代码，它所在的函数里的后面的代码暂时不执行，要等await修饰的异步操作结束才执行，</span>
<span class="token comment">//        但是不影响await函数外的代码</span>
<span class="token comment">// 可以这么说：如果执行了await，相当于可以理解为这个函数就执行完了</span>
<span class="token comment">// 这么记：await跟return有点像，都会让函数先结束，区别在于return后面的绝对不执行，而await会等异步操作完了后执行</span>


<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">readSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;111111&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1</span>
    
    <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&#39;./files/a.txt&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&#39;./files/b.txt&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&#39;./files/c.txt&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
<span class="token punctuation">}</span>
<span class="token function">readSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;我在函数外面&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

优化axios请求<span class="token operator">:</span>

<span class="token number">1.</span>axios<span class="token punctuation">.</span>get方法返回值是promise对象<span class="token punctuation">;</span>
<span class="token number">2.</span><span class="token punctuation">.</span>then<span class="token punctuation">,</span>代表promise里面resolve赋值

<span class="token keyword">await</span> 特点<span class="token operator">:</span>
	<span class="token number">1.</span>要等它异步执行完再执行它后面的代码
    <span class="token number">2.</span>它的返回值是promise对象的resolve的参数
<span class="token keyword">async</span> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//加await res返回值是backdata(响应体) 特点2</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>form <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data
    
	<span class="token keyword">let</span> res2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>form2 <span class="token operator">=</span> res2<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data
<span class="token punctuation">}</span>    

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><h1 id="动画" tabindex="-1"><a class="header-anchor" href="#动画" aria-hidden="true">#</a> 动画</h1><ul><li><h3 id="过渡的类名" tabindex="-1"><a class="header-anchor" href="#过渡的类名" aria-hidden="true">#</a> 过渡的类名</h3><div class="language-css ext-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.fade-leave-active,
.fade-enter-active</span> <span class="token punctuation">{</span>
  		<span class="token property">transition</span><span class="token punctuation">:</span> all .3s ease<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token selector">.fade-enter,
.fade-leave-to</span><span class="token punctuation">{</span>
  	<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>10px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

 &lt;transition name=<span class="token string">&quot;fade&quot;</span>&gt;
    &lt;p v-if=<span class="token string">&quot;show&quot;</span>&gt;hello&lt;/p&gt;
  &lt;/transition&gt;
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ul><hr><ul><li><h3 id="css动画" tabindex="-1"><a class="header-anchor" href="#css动画" aria-hidden="true">#</a> css动画</h3><div class="language-css ext-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.bounce-enter-active</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> bounce-in .5s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.bounce-leave-active</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> bounce-in .5s reverse<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@keyframes</span> bounce-in</span> <span class="token punctuation">{</span>
  <span class="token selector">0%</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">50%</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">100%</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

&lt;transition name=<span class="token string">&quot;bounce&quot;</span>&gt;
    &lt;p v-if=<span class="token string">&quot;show&quot;</span>&gt;Lorem&lt;/p&gt;
&lt;/transition&gt;
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></li></ul><h3 id="过渡动画" tabindex="-1"><a class="header-anchor" href="#过渡动画" aria-hidden="true">#</a> 过渡动画</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>transtion name<span class="token operator">=</span><span class="token string">&#39;fade&#39;</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>transtion<span class="token operator">&gt;</span>


transition<span class="token operator">-</span>delay<span class="token string">&#39;: index*100+&#39;</span>ms&#39;


  <span class="token punctuation">.</span>bounceInDown<span class="token operator">-</span>enter<span class="token operator">-</span>active<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>bounceInDown<span class="token operator">-</span>leave<span class="token operator">-</span>active <span class="token punctuation">{</span>
      animation<span class="token operator">:</span> bounceInDown <span class="token number">1</span>s<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
 

    <span class="token punctuation">.</span>bounceInDown<span class="token operator">-</span>enter<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>bounceInDown<span class="token operator">-</span>leave<span class="token operator">-</span>to <span class="token punctuation">{</span> 
      opacity<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
      transform<span class="token operator">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span><span class="token number">30</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token punctuation">.</span>bounceInDown<span class="token operator">-</span>enter<span class="token operator">-</span>to<span class="token punctuation">,</span>
     <span class="token punctuation">.</span>bounceInDown<span class="token operator">-</span>leave<span class="token punctuation">{</span>
      opacity<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

<span class="token operator">&lt;</span>transition<span class="token operator">-</span>group <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;weather_list&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;bounceInDown&quot;</span> tag<span class="token operator">=</span><span class="token string">&quot;ul&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&#39;index&#39;</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="audio" tabindex="-1"><a class="header-anchor" href="#audio" aria-hidden="true">#</a> &lt;audio&gt;</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>developer<span class="token punctuation">.</span>mozilla<span class="token punctuation">.</span>org<span class="token operator">/</span>zh<span class="token operator">-</span><span class="token constant">CN</span><span class="token operator">/</span>docs<span class="token operator">/</span>Web<span class="token operator">/</span>Guide<span class="token operator">/</span>Events<span class="token operator">/</span>Media_events


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><hr><h1 id="插件" tabindex="-1"><a class="header-anchor" href="#插件" aria-hidden="true">#</a> 插件</h1><h2 id="iscroll插件" tabindex="-1"><a class="header-anchor" href="#iscroll插件" aria-hidden="true">#</a> iScroll插件</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>caibaojian<span class="token punctuation">.</span>com<span class="token operator">/</span>iscroll<span class="token operator">-</span><span class="token number">5</span><span class="token operator">/</span>

<span class="token keyword">const</span> wraper <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">queryseletcor</span><span class="token punctuation">(</span><span class="token string">&#39;.wraper&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> myScroll <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Iscroll</span><span class="token punctuation">(</span>wraper<span class="token punctuation">,</span><span class="token punctuation">{</span>
   scrollbars<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//显示滚动条（默认是false不显示）</span>
   mouseWheel<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//支持鼠标触发区域滚动</span>
   bounce<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//取消达到边界的缓冲效果</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>myScroll<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
刷新
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>mouseWheel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//允许鼠标滚动</span>
scrollbars<span class="token operator">:</span><span class="token boolean">true</span><span class="token comment">//显示滚动条</span>
bounce<span class="token operator">:</span><span class="token boolean">true</span><span class="token comment">//反弹动画</span>
click<span class="token operator">:</span><span class="token boolean">true</span><span class="token comment">//允许容器内元素能绑定点击事件</span>
disableMouse<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//禁用鼠标</span>
scrollX<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//横向可以用</span>
scrollY<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//纵向可以使用</span>
startX<span class="token operator">:</span><span class="token number">0</span><span class="token comment">//X方向滚动的起始位置</span>
startY<span class="token operator">:</span><span class="token number">0</span><span class="token comment">//X方向滚动的起始位置</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>blog<span class="token punctuation">.</span>csdn<span class="token punctuation">.</span>net<span class="token operator">/</span>justlpf<span class="token operator">/</span>article<span class="token operator">/</span>details<span class="token operator">/</span><span class="token number">82783147</span>
myScroll<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//销毁iscroll</span>
myScroll <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">//清空引用</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="nprogress插件" tabindex="-1"><a class="header-anchor" href="#nprogress插件" aria-hidden="true">#</a> NProgress插件</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm i <span class="token operator">--</span>save nprogress

<span class="token keyword">import</span> NProgress <span class="token keyword">from</span> <span class="token string">&#39;nprogress&#39;</span>
<span class="token keyword">import</span> <span class="token string">&#39;nprogress/nprogress.css&#39;</span>

NProgress<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 开启一个进度条
nprogress<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 关闭一个进度条
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="富文本插件" tabindex="-1"><a class="header-anchor" href="#富文本插件" aria-hidden="true">#</a> 富文本插件</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>surmon<span class="token operator">-</span>china<span class="token operator">/</span>vue<span class="token operator">-</span>quill<span class="token operator">-</span>editor
npm install vue<span class="token operator">-</span>quill<span class="token operator">-</span>editor <span class="token operator">--</span>save

<span class="token comment">// require styles</span>
<span class="token keyword">import</span> <span class="token string">&#39;quill/dist/quill.core.css &#39;</span>
<span class="token keyword">import</span> <span class="token string">&#39;quill/dist/quill.snow.css&#39;</span>
<span class="token keyword">import</span> <span class="token string">&#39;quill/dist/quill.bubble.css&#39;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> quillEditor <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-quill-editor&#39;</span>

注册成组件
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    quillEditor
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span>channelModel<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>channelModel<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="dayjs" tabindex="-1"><a class="header-anchor" href="#dayjs" aria-hidden="true">#</a> DayJs</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="moment-js" tabindex="-1"><a class="header-anchor" href="#moment-js" aria-hidden="true">#</a> moment-Js</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm install moment <span class="token operator">--</span>save  

<span class="token keyword">import</span> moment <span class="token keyword">from</span> <span class="token string">&#39;moment&#39;</span>

<span class="token comment">//全局过滤属性</span>
Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">&#39;dateFormat&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>daraStr<span class="token punctuation">,</span> pattern <span class="token operator">=</span> <span class="token string">&#39;YYYY-MM-DD HH:mm:ss&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">moment</span><span class="token punctuation">(</span>daraStr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

计算属性中使用<span class="token operator">:</span>
<span class="token function-variable function">com_date</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">&#39;days&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&#39;YYYY-MM-DD&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><table><thead><tr><th style="text-align:left;">Input</th><th style="text-align:left;">Example</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>YYYY</code></td><td style="text-align:left;"><code>2014</code></td><td style="text-align:left;">4 or 2 digit year</td></tr><tr><td style="text-align:left;"><code>YY</code></td><td style="text-align:left;"><code>14</code></td><td style="text-align:left;">2 digit year</td></tr><tr><td style="text-align:left;"><code>Y</code></td><td style="text-align:left;"><code>-25</code></td><td style="text-align:left;">Year with any number of digits and sign</td></tr><tr><td style="text-align:left;"><code>Q</code></td><td style="text-align:left;"><code>1..4</code></td><td style="text-align:left;">Quarter of year. Sets month to first month in quarter.</td></tr><tr><td style="text-align:left;"><code>M MM</code></td><td style="text-align:left;"><code>1..12</code></td><td style="text-align:left;">Month number</td></tr><tr><td style="text-align:left;"><code>MMM MMMM</code></td><td style="text-align:left;"><code>Jan..December</code></td><td style="text-align:left;">Month name in locale set by <code>moment.locale()</code></td></tr><tr><td style="text-align:left;"><code>D DD</code></td><td style="text-align:left;"><code>1..31</code></td><td style="text-align:left;">Day of month</td></tr><tr><td style="text-align:left;"><code>Do</code></td><td style="text-align:left;"><code>1st..31st</code></td><td style="text-align:left;">每月中的第几天</td></tr><tr><td style="text-align:left;"><code>DDD DDDD</code></td><td style="text-align:left;"><code>1..365</code></td><td style="text-align:left;">一年中的第几天</td></tr><tr><td style="text-align:left;"><code>X</code></td><td style="text-align:left;"><code>1410715640.579</code></td><td style="text-align:left;">Unix timestamp</td></tr><tr><td style="text-align:left;"><code>x</code></td><td style="text-align:left;"><code>1410715640579</code></td><td style="text-align:left;">Unix ms timestamp</td></tr></tbody></table><h2 id="bigint" tabindex="-1"><a class="header-anchor" href="#bigint" aria-hidden="true">#</a> bigint</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>安装<span class="token operator">:</span>npm i json<span class="token operator">-</span>bigint

<span class="token keyword">import</span> JSONbig <span class="token keyword">from</span> <span class="token string">&#39;json-bigint&#39;</span>


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="移动端自适应" tabindex="-1"><a class="header-anchor" href="#移动端自适应" aria-hidden="true">#</a> 移动端自适应</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm install lib<span class="token operator">-</span>flexible <span class="token operator">--</span>save<span class="token operator">-</span>dev

安装<span class="token operator">:</span>webpack loader<span class="token operator">:</span>px2rem<span class="token operator">-</span>loader
npm install px2rem<span class="token operator">-</span>loader <span class="token operator">--</span>save<span class="token operator">-</span>dev

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
 npm install postcss<span class="token operator">-</span>pxtorem <span class="token operator">--</span>save<span class="token operator">-</span>dev
npm i <span class="token operator">-</span><span class="token constant">S</span> amfe<span class="token operator">-</span>flexible

mani<span class="token punctuation">.</span>js
引入<span class="token keyword">import</span> <span class="token string">&#39;amfe-flexible&#39;</span>

postcss<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&#39;autoprefixer&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      browsers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;Android &gt;= 4.0&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;iOS &gt;= 7&#39;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&#39;postcss-pxtorem&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      rootValue<span class="token operator">:</span> <span class="token number">37.5</span><span class="token punctuation">,</span>
      propList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="stylus安装" tabindex="-1"><a class="header-anchor" href="#stylus安装" aria-hidden="true">#</a> stylus安装</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm install stylus stylus<span class="token operator">-</span>loader <span class="token operator">--</span>save<span class="token operator">-</span>dev

vue<span class="token punctuation">.</span>app
<span class="token operator">&lt;</span>style scoped lang<span class="token operator">=</span><span class="token string">&quot;stylus&quot;</span> rel<span class="token operator">=</span><span class="token string">&quot;stylesheet/stylus&quot;</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

mani<span class="token punctuation">.</span>js
<span class="token keyword">import</span> <span class="token string">&#39;./common/stylus/index.styl&#39;</span>

或style
 @<span class="token keyword">import</span> <span class="token string">&quot;assets/base.styl&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="vue-ls" tabindex="-1"><a class="header-anchor" href="#vue-ls" aria-hidden="true">#</a> vue.ls</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm install vue-ls --save
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Storage <span class="token keyword">from</span> <span class="token string">&#39;vue-ls&#39;</span><span class="token punctuation">;</span>
 
options <span class="token operator">=</span> <span class="token punctuation">{</span>
  namespace<span class="token operator">:</span> <span class="token string">&#39;vuejs__&#39;</span><span class="token punctuation">,</span> <span class="token comment">// key键前缀</span>
  name<span class="token operator">:</span> <span class="token string">&#39;ls&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 命名Vue变量.[ls]或this.[$ls],</span>
  storage<span class="token operator">:</span> <span class="token string">&#39;local&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 存储名称: session, local, memory</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Storage<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 或 Vue.use(Storage);</span>
 
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">mounted</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Vue<span class="token punctuation">.</span>ls<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;boo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置有效期</span>
        Vue<span class="token punctuation">.</span>ls<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;boo&#39;</span><span class="token punctuation">,</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//有效1小时</span>
        Vue<span class="token punctuation">.</span>ls<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Vue<span class="token punctuation">.</span>ls<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;boo&#39;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 无boo则设置boo默认值为10 </span>
        
        <span class="token keyword">let</span> <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> oldVal<span class="token punctuation">,</span> url</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;localStorage change&#39;</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> 
        
        Vue<span class="token punctuation">.</span>ls<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token comment">//监听改变foo键并触发回调 </span>
        Vue<span class="token punctuation">.</span>ls<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token comment">//删除监听</span>
        
        Vue<span class="token punctuation">.</span>ls<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 移除</span>
        Vue<span class="token punctuation">.</span>ls<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//清除</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Global<span class="token operator">:</span>Vue<span class="token punctuation">.</span>ls
Context<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>$ls
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="获取图片主题色" tabindex="-1"><a class="header-anchor" href="#获取图片主题色" aria-hidden="true">#</a> 获取图片主题色</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>olorthief<span class="token punctuation">.</span>js
 <span class="token keyword">var</span> colorThief <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ColorThief</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;load&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">var</span> colorlist <span class="token operator">=</span> colorThief<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;bannerwrap&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">rgba(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>colorlist<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>colorlist<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>colorlist<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,1)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>crossOrigin <span class="token operator">=</span> <span class="token string">&#39;Anonymous&#39;</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> newsrc<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h1 id="vue渲染render" tabindex="-1"><a class="header-anchor" href="#vue渲染render" aria-hidden="true">#</a> vue渲染render()</h1><p>https://www.jianshu.com/p/7508d2a114d3</p><h2 id="一、vue渲染方式" tabindex="-1"><a class="header-anchor" href="#一、vue渲染方式" aria-hidden="true">#</a> 一、vue渲染方式</h2><ul><li><strong>独立构建</strong>：包含模板编译器，渲染过程<code>HTML字符串 → render函数 → VNode → 真实DOM节点</code></li><li><strong>运行时构建</strong>：不包含模板编译器，渲染过程<code>render函数 → VNode → 真实DOM节点</code></li></ul><p>运行时构建的包，会比独立构建少一个模板编译器。在<code>$mount</code>函数上也不同。而<code>$mount</code>方法又是整个渲染过程的起始点。用一张流程图来说明：</p><p><img src="https://upload-images.jianshu.io/upload_images/13429147-7f193c6cb2e36da0.png?imageMogr2/auto-orient/strip|imageView2/2/format/webp" alt="img"></p><h3 id="_1-自定义render函数" tabindex="-1"><a class="header-anchor" href="#_1-自定义render函数" aria-hidden="true">#</a> 1. 自定义<code>render函数</code></h3><h4 id="非单页写法" tabindex="-1"><a class="header-anchor" href="#非单页写法" aria-hidden="true">#</a> 非单页写法：</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;anchored-heading&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">createElement</span> <span class="token punctuation">(</span>
            <span class="token string">&#39;h&#39;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>level<span class="token punctuation">,</span>   <span class="token comment">// tag name标签名称</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>default <span class="token comment">// 子组件中的阵列</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span> <span class="token punctuation">{</span>
        level<span class="token operator">:</span> <span class="token punctuation">{</span>
            type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
            required<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="vue-cli写法" tabindex="-1"><a class="header-anchor" href="#vue-cli写法" aria-hidden="true">#</a> vue-cli写法：</h4><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>.vue文件
去掉<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>即可


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">btn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;bbb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span>
      <span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">&quot;menb&quot;</span><span class="token punctuation">,</span>
        attrs<span class="token operator">:</span> <span class="token punctuation">{</span>
          id<span class="token operator">:</span> <span class="token string">&quot;boo&quot;</span><span class="token punctuation">,</span>
          data<span class="token operator">:</span> <span class="token string">&quot;789&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// domProps: {</span>
        <span class="token comment">//   innerText: &quot;啦啦啦&quot;</span>
        <span class="token comment">// }</span>
        on<span class="token operator">:</span> <span class="token punctuation">{</span>
          click<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>btn
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hellso&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lalla&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>导入：
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>menA <span class="token operator">/</span><span class="token operator">&gt;</span>    
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token keyword">import</span> menA <span class="token keyword">from</span> <span class="token string">&#39;./menB&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	components<span class="token operator">:</span><span class="token punctuation">{</span>
	menA
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="jsx写法" tabindex="-1"><a class="header-anchor" href="#jsx写法" aria-hidden="true">#</a> jsx写法：</h4><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            title<span class="token operator">:</span><span class="token string">&#39;我们&#39;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            jsxjsx,</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_2-template写法" tabindex="-1"><a class="header-anchor" href="#_2-template写法" aria-hidden="true">#</a> 2. <code>template</code>写法</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;{{ msg }}&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            msg<span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_3-el写法" tabindex="-1"><a class="header-anchor" href="#_3-el写法" aria-hidden="true">#</a> 3. <code>el</code>写法</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span><span class="token punctuation">,</span>
    <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            msg<span class="token operator">:</span> <span class="token string">&#39;Hello Vue!&#39;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="二、vue-createelement" tabindex="-1"><a class="header-anchor" href="#二、vue-createelement" aria-hidden="true">#</a> 二、Vue.createElement</h2><h3 id="_1-参数" tabindex="-1"><a class="header-anchor" href="#_1-参数" aria-hidden="true">#</a> 1. 参数:</h3><ul><li><h4 id="param-1-string-object-function-元素" tabindex="-1"><a class="header-anchor" href="#param-1-string-object-function-元素" aria-hidden="true">#</a> param-1: <code>{String | Object | Function}</code> 元素</h4></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>#String 
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>custom<span class="token operator">-</span>element<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>custom<span class="token operator">-</span>element<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;custom-element&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><img src="https://upload-images.jianshu.io/upload_images/13429147-eb35f142664bda0c.png?imageMogr2/auto-orient/strip|imageView2/2/format/webp" alt="img"></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>#Object 
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;custom-element&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;Hello Vue!&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>#Function
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;custom-element&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> <span class="token function-variable function">eleFun</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;Hello Vue!&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token function">eleFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>param-2: <code>{Object}</code> 元素属性</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>custom<span class="token operator">-</span>element<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>custom<span class="token operator">-</span>element<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;custom-element&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span>

        <span class="token comment">// 第一个参数是一个简单的HTML标签字符 “必选”</span>
        <span class="token comment">// 第二个参数是一个包含模板相关属性的数据对象 “可选”</span>
        <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token string">&#39;class&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                foo<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                bar<span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            style<span class="token operator">:</span> <span class="token punctuation">{</span>
                color<span class="token operator">:</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">,</span>
                fontSize<span class="token operator">:</span> <span class="token string">&#39;14px&#39;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            attrs<span class="token operator">:</span> <span class="token punctuation">{</span>
                id<span class="token operator">:</span> <span class="token string">&#39;boo&#39;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            domProps<span class="token operator">:</span> <span class="token punctuation">{</span>
                innerHTML<span class="token operator">:</span> <span class="token string">&#39;Hello Vue!&#39;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><ul><li>param-3: <code>{String | Array}</code> 可选 子元素</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>custom<span class="token operator">-</span>element<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>custom<span class="token operator">-</span>element<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;custom-element&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span>

        <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span>
            <span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 第一个参数是一个简单的HTML标签字符 “必选”</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">class</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    title<span class="token operator">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                style<span class="token operator">:</span> <span class="token punctuation">{</span>
                    border<span class="token operator">:</span> <span class="token string">&#39;1px solid&#39;</span><span class="token punctuation">,</span>
                    padding<span class="token operator">:</span> <span class="token string">&#39;10px&#39;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 第二个参数是一个包含模板相关属性的数据对象 “可选”</span>
            <span class="token punctuation">[</span>
                <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;h1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Hello Vue!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;p&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;开始学习Vue!&#39;</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span> <span class="token comment">// 第三个参数是传了多个子元素的一个数组 “可选”</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="_2-属性" tabindex="-1"><a class="header-anchor" href="#_2-属性" aria-hidden="true">#</a> 2.属性</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token comment">// 和`v-bind:class`一样的 API</span>
  <span class="token comment">// 接收一个字符串、对象或字符串和对象组成的数组</span>
  <span class="token string">&#39;class&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    foo<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    bar<span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 和`v-bind:style`一样的 API</span>
  <span class="token comment">// 接收一个字符串、对象或对象组成的数组</span>
  style<span class="token operator">:</span> <span class="token punctuation">{</span>
    color<span class="token operator">:</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">,</span>
    fontSize<span class="token operator">:</span> <span class="token string">&#39;14px&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 正常的 HTML 特性</span>
  attrs<span class="token operator">:</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">&#39;foo&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 组件 props</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    myProp<span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// DOM 属性</span>
  domProps<span class="token operator">:</span> <span class="token punctuation">{</span>
    innerHTML<span class="token operator">:</span> <span class="token string">&#39;baz&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 事件监听器基于 `on`</span>
  <span class="token comment">// 所以不再支持如 `v-on:keyup.enter` 修饰器</span>
  <span class="token comment">// 需要手动匹配 keyCode。</span>
  on<span class="token operator">:</span> <span class="token punctuation">{</span>
    click<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clickHandler
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 仅对于组件，用于监听原生事件，而不是组件内部使用</span>
  <span class="token comment">// `vm.$emit` 触发的事件。</span>
  nativeOn<span class="token operator">:</span> <span class="token punctuation">{</span>
    click<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nativeClickHandler
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 自定义指令。注意，你无法对 `binding` 中的 `oldValue`</span>
  <span class="token comment">// 赋值，因为 Vue 已经自动为你进行了同步。</span>
  directives<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#39;my-custom-directive&#39;</span><span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span>
      expression<span class="token operator">:</span> <span class="token string">&#39;1 + 1&#39;</span><span class="token punctuation">,</span>
      arg<span class="token operator">:</span> <span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span>
      modifiers<span class="token operator">:</span> <span class="token punctuation">{</span>
        bar<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 作用域插槽格式</span>
  <span class="token comment">// { name: props =&gt; VNode | Array&lt;VNode&gt; }</span>
  scopedSlots<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;span&#39;</span><span class="token punctuation">,</span> props<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 如果组件是其他组件的子组件，需为插槽指定名称</span>
  slot<span class="token operator">:</span> <span class="token string">&#39;name-of-slot&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// 其他特殊顶层属性</span>
  key<span class="token operator">:</span> <span class="token string">&#39;myKey&#39;</span><span class="token punctuation">,</span>
  ref<span class="token operator">:</span> <span class="token string">&#39;myRef&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><h2 id="三、挂载方式" tabindex="-1"><a class="header-anchor" href="#三、挂载方式" aria-hidden="true">#</a> 三、挂载方式</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> MyComponent <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token string">&#39;&lt;div&gt;Hello!&lt;/div&gt;&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 创建并挂载到 #app (会替换 #app)</span>
<span class="token keyword">new</span> <span class="token class-name">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 同上</span>
<span class="token keyword">new</span> <span class="token class-name">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span> el<span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 或者，在文档之外渲染并且随后挂载</span>
<span class="token keyword">var</span> component <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;app&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>component<span class="token punctuation">.</span>$el<span class="token punctuation">)</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h1 id="vue-extend" tabindex="-1"><a class="header-anchor" href="#vue-extend" aria-hidden="true">#</a> Vue-extend()</h1><p>​ Vue.extend({ })</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token keyword">const</span> testComponent <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token string">&#39;&lt;div&gt;{{ text }}&lt;/div&gt;&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      text<span class="token operator">:</span> <span class="token string">&#39;extend test&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token number">1.</span>
<span class="token comment">//手动渲染</span>
<span class="token keyword">const</span> extendComponent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">testComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//可以通过 $el 属性来访问 extendComponent 组件实例</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>extendComponent<span class="token punctuation">.</span>$el<span class="token punctuation">)</span>

<span class="token number">2.</span>渲染并挂载
<span class="token keyword">new</span> <span class="token class-name">testComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">&#39;#boxId&#39;</span><span class="token punctuation">)</span>

<span class="token number">3.</span>作为组件挂载到#box
<span class="token keyword">let</span> todowarp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">testComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;todo&#39;</span><span class="token punctuation">,</span> todoWarp<span class="token punctuation">)</span>
<span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
         el<span class="token operator">:</span> <span class="token string">&quot;#box&quot;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token number">4.</span>vue<span class="token operator">-</span>cli
<span class="token keyword">let</span> Todowarp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">testComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
extend defalut <span class="token punctuation">{</span>
	components<span class="token operator">:</span><span class="token punctuation">{</span>
    	Todowarp
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>new.extend({})合并规则</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> myVue <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token comment">// 预设选项</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">myVue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token comment">// 其他选项</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

实例化<span class="token keyword">extends</span>组件构造器时传入的属性必须是propsDate<span class="token punctuation">,</span>而不是props
<span class="token keyword">new</span> <span class="token class-name">testComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	propData<span class="token operator">:</span><span class="token punctuation">{</span>
        text<span class="token operator">:</span><span class="token string">&#39;dd&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">myVue</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>后会合并预设选项和其他选项中的所有属性选项：

<span class="token number">1.</span><span class="token function">data数据对象在内部会进行浅合并</span> <span class="token punctuation">(</span>一层属性深度<span class="token punctuation">)</span>。

<span class="token number">2.</span>钩子函数会先执行预设选项中的

<span class="token number">3.</span>值为对象的选项，例如 methods<span class="token punctuation">,</span> components 将被混合为同一个对象，两个对象键名冲突时，会以<span class="token keyword">new</span> <span class="token class-name">myVue</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>对象的选项为准。

<span class="token function">注意：混入</span> <span class="token punctuation">(</span>mixins<span class="token punctuation">)</span> 也使用同样的策略进行合并。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>应用:</p><blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">.</span>vue

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>transition name<span class="token operator">=</span><span class="token string">&quot;fade&quot;</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message&quot;</span> <span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;type&quot;</span> v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">&quot;show&quot;</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;icon&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;text&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>transition<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/ecmascript-6&quot;</span><span class="token operator">&gt;</span>
 <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
   name<span class="token operator">:</span> <span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span>
   props<span class="token operator">:</span> <span class="token punctuation">{</span>
     type<span class="token operator">:</span> <span class="token punctuation">{</span>
       type<span class="token operator">:</span> String<span class="token punctuation">,</span>
       <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&#39;info&#39;</span><span class="token punctuation">,</span>
       <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string">&#39;info&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;success&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;warning&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;error&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
<span class="token comment">//[&#39;info&#39;, &#39;success&#39;, &#39;warning&#39;, &#39;error&#39;] 表示type只接收这四个字符串作为参数传入message组件</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     text<span class="token operator">:</span> <span class="token punctuation">{</span>
       type<span class="token operator">:</span> String<span class="token punctuation">,</span>
       <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     show<span class="token operator">:</span> <span class="token punctuation">{</span>
       type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
       <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>index<span class="token punctuation">.</span>js
<span class="token keyword">import</span> Message <span class="token keyword">from</span> <span class="token string">&#39;./Message.vue&#39;</span>

<span class="token keyword">const</span> <span class="token constant">MESSAGE</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
 duration<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token comment">// 显示的时间 ms</span>
 animateTime<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token comment">// 动画时间,表示这个组件切换show的动画时间</span>
 <span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">&#39;undefined&#39;</span> <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>Vue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     Vue <span class="token operator">=</span> window<span class="token punctuation">.</span>Vue
   <span class="token punctuation">}</span>
   Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;Message&#39;</span><span class="token punctuation">,</span> Message<span class="token punctuation">)</span>

   <span class="token keyword">function</span> <span class="token function">msg</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> text<span class="token punctuation">,</span> callBack</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">let</span> msg
     <span class="token keyword">let</span> duration <span class="token operator">=</span> <span class="token constant">MESSAGE</span><span class="token punctuation">.</span>duration
     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> text <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       msg <span class="token operator">=</span> text
     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>text <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       msg <span class="token operator">=</span> text<span class="token punctuation">.</span>text <span class="token operator">||</span> <span class="token string">&#39;&#39;</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>text<span class="token punctuation">.</span>duration<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         duration <span class="token operator">=</span> text<span class="token punctuation">.</span>duration
       <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">let</span> VueMessage <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
       <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">let</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
           type<span class="token punctuation">,</span>
           text<span class="token operator">:</span> msg<span class="token punctuation">,</span>
           show<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>show
         <span class="token punctuation">}</span>
         <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>props<span class="token punctuation">}</span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> <span class="token punctuation">{</span>
           show<span class="token operator">:</span> <span class="token boolean">false</span>
         <span class="token punctuation">}</span>
       <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token keyword">let</span> newMessage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token keyword">let</span> vm <span class="token operator">=</span> newMessage<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token keyword">let</span> el <span class="token operator">=</span> vm<span class="token punctuation">.</span>$el
     document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token comment">// 把生成的提示的dom插入body中</span>
     vm<span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">true</span>
     <span class="token keyword">let</span> t1 <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token function">clearTimeout</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span>
       vm<span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span>  <span class="token comment">//隐藏提示组件，此时会有300ms的动画效果，等动画效果过了再从body中移除dom</span>
       <span class="token keyword">let</span> t2 <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token function">clearTimeout</span><span class="token punctuation">(</span>t2<span class="token punctuation">)</span>
         document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token comment">//从body中移除dom</span>
         newMessage<span class="token punctuation">.</span><span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         vm <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// 设置为null，好让js垃圾回收算法回收，释放内存</span>

         callBack <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callBack <span class="token operator">===</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">callBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
     <span class="token comment">// 如果有回调函数就执行，没有就不执行，用&amp;&amp;操作符，</span>
     <span class="token comment">// 只有&amp;&amp;左边 的代码为true才执行&amp;&amp;右边的代码，避免用面条代码：</span>
     <span class="token comment">// if(true){</span>
     <span class="token comment">//   ... </span>
     <span class="token comment">//   if(true){</span>
     <span class="token comment">//   ...</span>
     <span class="token comment">//   }</span>
     <span class="token comment">// }</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token constant">MESSAGE</span><span class="token punctuation">.</span>animateTime<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span> duration<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>

<span class="token comment">// 挂载到vue原型上，暴露四个方法</span>
   <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$message <span class="token operator">=</span> <span class="token punctuation">{</span>
     <span class="token function">info</span><span class="token punctuation">(</span><span class="token parameter">text<span class="token punctuation">,</span> callBack</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>text<span class="token punctuation">)</span> <span class="token keyword">return</span>
       <span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">&#39;info&#39;</span><span class="token punctuation">,</span> text<span class="token punctuation">,</span> callBack<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">text<span class="token punctuation">,</span> callBack</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>text<span class="token punctuation">)</span> <span class="token keyword">return</span>
       <span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">&#39;success&#39;</span><span class="token punctuation">,</span> text<span class="token punctuation">,</span> callBack<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token function">error</span><span class="token punctuation">(</span><span class="token parameter">text<span class="token punctuation">,</span> callBack</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>text<span class="token punctuation">)</span> <span class="token keyword">return</span>
       <span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> text<span class="token punctuation">,</span> callBack<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token function">warning</span><span class="token punctuation">(</span><span class="token parameter">text<span class="token punctuation">,</span> callBack</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>text<span class="token punctuation">)</span> <span class="token keyword">return</span>
       <span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">&#39;warning&#39;</span><span class="token punctuation">,</span> text<span class="token punctuation">,</span> callBack<span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token constant">MESSAGE</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> vMessage <span class="token keyword">from</span> <span class="token string">&#39;./components/Message/index&#39;</span> 
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>vMessage<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></blockquote><h1 id="vue-component" tabindex="-1"><a class="header-anchor" href="#vue-component" aria-hidden="true">#</a> vue.component</h1><p>vue.component用于全局注册组件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 注册组件，传入一个扩展过的构造器</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;my-component&#39;</span><span class="token punctuation">,</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 注册组件，传入一个选项对象 (自动调用 Vue.extend)</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;my-component&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 获取注册的组件 (始终返回构造器)</span>
<span class="token keyword">var</span> MyComponent <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;my-component&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h1 id="mixin" tabindex="-1"><a class="header-anchor" href="#mixin" aria-hidden="true">#</a> mixin</h1><p>来分发 Vue 组件中的可复用功能</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 定义一个混入对象</span>
<span class="token keyword">var</span> myMixin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">created</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;hello from mixin!&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 定义一个使用混入对象的组件</span>
<span class="token keyword">var</span> Component <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  mixins<span class="token operator">:</span> <span class="token punctuation">[</span>myMixin<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> component <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;hello from mixin!&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_1-基础用法" tabindex="-1"><a class="header-anchor" href="#_1-基础用法" aria-hidden="true">#</a> 1.基础用法</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> mixin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token operator">:</span> <span class="token string">&#39;hello mixin&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;混入的钩子函数&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> mixin<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>index<span class="token punctuation">.</span>vue

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;myVue&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>span @click<span class="token operator">=</span><span class="token string">&quot;show&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">import</span> myMixin <span class="token keyword">from</span> <span class="token string">&#39;./mixin.js&#39;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#39;myVue&#39;</span><span class="token punctuation">,</span>
    mixins<span class="token operator">:</span> <span class="token punctuation">[</span>myMixin<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;组件自身的钩子函数&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_2-main-js中直接全局注册" tabindex="-1"><a class="header-anchor" href="#_2-main-js中直接全局注册" aria-hidden="true">#</a> 2.main.js中直接全局注册</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./App&#39;</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;全局混入的钩子函数&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* eslint-disable no-new */</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span> App <span class="token punctuation">}</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token string">&#39;&lt;App/&gt;&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_3-模块化注册" tabindex="-1"><a class="header-anchor" href="#_3-模块化注册" aria-hidden="true">#</a> 3.模块化注册</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;全局混入的钩子函数&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>main<span class="token punctuation">.</span>js
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./App&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> myMixin <span class="token keyword">from</span> <span class="token string">&#39;./mixin.js&#39;</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>myMixin<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* eslint-disable no-new */</span> 
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span> App <span class="token punctuation">}</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token string">&#39;&lt;App/&gt;&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h1 id="attrs-和-listeners" tabindex="-1"><a class="header-anchor" href="#attrs-和-listeners" aria-hidden="true">#</a> $attrs 和 $listeners</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>$attrs 所有组件标签中的行内属性<span class="token punctuation">,</span>除<span class="token keyword">class</span>和style

组件内调用<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>$attrs<span class="token punctuation">;</span>
如何组件内某个标签用<span class="token operator">:</span>
父<span class="token operator">:</span><span class="token operator">&lt;</span>son <span class="token operator">:</span>data<span class="token operator">=</span><span class="token string">&quot;data&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>son<span class="token operator">&gt;</span>
子<span class="token operator">:</span>
<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>  <span class="token comment">//根标签也会继承</span>
	<span class="token operator">&lt;</span>input v<span class="token operator">-</span>bind<span class="token operator">:</span>$attrs<span class="token operator">&gt;</span>    
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
取消根标签继承<span class="token operator">:</span>禁用特性继承
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    inheritAttrs<span class="token operator">:</span><span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>$listeners

子接收<span class="token operator">:</span><span class="token operator">&lt;</span>input v<span class="token operator">-</span>on<span class="token operator">=</span><span class="token string">&quot;$listeners&quot;</span><span class="token operator">&gt;</span> 
    <span class="token comment">//接收所有父组件写在子组件的事件</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h1 id="options" tabindex="-1"><a class="header-anchor" href="#options" aria-hidden="true">#</a> $options</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$options 获取data外得值

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span><span class="token string">&#39;拉拉&#39;</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">{</span>
            
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">btn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name <span class="token comment">// 拉拉</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h1 id="spa单页面" tabindex="-1"><a class="header-anchor" href="#spa单页面" aria-hidden="true">#</a> SPA单页面</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>预留<span class="token operator">:</span>什么是<span class="token constant">SSR</span>服务端渲染
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>router<span class="token punctuation">.</span>vuejs<span class="token punctuation">.</span>org<span class="token operator">/</span>zh<span class="token operator">/</span>installation<span class="token punctuation">.</span>html
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>vue Router
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 使用 router-link 组件来导航. --&gt;</span>
            <span class="token comment">&lt;!-- 通过传入 `to` 属性指定链接. --&gt;</span>
            <span class="token comment">&lt;!-- &lt;router-link&gt; 默认会被渲染成一个 `&lt;a&gt;` 标签 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/haha<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>哈哈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/hehe<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>呵呵<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/xixi<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>嘻嘻<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/lala<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>啦啦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 路由出口 --&gt;</span>
        <span class="token comment">&lt;!-- 路由匹配到的组件将渲染在这里 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./lib/vue.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./lib/vue-router.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 定义 (路由) 组件</span>
    <span class="token keyword">const</span> MyBox1 <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                msg<span class="token operator">:</span> <span class="token string">&quot;学好vue&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        template<span class="token operator">:</span> <span class="token string">&quot;&lt;div&gt;&lt;p&gt;{{msg}}&lt;/p&gt;&lt;img src=&#39;./images/1.png&#39;&gt;&lt;/div&gt;&quot;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> MyBox2 <span class="token operator">=</span> <span class="token punctuation">{</span>
        template<span class="token operator">:</span> <span class="token string">&quot;&lt;div&gt;&lt;img src=&#39;./images/2.png&#39;&gt;&lt;/div&gt;&quot;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> MyBox3 <span class="token operator">=</span> <span class="token punctuation">{</span>
        template<span class="token operator">:</span> <span class="token string">&quot;&lt;div&gt;&lt;img src=&#39;./images/3.png&#39;&gt;&lt;/div&gt;&quot;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> MyBox4 <span class="token operator">=</span> <span class="token punctuation">{</span>
        template<span class="token operator">:</span> <span class="token string">&quot;&lt;div&gt;&lt;img src=&#39;./images/3.png&#39;&gt;&lt;/div&gt;&quot;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2. 定义路由</span>
    <span class="token comment">// 每个路由应该映射一个组件</span>
    <span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">&#39;/haha&#39;</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> MyBox1
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">&#39;/hehe&#39;</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> MyBox2
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">&#39;/xixi&#39;</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> MyBox3
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">&#39;/lala&#39;</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> MyBox4
    <span class="token punctuation">}</span><span class="token punctuation">]</span>

    <span class="token comment">// 3. 创建 router 实例，然后传 `routes` 配置</span>
    <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
       <span class="token comment">// routes // (缩写) 相当于 routes: routes</span>
        routes<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">&#39;/haha&#39;</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> MyBox1
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">&#39;/hehe&#39;</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> MyBox2
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">&#39;/xixi&#39;</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> MyBox3
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">&#39;/lala&#39;</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> MyBox4
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
        path<span class="token operator">:</span><span class="token string">&#39;/long&#39;</span><span class="token punctuation">,</span>
        redirect<span class="token operator">:</span><span class="token string">&#39;/long&#39;</span> <span class="token comment">// 重定向默认地址</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        linkActiveClass
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
	
   

    <span class="token comment">// 4. 创建和挂载根实例。</span>
    <span class="token comment">// 记得要通过 router 配置参数注入路由，</span>
    <span class="token comment">// 从而让整个应用都有路由功能</span>
    <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
        router
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br></div></div><h2 id="编程式导航" tabindex="-1"><a class="header-anchor" href="#编程式导航" aria-hidden="true">#</a> 编程式导航</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>声明式导航
&lt;a href=&quot;/run&quot;&gt;aa&lt;/a&gt;
&lt;router-link to=&quot;/run&quot;&gt;aa&lt;/router-link&gt;
编程式导航
window.location.href = &quot;地址&quot;
router.push(&#39;地址&#39;)
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
    path<span class="token operator">:</span> <span class="token string">&#39;register&#39;</span><span class="token punctuation">,</span> <span class="token comment">//路径地址</span>
    query<span class="token operator">:</span> <span class="token punctuation">{</span> 
        plan<span class="token operator">:</span> <span class="token string">&#39;private&#39;</span> <span class="token comment">//路径参数</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//输出 /register?plan=private</span>


<span class="token comment">// 字符串</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;home&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 对象</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;home&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 命名的路由</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span> userId<span class="token operator">:</span> <span class="token string">&#39;123&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 带查询参数，变成 /register?key=value</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;register&#39;</span><span class="token punctuation">,</span> query<span class="token operator">:</span> <span class="token punctuation">{</span> key<span class="token operator">:</span> <span class="token string">&#39;value&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span>params<span class="token punctuation">.</span>key

 <span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/results/:key&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> results
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="实现原理" tabindex="-1"><a class="header-anchor" href="#实现原理" aria-hidden="true">#</a> 实现原理</h2><blockquote><p>1.History API</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>pushState <span class="token comment">//添加历史</span>
onpopstate 事件	<span class="token comment">//响应</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2.hash</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>location<span class="token punctuation">.</span>hash <span class="token comment">//</span>
hashchange <span class="token comment">//监听地址变化</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></blockquote><h1 id="vue-component-组件" tabindex="-1"><a class="header-anchor" href="#vue-component-组件" aria-hidden="true">#</a> VUE-Component 组件</h1><p>组件化与模块化的不同：</p><p>模块化：是从代码逻辑的角度进行分析，方便代码分层开发，保证每个功能模块的只能单一</p><p>组件化：是从UI界面的角度进行划分，前端的组件化，方便UI组件的重用。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&#39;html/text&#39;</span> id<span class="token operator">=</span><span class="token string">&quot;tempid&quot;</span><span class="token operator">&gt;</span>  <span class="token comment">//type=&quot;text/x-component&quot;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token comment">//和正常vue操作</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span>mymsg<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment">//kuku</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment">//bbb</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span>mymsg2<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment">//aaa</span>
    
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>	<span class="token comment">//只能一个父标签,不能有父元素同级</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;my-box&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token comment">//建议使用带-</span>
	<span class="token function-variable function">data</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span><span class="token punctuation">{</span>
			msg<span class="token operator">:</span><span class="token string">&#39;ddd&#39;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	template<span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;p&gt;kukuku {{msg}}&lt;/p&gt;</span><span class="token template-punctuation string">`</span></span>拼接方法
    <span class="token comment">//template:&quot;#tempid&quot;//引用方法  推荐</span>
    props<span class="token operator">:</span><span class="token punctuation">{</span>
    	mymsg<span class="token operator">:</span><span class="token punctuation">{</span><span class="token comment">//属性名</span>
			type<span class="token operator">:</span>String<span class="token punctuation">,</span><span class="token comment">//Array</span>
    		<span class="token function-variable function">default</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    			<span class="token keyword">return</span> <span class="token string">&#39;aaaa&#39;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
        mymsg2<span class="token operator">:</span><span class="token punctuation">{</span><span class="token comment">//属性名</span>
			type<span class="token operator">:</span>String<span class="token punctuation">,</span><span class="token comment">//Array</span>
    		<span class="token function-variable function">default</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    			<span class="token keyword">return</span> <span class="token string">&#39;aaaa&#39;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
        mymsg<span class="token operator">:</span>String<span class="token punctuation">,</span><span class="token comment">//限制父传过来的数据类型</span>
        mymsg<span class="token operator">:</span><span class="token punctuation">{</span>
            type<span class="token operator">:</span>Number<span class="token punctuation">,</span>
            required<span class="token operator">:</span><span class="token boolean">true</span> <span class="token comment">//必须传</span>
	<span class="token punctuation">}</span>
    或<span class="token operator">:</span>
	props<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#39;mymsg&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token operator">:</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span><span class="token punctuation">{</span>
        msg<span class="token operator">:</span><span class="token string">&quot;bbb&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> 

<span class="token operator">&lt;</span>my<span class="token operator">-</span>box mymsg<span class="token operator">=</span><span class="token string">&quot;kuku&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>box<span class="token operator">&gt;</span> <span class="token comment">//html中调用 </span>
<span class="token operator">&lt;</span>my<span class="token operator">-</span>box <span class="token operator">:</span>mymsg2<span class="token operator">=</span><span class="token string">&quot;msg&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>box<span class="token operator">&gt;</span>  <span class="token comment">//属性:绑定后可以用父的data的值,和组件中props return的值</span>
<span class="token operator">&lt;</span>my<span class="token operator">-</span>box <span class="token operator">:</span>mymsg2<span class="token operator">=</span><span class="token string">&quot;mymsg2&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>box<span class="token operator">&gt;</span> 

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h2 id="_1-组件的创建方式" tabindex="-1"><a class="header-anchor" href="#_1-组件的创建方式" aria-hidden="true">#</a> 1.组件的创建方式</h2><h3 id="_1-vue-component" tabindex="-1"><a class="header-anchor" href="#_1-vue-component" aria-hidden="true">#</a> 1.vue.component</h3><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;my-component&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token string">&#39;&lt;div&gt;A custom component!&lt;/div&gt;&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token operator">:</span> <span class="token string">&#39;#example&#39;</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
       
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-vue-component-2" tabindex="-1"><a class="header-anchor" href="#_2-vue-component-2" aria-hidden="true">#</a> 2.vue.component - 2</h3><p><code>Vue.component</code> 返回的结果是一个 <code>function</code>！它返回的并不是 组件实例，而是一个构造函数。</p><p>那到这里其实我们就清楚了。 对于 <code>Vue.component</code> 声明的组件，我们先通过 <code>Vue.component</code> 获取它的构造函数，再 <code>new</code> 出一个组件实例，最后 通过<code>$mount</code> 挂载到 <code>html</code> 上。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;button-counter&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      count<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span>
    <span class="token string">&#39;&lt;button v-on:click=&quot;count++&quot;&gt;You clicked me {{ count }} times.&lt;/button&gt;&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      count<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span>
    <span class="token string">&#39;&lt;div&gt; &lt;h1&gt;App Component&lt;/h1&gt;&lt;button @click=&quot;insert&quot;&gt;click to insert new Component&lt;/button&gt; &lt;div id=&quot;appId&quot;&gt; &lt;/div&gt;&lt;/div&gt;&#39;</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> component <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;button-counter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      instance<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">&quot;#appId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="_3-vue-extend" tabindex="-1"><a class="header-anchor" href="#_3-vue-extend" aria-hidden="true">#</a> 3.vue.extend({ })</h3><p>通过传入一个包含 <code>Component options</code> 的对象， <code>Vue.extend</code> 帮助我们创建一个 继承了 <code>Vue constructor</code> 的子类，也就是我们需要的构造函数。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> MyComponent <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token string">&#39;&lt;div&gt;A custom component!&lt;/div&gt;&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 注册</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;my-component&#39;</span><span class="token punctuation">,</span> MyComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token operator">:</span> <span class="token string">&#39;#example&#39;</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 创建构造器</span>
<span class="token keyword">var</span> Profile <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token string">&#39;&lt;p&gt;{{firstName}} {{lastName}} aka {{alias}}&lt;/p&gt;&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      firstName<span class="token operator">:</span> <span class="token string">&#39;Walter&#39;</span><span class="token punctuation">,</span>
      lastName<span class="token operator">:</span> <span class="token string">&#39;White&#39;</span><span class="token punctuation">,</span>
      alias<span class="token operator">:</span> <span class="token string">&#39;Heisenberg&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 创建 Profile 实例，并挂载到一个元素上。</span>
<span class="token keyword">new</span> <span class="token class-name">Profile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">&#39;#mount-point&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_4-vm-mount" tabindex="-1"><a class="header-anchor" href="#_4-vm-mount" aria-hidden="true">#</a> 4.vm.$mount</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> MyComponent <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token string">&#39;&lt;div&gt;Hello!&lt;/div&gt;&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 创建并挂载到 #app (会替换 #app)</span>
<span class="token keyword">new</span> <span class="token class-name">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 同上</span>
<span class="token keyword">new</span> <span class="token class-name">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span> el<span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 或者，在文档之外渲染并且随后挂载</span>
<span class="token keyword">var</span> component <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;app&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>component<span class="token punctuation">.</span>$el<span class="token punctuation">)</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_5-template" tabindex="-1"><a class="header-anchor" href="#_5-template" aria-hidden="true">#</a> 5.template</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app1&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>my<span class="token operator">-</span>love<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>love<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template id<span class="token operator">=</span><span class="token string">&quot;temp-com&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>使用template定义的组件<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>使用template定义的组件的内容！<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;my-love&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    template<span class="token operator">:</span> <span class="token string">&#39;#temp-com&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_6-使用script定义" tabindex="-1"><a class="header-anchor" href="#_6-使用script定义" aria-hidden="true">#</a> 6.使用script定义</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app1&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>my<span class="token operator">-</span>love<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>love<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/template&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;temp-com&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>使用template定义的组件<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>使用template定义的组件的内容！<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;my-love&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    template<span class="token operator">:</span> <span class="token string">&#39;#temp-com&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_7-vue-cli组件挂载方式" tabindex="-1"><a class="header-anchor" href="#_7-vue-cli组件挂载方式" aria-hidden="true">#</a> 7.vue-cli组件挂载方式</h3><p>通过传入一个包含 <code>Component options</code> 的对象， <code>Vue.extend</code> 帮助我们创建一个 继承了 <code>Vue constructor</code> 的子类，也就是我们之前需要的构造函数。 （传入一个组件，获取构造函数）</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>img width<span class="token operator">=</span><span class="token string">&quot;25%&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;./assets/logo.png&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;insert&quot;</span><span class="token operator">&gt;</span>click me to insert ButtonCounter<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> ButtonCounter <span class="token keyword">from</span> <span class="token string">&#39;./components/ButtonCounter&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    ButtonCounter<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> bcConstructor <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>ButtonCounter<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bcConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      instance<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">&#39;#container&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>组件构造函数的构造实例.$mount进行挂载。</p><p>$mount为构造实例的方法。</p><h2 id="_2-组件传值" tabindex="-1"><a class="header-anchor" href="#_2-组件传值" aria-hidden="true">#</a> 2.组件传值</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>在组件中的使用props中设置 自定义属性名 、html调用组件中 设置同名自定义属性名<span class="token punctuation">,</span>绑定v<span class="token operator">-</span>bind后<span class="token punctuation">,</span>可调用父data里的数据
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="子向父传" tabindex="-1"><a class="header-anchor" href="#子向父传" aria-hidden="true">#</a> 子向父传</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sonapp&quot;</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>son @click<span class="token operator">=</span><span class="token string">&#39;myclick&#39;</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>son<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token comment">//子组件</span>
methods<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">myclick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;func&#39;</span><span class="token punctuation">,</span>datanum<span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token comment">//func为父的绑定的自定义事件</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

    
<span class="token comment">//父组件</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	el<span class="token operator">:</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
	data<span class="token operator">:</span><span class="token punctuation">{</span>
	
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token function">showfn</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span><span class="token operator">...</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span><span class="token punctuation">{</span>
        son
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">//父</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>son @func<span class="token operator">=</span><span class="token string">&#39;showfn&#39;</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>son<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>son @func<span class="token operator">=</span><span class="token string">&#39;txt=$event&#39;</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>son<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="子父-父子相互传" tabindex="-1"><a class="header-anchor" href="#子父-父子相互传" aria-hidden="true">#</a> 子父,父子相互传</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>子<span class="token operator">:</span>

<span class="token operator">&lt;</span>input <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&#39;msg&#39;</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> @input<span class="token operator">=</span><span class="token string">&quot;$emit(&#39;change&#39;,$event.target.value)&quot;</span><span class="token operator">&gt;</span>
    
    props<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#39;msg&#39;</span><span class="token punctuation">]</span>

父<span class="token operator">:</span>
<span class="token operator">&lt;</span>son @change<span class="token operator">=</span><span class="token string">&quot;text=$event&quot;</span>  <span class="token operator">:</span>msg<span class="token operator">=</span><span class="token string">&quot;txt&quot;</span><span class="token operator">&gt;</span>
    
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    components<span class="token operator">:</span><span class="token punctuation">{</span>
        son
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            txt<span class="token operator">:</span><span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><blockquote></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
父<span class="token operator">:</span>
语法糖<span class="token operator">:</span>他会帮你生成一段代码
<span class="token comment">// &lt;son @change=&quot;txt = $event&quot; :msg=&quot;txt&quot;&gt;&lt;/son&gt; 相当于此</span>
<span class="token operator">&lt;</span>son v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;txt&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>son<span class="token operator">&gt;</span>
<span class="token operator">--</span><span class="token operator">-</span>

子<span class="token operator">:</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&#39;text&#39;</span> <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&#39;msg&#39;</span> @input<span class="token operator">=</span><span class="token string">&quot;$emit(&#39;change&#39;,$event.target.value)&quot;</span><span class="token operator">&gt;</span>
<span class="token comment">//如果不是原生标签$event即可</span>
props<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#39;msg&#39;</span><span class="token punctuation">]</span>
<span class="token comment">//子组件写model 父调用时会自动生成</span>
<span class="token comment">//&lt;son @change=&#39;txt=$event&#39; :msg=&quot;txt&quot;&gt;&lt;/son&gt;</span>
model<span class="token operator">:</span><span class="token punctuation">{</span>
	prop<span class="token operator">:</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span>
	event<span class="token operator">:</span><span class="token string">&quot;change&quot;</span>
<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token comment">//每个组件都有model,event默认值是input;prop的默认值是value</span>
model<span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">//默认如下</span>
    event<span class="token operator">:</span><span class="token string">&#39;input&#39;</span>
<span class="token punctuation">}</span>

默认下的简写
子<span class="token operator">:</span>
<span class="token operator">&lt;</span>input <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;value&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> @input<span class="token operator">=</span><span class="token string">&quot;$emit(&#39;input&#39;,$event.target.value)&quot;</span><span class="token operator">&gt;</span> 
    props<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#39;value&#39;</span><span class="token punctuation">]</span>

父<span class="token operator">:</span>
<span class="token operator">&lt;</span>son v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;txt&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>son<span class="token operator">&gt;</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
父
<span class="token operator">&lt;</span>my<span class="token operator">-</span>comp v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;checked&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>comp<span class="token operator">&gt;</span>

子<span class="token operator">:</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;MyComp&#39;</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;checked&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  model<span class="token operator">:</span> <span class="token punctuation">{</span>
    prop<span class="token operator">:</span> <span class="token string">&#39;checked&#39;</span><span class="token punctuation">,</span>
    event<span class="token operator">:</span> <span class="token string">&#39;change&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h2 id="_3-组件传参方式" tabindex="-1"><a class="header-anchor" href="#_3-组件传参方式" aria-hidden="true">#</a> 3.组件传参方式</h2><h3 id="_1-prop" tabindex="-1"><a class="header-anchor" href="#_1-prop" aria-hidden="true">#</a> 1.prop</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1.</span>父组件中定义值<span class="token punctuation">;</span>
<span class="token number">2.</span>调用子组件并引用<span class="token punctuation">;</span>
<span class="token number">3.</span>在引用的标签上给子组件传值。

父<span class="token operator">:</span>
<span class="token operator">&lt;</span>child message<span class="token operator">=</span><span class="token string">&quot;我是子组件一！&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>child<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>child v<span class="token operator">-</span>bind<span class="token operator">:</span>message<span class="token operator">=</span><span class="token string">&quot;msg&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>child<span class="token operator">&gt;</span>

子<span class="token operator">:</span>
 <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
 	props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">]</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>props<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token comment">// 基础的类型检查 (`null` 和 `undefined` 会通过任何类型验证)</span>
propA<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  
<span class="token comment">// 多个可能的类型</span>
propB<span class="token operator">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">,</span> Number<span class="token punctuation">]</span><span class="token punctuation">,</span>
  
<span class="token comment">// 必填的字符串</span>
propC<span class="token operator">:</span> <span class="token punctuation">{</span>
type<span class="token operator">:</span> String<span class="token punctuation">,</span>
required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//必填</span>
<span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">100</span>		<span class="token comment">//默认值</span>
  <span class="token function-variable function">default</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment">//如默认为object则用函数写法</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>     
  
<span class="token comment">// 带有默认值的对象</span>
propE<span class="token operator">:</span> <span class="token punctuation">{</span>
type<span class="token operator">:</span> Object<span class="token punctuation">,</span>
<span class="token comment">// 对象或数组默认值必须从一个工厂函数获取</span>
<span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">&#39;hello&#39;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
  
<span class="token comment">// 自定义验证函数</span>
propF<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 这个值必须匹配下列字符串中的一个</span>
      <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">&#39;success&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;warning&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;danger&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div></blockquote><h3 id="_2-ref" tabindex="-1"><a class="header-anchor" href="#_2-ref" aria-hidden="true">#</a> 2.$ref</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>父<span class="token operator">:</span>
<span class="token operator">&lt;</span>child ref<span class="token operator">=</span><span class="token string">&quot;msg&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>child<span class="token operator">&gt;</span>
    <span class="token function-variable function">mounted</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      	<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>msg<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token string">&#39;啦啦！&#39;</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
 
 子<span class="token operator">:</span>
     methods<span class="token operator">:</span><span class="token punctuation">{</span>
      	<span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      		<span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token operator">=</span>m<span class="token punctuation">;</span> <span class="token comment">//啦啦！</span>
      	<span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_3-emit-子-父" tabindex="-1"><a class="header-anchor" href="#_3-emit-子-父" aria-hidden="true">#</a> 3.<strong>$emit</strong> 子 =&gt; 父</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>子<span class="token operator">:</span>
 <span class="token function-variable function">mounted</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;getMessage&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;我是父组件！&#39;</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>

父<span class="token operator">:</span>
<span class="token operator">&lt;</span>child @getMessage<span class="token operator">=</span><span class="token string">&quot;showMsg&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>child<span class="token operator">&gt;</span>

methods<span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token function">showMsg</span><span class="token punctuation">(</span><span class="token parameter">title</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  	<span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token operator">=</span>title<span class="token punctuation">;</span> <span class="token comment">//我是父组件！</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_4-bus" tabindex="-1"><a class="header-anchor" href="#_4-bus" aria-hidden="true">#</a> 4.bus</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//bus.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">import</span> Bus <span class="token keyword">from</span> <span class="token string">&#39;./bus.js&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token function-variable function">elementByValue</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;val&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elementValue<span class="token punctuation">)</span>
       <span class="token punctuation">}</span><span class="token comment">//val 自定义事件 </span>
  	<span class="token punctuation">}</span>
 <span class="token punctuation">}</span>

<span class="token keyword">import</span> Bus <span class="token keyword">from</span> <span class="token string">&#39;./bus.js&#39;</span>
 Bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&#39;val&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> data
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_5-问题" tabindex="-1"><a class="header-anchor" href="#_5-问题" aria-hidden="true">#</a> 5.问题</h3><p>1.子组件props获取不到父组件异步数据</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>方法一、 子组件watch 监听
方法二、 父组件 给子组件 加 <span class="token keyword">if</span>
方法三、 子组件加宏异步
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>2.强制刷新方法</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span>key<span class="token operator">/</span>index<span class="token punctuation">,</span>newData<span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$forceUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_4-vue子组件调用父组件的方法" tabindex="-1"><a class="header-anchor" href="#_4-vue子组件调用父组件的方法" aria-hidden="true">#</a> 4.Vue子组件调用父组件的方法</h2><p>https://www.cnblogs.com/jin-zhe/p/9523782.html</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>第一种方法是直接在子组件中通过<span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span>event来调用父组件的方法

<span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">fatherMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//fatherMethod 组件中的方法</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>第二种在子组件里用$emit向父组件触发一个事件

<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;fatherMethod&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>第三种是父组件把方法传入子组件中，在子组件里直接调用这个方法
利用props传入
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_5-组件缓存方法" tabindex="-1"><a class="header-anchor" href="#_5-组件缓存方法" aria-hidden="true">#</a> 5.组件缓存方法</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>使用keep<span class="token operator">-</span>alive 钩子执行顺序
beforeRouteEnter <span class="token operator">--</span><span class="token operator">&gt;</span> created <span class="token operator">--</span><span class="token operator">&gt;</span> mounted <span class="token operator">--</span><span class="token operator">&gt;</span> activated <span class="token operator">--</span><span class="token operator">&gt;</span> deactivated
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>无keep<span class="token operator">-</span>alive  钩子执行顺序
beforeRouteEnter <span class="token operator">--</span><span class="token operator">&gt;</span>activated <span class="token operator">--</span><span class="token operator">&gt;</span> deactivated 
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_1-标签包裹方法" tabindex="-1"><a class="header-anchor" href="#_1-标签包裹方法" aria-hidden="true">#</a> 1.标签包裹方法</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>组件缓存
include <span class="token operator">-</span> 字符串或正则表达，只有匹配的组件会被缓存
exclude <span class="token operator">-</span> 字符串或正则表达式，任何匹配的组件都不会被缓存

<span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive include<span class="token operator">=</span><span class="token string">&quot;组件名&quot;</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>组件<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive exclude<span class="token operator">=</span><span class="token string">&quot;组件名&quot;</span><span class="token operator">&gt;</span> <span class="token comment">//不被缓存</span>
	<span class="token operator">&lt;</span>组件<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>


如父级也被销毁<span class="token punctuation">,</span>则父级组件也要被keep<span class="token operator">-</span>alive包着<span class="token punctuation">;</span>

会用到的钩子
activated 	<span class="token function">组件被激活时调用</span><span class="token punctuation">(</span>能看到的<span class="token punctuation">)</span>
deactivated 	<span class="token function">组件被移除时调用</span><span class="token punctuation">(</span>离开<span class="token punctuation">,</span>看不到的<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>原理:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>created钩子会创建一个cache对象，用来作为缓存容器，保存vnode节点。

<span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 缓存对象 */</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
destroyed钩子则在组件被销毁的时候清除cache缓存中的所有组件实例。

<span class="token comment">/* destroyed钩子中销毁所有cache中的组件实例 */</span>
<span class="token function">destroyed</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">pruneCacheEntry</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_2-router-meta方法" tabindex="-1"><a class="header-anchor" href="#_2-router-meta方法" aria-hidden="true">#</a> 2.router.meta方法</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token operator">-</span>view 也是一个组件，所有路径匹配到的视图组件都会被
<span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 所有路径匹配到的视图组件都会被缓存！ <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>​ 解决办法1</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive include<span class="token operator">=</span><span class="token string">&quot;a&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 只有路径匹配到的视图 a 组件会被缓存！ <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></blockquote><blockquote><p>​ 解决办法2</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>增加 router<span class="token punctuation">.</span>meta 属性
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span>
 <span class="token punctuation">{</span>
   path<span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span>
   name<span class="token operator">:</span> <span class="token string">&#39;home&#39;</span><span class="token punctuation">,</span>
   component<span class="token operator">:</span> Home<span class="token punctuation">,</span>
   meta<span class="token operator">:</span> <span class="token punctuation">{</span>
     keepAlive<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 需要被缓存</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
   path<span class="token operator">:</span> <span class="token string">&#39;/:id&#39;</span><span class="token punctuation">,</span>
   name<span class="token operator">:</span> <span class="token string">&#39;edit&#39;</span><span class="token punctuation">,</span>
   component<span class="token operator">:</span> Edit<span class="token punctuation">,</span>
   meta<span class="token operator">:</span> <span class="token punctuation">{</span>
     keepAlive<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 不需要被缓存</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>router<span class="token operator">-</span>view v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;$route.meta.keepAlive&quot;</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 这里是会被缓存的视图组件，比如 Home！ <span class="token operator">--</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>router<span class="token operator">-</span>view v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!$route.meta.keepAlive&quot;</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 这里是不被缓存的视图组件，比如 Edit！ <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></blockquote><h4 id="_3-路由导航守卫" tabindex="-1"><a class="header-anchor" href="#_3-路由导航守卫" aria-hidden="true">#</a> 3.路由导航守卫</h4><p>​ 需求:</p><ul><li>B 跳到 A，A 不刷新</li><li>C 跳到 A，A 刷新</li></ul><blockquote><ol><li>在 A 路由里面设置 <em>meta</em> 属性：</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
       path<span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span>
       name<span class="token operator">:</span> <span class="token string">&#39;A&#39;</span><span class="token punctuation">,</span>
       component<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">,</span>
       meta<span class="token operator">:</span> <span class="token punctuation">{</span>
           keepAlive<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 需要被缓存</span>
       <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="2"><li>在 B 组件里面设置 <em>beforeRouteLeave</em>：</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
       <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
       methods<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 设置下一个路由的 meta</span>
           to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>keepAlive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token comment">// 让 A 缓存，即不刷新</span>
           <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol start="3"><li>在 C 组件里面设置 <em>beforeRouteLeave</em>：</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
       <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
       methods<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token comment">// 设置下一个路由的 meta</span>
           to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>keepAlive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 让 A 不缓存，即刷新</span>
           <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></blockquote><h4 id="_4-缓存解决方案" tabindex="-1"><a class="header-anchor" href="#_4-缓存解决方案" aria-hidden="true">#</a> 4.缓存解决方案</h4><p><a href="https://blog.csdn.net/liangcha007/article/details/84763438" target="_blank" rel="noopener noreferrer">参考<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">4.1</span>前进刷新<span class="token operator">&gt;</span>后退不刷新
​<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">js
&lt;keep-alive&gt;
    &lt;router-view v-if=&quot;$route.meta.keepAlive&quot;&gt;
&lt;/router-view&gt;
&lt;/keep-alive&gt;
    &lt;router-view v-if=&quot;!$route.meta.keepAlive&quot;&gt;
&lt;/router-view&gt;
​</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>

js
<span class="token keyword">var</span> routerList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> keepAlived <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;dispatchIndex&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;serviceIndex&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;manageIndex&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> li <span class="token operator">=</span> routerList<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>li <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> routerList<span class="token punctuation">[</span>li <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> to<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 后退</span>
    routerList<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>routerList<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>keepAlived<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>from<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      from<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>keepAlive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 前进</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ctool<span class="token punctuation">.</span><span class="token function">strIsEmpty</span><span class="token punctuation">(</span>from<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      routerList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>from<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>keepAlived<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>keepAlive<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>keepAlive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>keepAlive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>keepAlived<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>from<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        from<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>keepAlive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;-------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token number">4.2</span>后退可能需要刷新

<span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive <span class="token operator">:</span>include<span class="token operator">=</span><span class="token string">&quot;includedComponents&quot;</span> <span class="token operator">:</span>exclude<span class="token operator">=</span><span class="token string">&quot;excludedComponents&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>

computed<span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token function">includedComponents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>includedComponents<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">excludedComponents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>excludedComponents<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

 <span class="token operator">-</span>main<span class="token punctuation">.</span>js
<span class="token keyword">var</span> routerList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span>from<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> li <span class="token operator">=</span> routerList<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>includedComponents<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>li <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> routerList<span class="token punctuation">[</span>li <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> to<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">/*
      如果发现to.name等于list中当前最后一个，则说明是返回操作。
      返回操作的时候，第一步是从list中清掉第一个路由对象。
      第二步是判断一下当前的from.name是不是在缓存属性中，在的话，就从里面拿掉，因为下一次进入的时候，
      要重新刷新。
     */</span>
    routerList<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>routerList<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>includedComponents<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>from<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;rm&#39;</span><span class="token punctuation">,</span>from<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
      store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;removeInclude&#39;</span><span class="token punctuation">,</span>from<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
      store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;addToExclude&#39;</span><span class="token punctuation">,</span>from<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ctool<span class="token punctuation">.</span><span class="token function">strIsEmpty</span><span class="token punctuation">(</span>from<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      routerList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>from<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>excludedComponents<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;ad&#39;</span><span class="token punctuation">,</span>to<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;removeExclude&#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;addToInclude&#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token operator">-</span>vuex
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> vuex <span class="token keyword">from</span> <span class="token string">&#39;vuex&#39;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
  includedComponents<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#39;dispatchIndex&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;serviceIndex&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;manageIndex&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  excludedComponents<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">const</span> mutations  <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">removeInclude</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>str</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>includedComponents<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>includedComponents<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">addToInclude</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>str</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>includedComponents<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">removeExclude</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>str</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>excludedComponents<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>excludedComponents<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">addToExclude</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>str</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>excludedComponents<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">var</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span>state<span class="token punctuation">,</span>
  mutations<span class="token operator">:</span>mutations
<span class="token punctuation">}</span><span class="token punctuation">)</span>
 
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>

	<span class="token operator">-</span>utils<span class="token punctuation">.</span>js
<span class="token function-variable function">clearCache</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">router_name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;removeInclude&#39;</span><span class="token punctuation">,</span>router_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;addToExclude&#39;</span><span class="token punctuation">,</span>router_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

调用修改
ctool<span class="token punctuation">.</span><span class="token function">clearCache</span><span class="token punctuation">(</span><span class="token string">&#39;B&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ctool挂载在windows上全局对象</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br></div></div><h2 id="_6-动态组件" tabindex="-1"><a class="header-anchor" href="#_6-动态组件" aria-hidden="true">#</a> 6.动态组件</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>components is<span class="token operator">=</span><span class="token string">&quot;组件名&quot;</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>components<span class="token operator">&gt;</span> <span class="token comment">//所有的组件,is指定组件,:is判断显示</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="_7-异步组件" tabindex="-1"><a class="header-anchor" href="#_7-异步组件" aria-hidden="true">#</a> 7.异步组件</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>通过导入方式来生实现
正常写法<span class="token operator">:</span>
<span class="token keyword">import</span> login <span class="token keyword">from</span> <span class="token string">&quot;./login&quot;</span>

异步写法<span class="token operator">:</span>
<span class="token keyword">const</span> <span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./login&#39;</span><span class="token punctuation">)</span> <span class="token comment">//按需才加载 懒加载;</span>

components<span class="token operator">:</span><span class="token punctuation">{</span>
<span class="token comment">//****</span>
    <span class="token function-variable function">login</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">&#39;./login&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//方式1</span>
    <span class="token function-variable function">login</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">require</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;./login&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>resolve<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//方式2</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">//import()返回promise,利用promise的then执行异步</span>
<span class="token keyword">const</span> <span class="token function-variable function">fn</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./ddd.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fn<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//返回不是promise,利用普通的回调执行异步</span>
<span class="token keyword">const</span> <span class="token function-variable function">fn</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">require</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;./ddd.vue&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    
 <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/test&#39;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;test&quot; */</span> <span class="token string">&#39;@/views/test&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>   
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="_8-边界情况" tabindex="-1"><a class="header-anchor" href="#_8-边界情况" aria-hidden="true">#</a> 8.边界情况</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">-</span> $root ：    找到vue根实例
<span class="token operator">-</span> $parent： 找到它的父组件
<span class="token operator">-</span> $children：只是找到儿子们
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_9-递归组件" tabindex="-1"><a class="header-anchor" href="#_9-递归组件" aria-hidden="true">#</a> 9.递归组件</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ul <span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">&quot;dataBaseTree&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span> <span class="token operator">=</span> <span class="token string">&quot;(item,index) in folder&quot;</span> <span class="token operator">:</span>key <span class="token operator">=</span> <span class="token string">&quot;index&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span @click <span class="token operator">=</span> <span class="token string">&quot;select(item)&quot;</span> <span class="token operator">:</span><span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">&quot;{&#39;active&#39;:currentId == item.id}&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>i <span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">&quot;folderIcon&quot;</span> v<span class="token operator">-</span><span class="token keyword">if</span> <span class="token operator">=</span> <span class="token string">&quot;item.children&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>icon <span class="token operator">:</span>icon <span class="token operator">=</span> <span class="token string">&quot;&#39;xiala&#39;&quot;</span> v<span class="token operator">-</span><span class="token keyword">if</span> <span class="token operator">=</span> <span class="token string">&quot;item.show&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>icon<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>icon <span class="token operator">:</span>icon <span class="token operator">=</span> <span class="token string">&quot;&#39;xiala2&#39;&quot;</span> v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>icon<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token punctuation">{</span> item<span class="token punctuation">.</span>label <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>collapse<span class="token operator">-</span>transition<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>DatabaseTree v<span class="token operator">-</span><span class="token keyword">if</span> <span class="token operator">=</span> <span class="token string">&quot;item.children &amp;&amp; item.show&quot;</span> <span class="token operator">:</span>folder <span class="token operator">=</span> <span class="token string">&quot;item.children&quot;</span> <span class="token operator">:</span>select <span class="token operator">=</span> <span class="token string">&quot;select&quot;</span> <span class="token operator">:</span>currentId <span class="token operator">=</span> <span class="token string">&quot;currentId&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>DatabaseTree<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>collapse<span class="token operator">-</span>transition<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> mapGetters <span class="token punctuation">,</span> mapActions<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vuex&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
        name<span class="token operator">:</span><span class="token string">&quot;DatabaseTree&quot;</span><span class="token punctuation">,</span>
        props<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;folder&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;select&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;currentId&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">{</span>
                addParams<span class="token operator">:</span><span class="token punctuation">{</span>
                    label<span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                    children<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                noteData<span class="token operator">:</span><span class="token punctuation">{</span>
                    children<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
         computed<span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;catalog&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        methods<span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h1 id="vue-cli-脚手架" tabindex="-1"><a class="header-anchor" href="#vue-cli-脚手架" aria-hidden="true">#</a> VUE-CLI 脚手架</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>运行nodejs<span class="token operator">:</span>node <span class="token operator">-</span>v
安装<span class="token operator">:</span>npm install <span class="token operator">-</span>g @vue<span class="token operator">/</span>cli
创建项目<span class="token operator">:</span> vue create 文件名
运行<span class="token operator">:</span>npm run serve

查看webpack配置：
npx vue<span class="token operator">-</span>cli<span class="token operator">-</span>service serve <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>entry<span class="token punctuation">]</span>

<span class="token comment">//查看production配置，并输出到webpack.config.production.js 文件</span>
<span class="token comment">//加入module.exports ={ }包住，index后加“：”格式化即可无报错。</span>
npx vue<span class="token operator">-</span>cli<span class="token operator">-</span>service inspect <span class="token operator">--</span>mode production <span class="token operator">&gt;&gt;</span> webpack<span class="token punctuation">.</span>config<span class="token punctuation">.</span>production<span class="token punctuation">.</span>js
npx vue<span class="token operator">-</span>cli<span class="token operator">-</span>service inspect <span class="token operator">--</span>mode development <span class="token comment">//查看development环境下cli的webpack配置</span>
npx vue<span class="token operator">-</span>cli<span class="token operator">-</span>service help serve  <span class="token comment">//帮助</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="build" tabindex="-1"><a class="header-anchor" href="#build" aria-hidden="true">#</a> build</h2><h3 id="_1-分析" tabindex="-1"><a class="header-anchor" href="#_1-分析" aria-hidden="true">#</a> 1.分析：</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env FILE_NAME=ui vue-cli-service build --report&quot;</span><span class="token punctuation">,</span>

packagejson中设置命令行 添加 --report

dist生成report<span class="token punctuation">,</span>html打开即可。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_2-打包优化" tabindex="-1"><a class="header-anchor" href="#_2-打包优化" aria-hidden="true">#</a> 2.打包优化</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>productionSourceMap<span class="token operator">:</span> <span class="token boolean">false</span>， <span class="token comment">//取消生成map文件</span>
productionGzip：<span class="token boolean">true</span>， <span class="token comment">//开启gzip压缩</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h1 id="vue-router-路由" tabindex="-1"><a class="header-anchor" href="#vue-router-路由" aria-hidden="true">#</a> VUE-Router 路由</h1><p>官方地址:https://router.vuejs.org/zh/guide/#html</p><p>安装:npm install --save vue-router</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>总结<span class="token operator">:</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//进行编程式路由跳转</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/login&quot;</span><span class="token operator">&gt;</span> <span class="token comment">//中的to属性进行路由切换</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>view <span class="token operator">/</span><span class="token operator">&gt;</span>  用于展示
<span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params 获取路由传递参数
<span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query	获取路由传递参数
<span class="token number">5.</span>params和query都是传递参数区别在于params不会再url上显示出现，
query则是我们通常看到的url后面跟上的？后跟的显示参数
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 路由重复点击异常处理</span>
<span class="token keyword">const</span> originalPush <span class="token operator">=</span> <span class="token class-name">Router</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>push
<span class="token class-name">Router</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">push</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token parameter">location</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">originalPush</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> location<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> err<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="vue-router路由" tabindex="-1"><a class="header-anchor" href="#vue-router路由" aria-hidden="true">#</a> vue-router路由</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Vue<span class="token operator">-</span>Router 是vue官方的路由管理器。
通过路由地址的变换展现不同的页面<span class="token punctuation">;</span>
路由导航有两种<span class="token operator">:</span>
	声明式导航<span class="token operator">:</span>router<span class="token operator">-</span>link
    编程式导航<span class="token operator">:</span>router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>path<span class="token operator">:</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span>

通过<span class="token operator">:</span>router<span class="token operator">-</span>view标签作为 页面展示区<span class="token punctuation">;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_1-组件导航创建" tabindex="-1"><a class="header-anchor" href="#_1-组件导航创建" aria-hidden="true">#</a> 1.组件导航创建</h3><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Hello App!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 使用 router-link 组件来导航. --&gt;</span>
    <span class="token comment">&lt;!-- 通过传入 `to` 属性指定链接. --&gt;</span>
    <span class="token comment">&lt;!-- &lt;router-link&gt; 默认会被渲染成一个 `&lt;a&gt;` 标签 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/foo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Go to Foo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/bar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Go to Bar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 路由出口 --&gt;</span>
  <span class="token comment">&lt;!-- 路由匹配到的组件将渲染在这里 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1. 定义 (路由) 组件。</span>
<span class="token comment">// 可以从其他文件 import 进来</span>
<span class="token keyword">const</span> Foo <span class="token operator">=</span> <span class="token punctuation">{</span> template<span class="token operator">:</span> <span class="token string">&#39;&lt;div&gt;foo&lt;/div&gt;&#39;</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> Bar <span class="token operator">=</span> <span class="token punctuation">{</span> template<span class="token operator">:</span> <span class="token string">&#39;&lt;div&gt;bar&lt;/div&gt;&#39;</span> <span class="token punctuation">}</span>

<span class="token comment">// 2. 定义路由</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/foo&#39;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Foo <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/bar&#39;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Bar <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token comment">// 3. 创建 router 实例，然后传 `routes` 配置</span>
<span class="token comment">// 你还可以传别的配置参数, 不过先这么简单着吧。</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes <span class="token comment">// (缩写) 相当于 routes: routes</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 4. 创建和挂载根实例。</span>
<span class="token comment">// 记得要通过 router 配置参数注入路由，</span>
<span class="token comment">// 从而让整个应用都有路由功能</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  router
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 带/则会当做根路径  不带/则会一直嵌套路径</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>独文件写法</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">router/index.js</span><span class="token template-punctuation string">`</span></span>

<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>

<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/foo&#39;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Foo <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/bar&#39;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Bar <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes <span class="token comment">// (缩写) 相当于 routes: routes</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span>from<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span>

exprot defalute router
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">main.js</span><span class="token template-punctuation string">`</span></span>

<span class="token keyword">import</span> router <span class="token keyword">from</span>  <span class="token string">&#39;./router/index.js&#39;</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
    router<span class="token punctuation">,</span>
    store
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-传参方式" tabindex="-1"><a class="header-anchor" href="#_2-传参方式" aria-hidden="true">#</a> 2.传参方式</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>一、
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/news&#39;</span><span class="token punctuation">,</span> query<span class="token operator">:</span> <span class="token punctuation">{</span> userId<span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
接收方式<span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>userId<span class="token punctuation">}</span><span class="token punctuation">}</span>

二、
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;news&#39;</span><span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span> userId<span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
接受方式<span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>userId<span class="token punctuation">}</span><span class="token punctuation">}</span>

三、 
	传参<span class="token operator">:</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token operator">:</span> <span class="token string">&#39;/foo/&#39;</span> <span class="token operator">+</span> <span class="token string">&#39;aaaa&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>path<span class="token operator">:</span> <span class="token string">&#39;/foo/:id&#39;</span><span class="token punctuation">,</span>component<span class="token operator">:</span> Foo<span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>path<span class="token operator">:</span> <span class="token string">&#39;/foo/:id/:name&#39;</span><span class="token punctuation">,</span>component<span class="token operator">:</span> Foo<span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token comment">//多个参数</span>
	接收<span class="token operator">:</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token comment">//输出aaaa</span>
	接受：<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span>params

四、prop解耦传参<span class="token punctuation">;</span>
    routes<span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
        path<span class="token operator">:</span><span class="token string">&#39;login/:id&#39;</span><span class="token punctuation">,</span>
        props<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span>login
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
        path<span class="token operator">:</span><span class="token string">&#39;login/:id&#39;</span><span class="token punctuation">,</span>
        props<span class="token operator">:</span><span class="token punctuation">{</span>
        	id<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
            age<span class="token operator">:</span><span class="token number">6</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span>login 
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
	接收方式<span class="token operator">:</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span><span class="token string">&#39;login&#39;</span><span class="token punctuation">,</span>
        props<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;age&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
五、指定固定参数
	<span class="token punctuation">{</span>
        path<span class="token operator">:</span><span class="token string">&#39;login/:id&#39;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">props</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">route</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            id<span class="token operator">:</span>route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>a<span class="token punctuation">,</span>
            age<span class="token operator">:</span>route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>b
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        component<span class="token operator">:</span>login
     <span class="token punctuation">}</span>
地址<span class="token operator">:</span>localhost<span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span>home<span class="token operator">/</span><span class="token operator">?</span>a<span class="token operator">=</span><span class="token number">1</span><span class="token operator">&amp;</span>b<span class="token operator">=</span><span class="token number">2</span>
 <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span><span class="token string">&#39;login&#39;</span><span class="token punctuation">,</span>
        props<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><blockquote><p>总结</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>总结：
<span class="token number">1.</span>params传递参数，需要使用name进行路由跳转，否则无法传递。
<span class="token number">2.</span>params传递参数刷新会丢失数据，<span class="token operator">/</span>router<span class="token operator">/</span><span class="token operator">:</span>id方式上的id除外
<span class="token number">3.</span>query显示拼接在url上，刷新不丢失，不是必须有，router<span class="token operator">/</span><span class="token operator">:</span>id方式则必须有id参数，否则无法正确进入视图。
<span class="token number">4.</span>props也可以传递参数，但传递的只能是静态参数。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></blockquote><h3 id="_3-children-子路由" tabindex="-1"><a class="header-anchor" href="#_3-children-子路由" aria-hidden="true">#</a> 3.children-子路由</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>子路由
routes<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
	path<span class="token operator">:</span><span class="token string">&#39;/index&#39;</span><span class="token punctuation">,</span>
	component<span class="token operator">:</span>template1<span class="token punctuation">,</span>
	name<span class="token operator">:</span><span class="token string">&#39;templatel&#39;</span><span class="token punctuation">,</span>
	children<span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          	path<span class="token operator">:</span><span class="token string">&#39;son&#39;</span><span class="token punctuation">,</span>
			component<span class="token operator">:</span><span class="token string">&#39;son&#39;</span>
        <span class="token punctuation">}</span>，
        <span class="token punctuation">{</span>
        	path：<span class="token string">&quot;/son&quot;</span><span class="token punctuation">,</span>
        	component<span class="token operator">:</span><span class="token string">&#39;xxx&#39;</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>

子路由带‘<span class="token operator">/</span>’与不带‘<span class="token operator">/</span>’区别：
带‘<span class="token operator">/</span>’：路由会解析为 baseUrl<span class="token operator">/</span>son；
不带’<span class="token operator">/</span>‘：路由会解析为：baseUrl<span class="token operator">/</span>index<span class="token operator">/</span>son
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="_4-导航守卫" tabindex="-1"><a class="header-anchor" href="#_4-导航守卫" aria-hidden="true">#</a> 4.导航守卫</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>导航守卫主要用来通过跳转或取消的方式守卫导航
全局的<span class="token punctuation">,</span> 单个路由独享的<span class="token punctuation">,</span> 或者组件级的。

全局路由<span class="token operator">:</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...去到每个路由之前执行</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//放行</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>

router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span><span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    当进到某个路由后触发的
<span class="token punctuation">}</span> <span class="token punctuation">)</span>


组件内的导航  
<span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span>from<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>全局守卫</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>全局前置守卫
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

全局解析守卫
router<span class="token punctuation">.</span>beforeResolve

全局后置钩子
router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>路由独享守卫</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">&#39;/foo&#39;</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> Foo<span class="token punctuation">,</span>
      <span class="token function-variable function">beforeEnter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>组件内守卫</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> Foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token function">beforeRouteEnter</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在渲染该组件的对应路由被 confirm 前调用</span>
    <span class="token comment">// 不！能！获取组件实例 `this`</span>
    <span class="token comment">// 因为当守卫执行前，组件实例还没被创建</span>
       <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">vm</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 通过 `vm` 访问组件实例</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    
  <span class="token function">beforeRouteUpdate</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在当前路由改变，但是该组件被复用时调用</span>
    <span class="token comment">// 举例来说，对于一个带有动态参数的路径 /foo/:id，在 /foo/1 和 /foo/2 之间跳转的时候，</span>
    <span class="token comment">// 由于会渲染同样的 Foo 组件，因此组件实例会被复用。而这个钩子就会在这个情况下被调用。</span>
    <span class="token comment">// 可以访问组件实例 `this`</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">这个离开守卫通常用来禁止用户在还未保存修改前突然离开。该导航可以通过 next(false) 来取消。</span><span class="token template-punctuation string">`</span></span>
    
  <span class="token function">beforeRouteLeave</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 导航离开该组件的对应路由时调用</span>
    <span class="token comment">// 可以访问组件实例 `this`</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="路由解析流程" tabindex="-1"><a class="header-anchor" href="#路由解析流程" aria-hidden="true">#</a> 路由解析流程?</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span>、导航被触发
<span class="token number">2</span>、在失活的组件里调用离开守卫 beforeRouterleave
<span class="token number">3</span>、调用全局的 beforeEach 守卫
<span class="token number">4</span>、在重用的组件里调用 beforeRouteUpdate 守卫
<span class="token number">5</span>、在路由配置里调用 beforEnter <span class="token comment">//路由独享</span>
<span class="token number">6</span>、解析异步路由组件
<span class="token number">7</span>、在被激活的组件里调用 beforeRouteEnter
<span class="token number">8</span>、调用全局的 beforeResolve 守卫
<span class="token number">9</span>、导航被确认
<span class="token number">10</span>、调用全局的 afterEach 钩子
<span class="token number">11</span>、触发 <span class="token constant">DOM</span> 更新
<span class="token number">12</span>、在创建好的实例调用 beforeRouteEnter 守卫中传给 next 的回调函数


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><img src="/jiji/assets/img/20190616165857285-1574860714128.a6c5bb12.png" alt="img"></p><ol><li><p>全局守卫</p><ul><li><p>router.beforeEach 全局前置守卫</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>to: Route:</code>即将要进入的目标 路由对象</p><p><code>from: Route:</code> 当前导航正要离开的路由</p><p>next: Function:<code>一定要调用该方法来</code>resolve<code>这个钩子。执行效果</code>依赖 next 方法的调用参数。</p></li><li><p>router.beforeResolve 全局解析守卫</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>在导航被确认之前，同时在所有组件内守卫和异步路由组件被解析之后，解析守卫就被调用。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>router. afterEach 全局后置钩子</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>不会接受 next 函数也不会改变导航本身：
router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol><p>​</p><ol start="3"><li><p>路由独享守卫</p><ul><li>beforeEnter</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">&#39;/foo&#39;</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> Foo<span class="token punctuation">,</span>
      <span class="token function-variable function">beforeEnter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li><li><p>组件内守卫</p><ul><li>beforeRouteEnter 不能获取组件实例this;next(vm=&gt;{可获取实例})</li><li>beforeRouteUpdate</li><li>beforeRouteLeave</li></ul></li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> Foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token function">beforeRouteEnter</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在渲染该组件的对应路由被 confirm 前调用</span>
    <span class="token comment">// 不！能！获取组件实例 `this`</span>
    <span class="token comment">// 因为当守卫执行前，组件实例还没被创建</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//不过，你可以通过传一个回调给 next来访问组件实例。</span>
  <span class="token comment">//在导航被确认的时候执行回调，并且把组件实例作为回调方法的参数。</span>
  <span class="token function">beforeRouteEnter</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">vm</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 通过 `vm` 访问组件实例</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeRouteUpdate</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在当前路由改变，但是该组件被复用时调用</span>
    <span class="token comment">// 举例来说，对于一个带有动态参数的路径 /foo/:id，在 /foo/1 和 /foo/2 之间跳转的时候，</span>
    <span class="token comment">// 由于会渲染同样的 Foo 组件，因此组件实例会被复用。而这个钩子就会在这个情况下被调用。</span>
    <span class="token comment">// 可以访问组件实例 `this`</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    <span class="token comment">//  该组件离开跳转到另外的组件时触发该钩子,常应用于用户表单，当用户填了一部分内容，需要提醒用户是否离开页面</span>
 <span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">beforeRouteLeave</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 导航离开该组件的对应路由时调用</span>
    <span class="token comment">// 可以访问组件实例 `this`</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h4 id="vue-router是如何响应-路由参数变化的" tabindex="-1"><a class="header-anchor" href="#vue-router是如何响应-路由参数变化的" aria-hidden="true">#</a> vue-router是如何响应 路由参数变化的:</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>blog<span class="token punctuation">.</span>csdn<span class="token punctuation">.</span>net<span class="token operator">/</span>weixin_41639609<span class="token operator">/</span>article<span class="token operator">/</span>details<span class="token operator">/</span><span class="token number">88721627</span> 
watch<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&#39;$route&#39;</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 对路由变化作出响应...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token function">beforeRouteUpdate</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// react to route changes...</span>
    <span class="token comment">// don&#39;t forget to call next()</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="route和-router的区别" tabindex="-1"><a class="header-anchor" href="#route和-router的区别" aria-hidden="true">#</a> $route和$router的区别</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>答：$route是“路由信息对象”，包括path，params，hash，query，fullPath，matched，name等路由信息参数。而$router是“路由实例”对象包括了路由的跳转方法，钩子函数等。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="_5-路由的原理" tabindex="-1"><a class="header-anchor" href="#_5-路由的原理" aria-hidden="true">#</a> 5.路由的原理</h3><h4 id="abstract模式" tabindex="-1"><a class="header-anchor" href="#abstract模式" aria-hidden="true">#</a> abstract模式:</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>服务器端和Node<span class="token punctuation">.</span>js<span class="token punctuation">.</span> 如果没有浏览器<span class="token constant">API</span>，路由器将自动强制进入此模式
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="hash模式" tabindex="-1"><a class="header-anchor" href="#hash模式" aria-hidden="true">#</a> hash模式</h4><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>1.就是指 url 尾巴后的 # 号以及后面的字符, 
	请求的时候不会被包含在 http 请求中 只会携带#之前的，
	所以每次改变hash不会重新请求加载页面
2.hash 改变会触发 hashchange 事件
3.hash变化会被浏览器记录，浏览器的前进和后退都能用。
3.能兼容到ie8

监听事件:hashchange事件

https://developer.mozilla.org/zh-CN/docs/Web/API/Location
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="实现" tabindex="-1"><a class="header-anchor" href="#实现" aria-hidden="true">#</a> 实现:</h5><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Router</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>routes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>currentUrl <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">route</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">=</span> callback <span class="token operator">||</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">updateView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>currentUrl <span class="token operator">=</span> location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUrl<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUrl<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;load&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateView</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;hashchange&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateView</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>about<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#/topics<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>topics<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>js/router.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  router<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  router<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;content&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;Home&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  router<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&#39;/about&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;content&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;About&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  router<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&#39;/topics&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;content&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;Topics&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h4 id="history模式" tabindex="-1"><a class="header-anchor" href="#history模式" aria-hidden="true">#</a> history模式</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1.</span>页面请求时会带上整个链接，所以后台需要做相对处理，不然返回<span class="token number">404</span>
<span class="token number">2.</span>不带#号<span class="token punctuation">,</span>请求时是整个链接<span class="token punctuation">,</span>所以需要服务器的支持把所有路由都重定向到根页面
<span class="token number">3.</span>怕刷新<span class="token punctuation">,</span>刷新请求<span class="token punctuation">,</span>需要服务端配合<span class="token punctuation">;</span>

以下会触发popstate<span class="token operator">:</span>
<span class="token number">1.</span>点击浏览器的前进或后退按钮
<span class="token number">2.</span>点击 a 标签
<span class="token number">3.</span>在 <span class="token constant">JS</span> 代码中触发 history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>replace<span class="token punctuation">)</span>State 函数


监听事件<span class="token operator">:</span>popstate

history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token number">1.</span>pushState url变化<span class="token punctuation">,</span>页面不会刷新<span class="token punctuation">;</span>只有back<span class="token punctuation">,</span>forward<span class="token punctuation">,</span>go会<span class="token punctuation">;</span>
	<span class="token number">2.</span>遵守同源策略<span class="token punctuation">;</span>
history<span class="token punctuation">.</span><span class="token function">replaceState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
history<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
history<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h5 id="实现-1" tabindex="-1"><a class="header-anchor" href="#实现-1" aria-hidden="true">#</a> 实现:</h5><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Router</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>routes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>currentUrl <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">route</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">=</span> callback <span class="token operator">||</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">updateView</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>currentUrl <span class="token operator">=</span> url<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUrl<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUrl<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">bindLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> allLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&#39;a[data-href]&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> allLink<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> current <span class="token operator">=</span> allLink<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      current<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
        <span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span>
        <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">const</span> url <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;data-href&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateView</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token boolean">false</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bindLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;popstate&#39;</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateView</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;load&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateView</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">data-href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">data-href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>about<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">data-href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/topics<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>topics<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>js/router.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  router<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  router<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;content&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;Home&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  router<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&#39;/about&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;content&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;About&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  router<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&#39;/topics&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;content&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;Topics&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_6-属性" tabindex="-1"><a class="header-anchor" href="#_6-属性" aria-hidden="true">#</a> 6.-属性</h3><h4 id="router" tabindex="-1"><a class="header-anchor" href="#router" aria-hidden="true">#</a> router</h4><ul><li>route为当前路由对象</li><li>router为VueRouter的实例</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1.</span>$router<span class="token punctuation">.</span>path   <span class="token comment">//当前路由的路径</span>
<span class="token number">2.</span>$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//</span>
<span class="token number">3.</span>$router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span> <span class="token comment">//</span>
<span class="token number">4.</span>$router<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//</span>
<span class="token number">5.</span>$router<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">,</span>append<span class="token operator">=</span><span class="token boolean">true</span><span class="token operator">/</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  location<span class="token operator">:</span> Location<span class="token punctuation">;</span>
  route<span class="token operator">:</span> Route<span class="token punctuation">;</span>
  href<span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> router<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>loction<span class="token punctuation">,</span>current<span class="token operator">?</span><span class="token punctuation">,</span>append<span class="token operator">?</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>解决$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">)</span>不能打开新页面
<span class="token keyword">let</span> routeData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/reportpreview&#39;</span><span class="token punctuation">,</span> query<span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> id <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>routeData<span class="token punctuation">.</span>href<span class="token punctuation">,</span> <span class="token string">&#39;_blank&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="route" tabindex="-1"><a class="header-anchor" href="#route" aria-hidden="true">#</a> route</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1.</span>$route<span class="token punctuation">.</span>params  <span class="token comment">//参数对象 动态片段和全匹配片段的键值对</span>
<span class="token number">2.</span>$route<span class="token punctuation">.</span>query   <span class="token comment">//路由中参数的键值对</span>
<span class="token number">3.</span>$route<span class="token punctuation">.</span>matched <span class="token comment">//当前匹配的路径中所包含的所有片段所对应的配置参数对象</span>
<span class="token number">4.</span>$route<span class="token punctuation">.</span>name    <span class="token comment">//路径的名字，如果没有使用具名路径</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_7-router-link的props属性" tabindex="-1"><a class="header-anchor" href="#_7-router-link的props属性" aria-hidden="true">#</a> 7.router-link的props属性</h3><h4 id="_1-to" tabindex="-1"><a class="header-anchor" href="#_1-to" aria-hidden="true">#</a> 1.to</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;‘home‘&quot;</span><span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;{ path: ‘home‘ }&quot;</span><span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>

<span class="token comment">//命名路由</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;{ name: ‘user‘, params: {userId: 123} }&quot;</span><span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>

<span class="token comment">//带查询参数，下面的结果为/register?plan=private--&gt;</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;{ path: ‘register‘, query: {plan: ‘private‘}}&quot;</span><span class="token operator">&gt;</span>Register<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_2-replace" tabindex="-1"><a class="header-anchor" href="#_2-replace" aria-hidden="true">#</a> 2.replace</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;{path: ‘/abc‘}&quot;</span> replace<span class="token operator">&gt;</span><span class="token constant">ABC</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>

会调用roter<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_3-append" tabindex="-1"><a class="header-anchor" href="#_3-append" aria-hidden="true">#</a> 3. append</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;b&quot;</span> append<span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>

设置append属性后，则在当前路径前添加基路径；
如：当前路由为<span class="token operator">/</span>index；则如上为<span class="token operator">/</span>index<span class="token operator">/</span>b
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_4-tag" tabindex="-1"><a class="header-anchor" href="#_4-tag" aria-hidden="true">#</a> 4. tag</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/foo&quot;</span> tag<span class="token operator">=</span><span class="token string">&quot;li&quot;</span><span class="token operator">&gt;</span><span class="token constant">FOO</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
<span class="token comment">// 渲染结果 </span>
<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token constant">FOO</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>

指定<span class="token operator">&lt;</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>渲染成某标签；
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_5-active-class" tabindex="-1"><a class="header-anchor" href="#_5-active-class" aria-hidden="true">#</a> 5.active-class</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> New <span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   linkActiveClass<span class="token operator">:</span> ‘active‘ 
<span class="token punctuation">}</span><span class="token punctuation">)</span>

设置链接激活时使用的css类名。默认值可以通过路由的构造选项linkActiveClass来全局配置<span class="token punctuation">,</span> 默认值为 ‘router<span class="token operator">-</span>link<span class="token operator">-</span>active‘
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_6-exact" tabindex="-1"><a class="header-anchor" href="#_6-exact" aria-hidden="true">#</a> 6.exact</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&quot;是否激活&quot;</span>，默认是<span class="token boolean">false</span> 。举个粟子，如果当前的路径是<span class="token operator">/</span>a 开头的，那么<span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/a&quot;</span><span class="token operator">&gt;</span> 也会被设置css类名

　　按照这个规则，<span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span><span class="token operator">&gt;</span> 将会点亮各个路由！想要链接使用<span class="token string">&quot;exact匹配模式&quot;</span>，则使用exact属性：
  
<span class="token comment">// 这个链接只会在地址为 / 的时候被激活 </span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> exact<span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/user&quot;</span><span class="token operator">&gt;</span><span class="token constant">USER</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/user/userinfo&quot;</span><span class="token operator">&gt;</span><span class="token constant">USER</span><span class="token operator">-</span>info<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>

<span class="token comment">// 如果不设置exact，则当路由到了/user/userinfo 页面时，USER也是被设置了router-link-active样式的！</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_7-events" tabindex="-1"><a class="header-anchor" href="#_7-events" aria-hidden="true">#</a> 7.events</h4><p>声明可以用来触发导航的事件（默认是‘click‘）。可以是一个字符串或者是一个包含字符串的数组</p><h4 id="_8、将-激活时的css类名-应用在外层元素" tabindex="-1"><a class="header-anchor" href="#_8、将-激活时的css类名-应用在外层元素" aria-hidden="true">#</a> 8、将&quot;激活时的css类名&quot;应用在外层元素</h4><p>有时候我们要让&quot;激活的css类名&quot;应用在外层元素，而不是&lt;a&gt;标签本身，那么可以用&lt;router-link&gt;渲染外层元素，包裹着内层的原生&lt;a&gt;标签</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>router<span class="token operator">-</span>link tag<span class="token operator">=</span><span class="token string">&quot;li&quot;</span> to<span class="token operator">=</span><span class="token string">&quot;/foo&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a\<span class="token operator">&gt;</span><span class="token operator">/</span>foo<span class="token operator">&lt;</span><span class="token operator">/</span>a\<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
<span class="token comment">//在这种情况下，&lt;a\&gt;将作为真实的链接（能获取到正确的href的），而&quot;激活时的css类名&quot;则设置到外层的&lt;li\&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_8-写法" tabindex="-1"><a class="header-anchor" href="#_8-写法" aria-hidden="true">#</a> 8.写法</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>正常写法<span class="token operator">:</span>

<span class="token keyword">import</span> login <span class="token keyword">from</span> <span class="token string">&#39;@/views/login&#39;</span>
<span class="token punctuation">{</span>
    path<span class="token operator">:</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span>login
   	name<span class="token operator">:</span>login
<span class="token punctuation">}</span><span class="token punctuation">;</span>

写法二<span class="token operator">:</span>
<span class="token keyword">const</span> <span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./login&#39;</span><span class="token punctuation">)</span>  <span class="token comment">//异步加载</span>
<span class="token punctuation">{</span>
    path<span class="token operator">:</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span>login
   	name<span class="token operator">:</span>login
<span class="token punctuation">}</span><span class="token punctuation">;</span>

写法三<span class="token operator">:</span>
<span class="token punctuation">{</span>
    path<span class="token operator">:</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/views/login&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//异步加载</span>
   	name<span class="token operator">:</span>login
<span class="token punctuation">}</span><span class="token punctuation">;</span>


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="_9-路由登陆判断" tabindex="-1"><a class="header-anchor" href="#_9-路由登陆判断" aria-hidden="true">#</a> 9.路由登陆判断</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>routes<span class="token operator">:</span>
<span class="token punctuation">[</span>
   <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">&#39;/cinema&#39;</span><span class="token punctuation">,</span>
      redirect<span class="token operator">:</span> <span class="token string">&#39;/page/cinema&#39;</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> BlankLayout<span class="token punctuation">,</span>
      meta<span class="token operator">:</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">&#39;影院&#39;</span> <span class="token punctuation">,</span> requiresAuth<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
      children<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          path<span class="token operator">:</span> <span class="token string">&#39;/cinema/plan&#39;</span><span class="token punctuation">,</span>
          name<span class="token operator">:</span> <span class="token string">&#39;cinemaPlan&#39;</span><span class="token punctuation">,</span>
          <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./views/cinema/Plan&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          meta<span class="token operator">:</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">&#39;影院排期&#39;</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          path<span class="token operator">:</span> <span class="token string">&#39;/cinema/cinemaDetail&#39;</span><span class="token punctuation">,</span>
          name<span class="token operator">:</span> <span class="token string">&#39;cinemaDetail&#39;</span><span class="token punctuation">,</span>
          <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./views/cinema/CinemaDetail&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          meta<span class="token operator">:</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">&#39;影院详情&#39;</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
       <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>引入
import Vue from  &#39;vue&#39;
import VueRouter from &#39;vue-router&#39;
Vue.use(VueRouter)

const router  = new VueRouter({ routes })

export router
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>to<span class="token punctuation">.</span>meta <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title <span class="token operator">!==</span> <span class="token string">&#39;undefined&#39;</span> <span class="token operator">&amp;&amp;</span> <span class="token function">setDocumentTitle</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>matched<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">record</span> <span class="token operator">=&gt;</span> record<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>requiresAuth<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// this route requires auth, check if logged in</span>
    <span class="token comment">// if not, redirect to login page.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span>
        query<span class="token operator">:</span> <span class="token punctuation">{</span> redirect<span class="token operator">:</span> to<span class="token punctuation">.</span>fullPath <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>query<span class="token punctuation">.</span>siteCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>from<span class="token punctuation">.</span>query<span class="token punctuation">.</span>siteCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">)</span>
        query<span class="token punctuation">.</span>siteCode <span class="token operator">=</span> from<span class="token punctuation">.</span>query<span class="token punctuation">.</span>siteCode
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          path<span class="token operator">:</span> to<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
          query<span class="token operator">:</span> query
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 确保一定要调用 next()</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
　<span class="token punctuation">}</span>
<span class="token number">2.</span>主要说明下为什么要使用遍历to<span class="token punctuation">.</span>matched数组判断meta的requiresAuth字段，而不直接使用to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>requiresAuth来判断，首先例子当中给的是cinema<span class="token punctuation">,</span>也即是<span class="token number">1</span>级路由设置了requiresAuth<span class="token punctuation">.</span>而cinemaPlan没有设置。假设两种情况：

　前提：vue路由匹配时会同时匹配满足情况的所有路由，即如果路由是‘<span class="token operator">/</span>cinema<span class="token operator">/</span>plan’的话，‘<span class="token operator">/</span>cinema’也会触发。另外如果较高等级的路由需要登录控制的话，它所有的嵌套路由都是基本需要登录控制的。

（<span class="token number">1</span>）cinema具有登录控制，而cinemaPlan 没有。如果用户正常点击路由跳转的话，它必然是先进一级路由，再去二级路由，一级路由实现登录控制，利用to<span class="token punctuation">.</span>meta是能够满足的，注意这里是用户正常点击，但是假如有用户直接改变url地址的话去访问cinemaPlan的话，则需要给cinemaPlan路由添加requiresAuth字段，同理也需要给cinemaDetail添加字段，如果路由比较多的话，就会很麻烦。

（<span class="token number">2</span>）cinema没有登录控制，而cinemaPlan有。这种情况确实不怕用户直接改变url访问二级路由了，但是同样如果过多二级路由，也是需要设置许多requiresAuth。

   所以，为了方便，直接遍历to<span class="token punctuation">.</span>matched数组，该数组中保存着匹配到的所有路由信息。就该例而言，访问cinema时，matched数组长度为<span class="token number">1</span>，访问cinemaPlan时，matched数组长度为<span class="token number">2</span>，即保存着‘<span class="token operator">/</span>cinema’以及‘<span class="token operator">/</span>cinema<span class="token operator">/</span>plan’。其实啰嗦了这么多，直接使用to<span class="token punctuation">.</span>meta判断字段也可以，就是需要给所有需要控制的路由添加requiresAuth。而to<span class="token punctuation">.</span>matched则只需要给较高一级的路由添加requiresAuth即可，其下的所有子路由不必添加。



</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><blockquote><p>some()</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>to<span class="token punctuation">.</span>matched<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">record</span> <span class="token operator">=&gt;</span> record<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>requiresAuth<span class="token punctuation">)</span>
<span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法用于检测数组中的元素是否满足指定条件（函数提供）
<span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法会依次执行数组的每个元素

<span class="token function">some</span><span class="token punctuation">(</span> <span class="token punctuation">)</span> 不会对空数组进行检测。
<span class="token function">some</span><span class="token punctuation">(</span> <span class="token punctuation">)</span> 不会改变原始数组。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></blockquote><h3 id="_10-路由跳转打开新页面方法" tabindex="-1"><a class="header-anchor" href="#_10-路由跳转打开新页面方法" aria-hidden="true">#</a> 10.路由跳转打开新页面方法</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>方法<span class="token number">1</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link target<span class="token operator">=</span><span class="token string">&quot;_blank&quot;</span> <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;{path:&#39;/home&#39;,query:{id:&#39;1&#39;}}&quot;</span><span class="token operator">&gt;</span>新页面打开home页<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>

方法<span class="token number">2</span><span class="token operator">:</span>
 <span class="token keyword">let</span> routeUrl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
     path<span class="token operator">:</span> <span class="token string">&quot;/share&quot;</span><span class="token punctuation">,</span>
     query<span class="token operator">:</span> <span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token number">96</span><span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>routeUrl<span class="token punctuation">.</span>href<span class="token punctuation">,</span> <span class="token string">&#39;_blank&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h1 id="vue-vuex-状态管理" tabindex="-1"><a class="header-anchor" href="#vue-vuex-状态管理" aria-hidden="true">#</a> VUE-Vuex 状态管理</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>安装<span class="token operator">:</span>npm install vuex <span class="token operator">--</span>save

https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>router<span class="token punctuation">.</span>vuejs<span class="token punctuation">.</span>org<span class="token operator">/</span>zh<span class="token operator">/</span>api<span class="token operator">/</span>#路由对象
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>页面通过mapAction异步提交事件到action。action通过commit把对应参数同步提交到mutation。 mutation会修改state中对应的值。 最后通过getter把对应值跑出去，在页面的计算属性中通过mapGetter来动态获取state中的值;
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>vuex持久化</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&quot;store&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">replaceState</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&quot;store&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">//在页面刷新时将vuex里的信息保存到localStorage里</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;beforeunload&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&quot;store&quot;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_1-创建" tabindex="-1"><a class="header-anchor" href="#_1-创建" aria-hidden="true">#</a> 1.创建:</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>src文件下创建 store文件夹
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">&#39;vuex&#39;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    state<span class="token operator">:</span> <span class="token punctuation">{</span>	<span class="token comment">//状态</span>
        userInfo<span class="token operator">:</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
            photo<span class="token operator">:</span><span class="token string">&#39;&#39;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>    
    
    mutations<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//方法,</span>
        <span class="token function">utationA</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>userInfo<span class="token punctuation">.</span>name <span class="token operator">=</span> user<span class="token punctuation">.</span>name
            state<span class="token punctuation">.</span>userInfo<span class="token punctuation">.</span>photo <span class="token operator">=</span> user<span class="token punctuation">.</span>photo
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    actions<span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">//放异步方法</span>
        <span class="token function">actionevent</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token comment">//context上下文 为store对象 </span>
          <span class="token comment">// context.commit, context.state, context.getters, context,.dispatch</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//或</span>
        <span class="token function">actionevent</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>commit<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 解构写法</span>
    		<span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;utationA&#39;</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    computed<span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">//解决引用繁长,调用直接用计算属性{{name}}</span>
        <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>userInfo<span class="token punctuation">.</span>name
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        
        <span class="token comment">// 需引入:import { mapGetters } from &#39;vuex&#39;</span>
        <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token string">&#39;namelen&#39;</span> <span class="token comment">//调用{{namelen}},调用getters中的namelen计算方法</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 对象写法,改变名称</span>
        <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            newName<span class="token operator">:</span><span class="token string">&#39;namelen&#39;</span> <span class="token comment">//调用{{namelen}},调用getters中的namelen计算方法</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// </span>
    getters<span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">//调用:$store.getters.namelen</span>
        <span class="token function">namelen</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">...</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
	
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><h4 id="组件分发方式" tabindex="-1"><a class="header-anchor" href="#组件分发方式" aria-hidden="true">#</a> 组件分发方式</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;xxx&#39;</span><span class="token punctuation">)</span>	<span class="token comment">// 分发mutations</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;xxx&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 分发action</span>

map分发<span class="token operator">:</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapState<span class="token punctuation">,</span> mapActions<span class="token punctuation">,</span>mapMutations <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vuex&#39;</span>
 computed<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">//将state映射 为 计算属性</span>
            <span class="token function-variable function">lang</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>lang<span class="token punctuation">,</span>
            <span class="token function-variable function">theme</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>theme
            <span class="token function-variable function">homemodule</span><span class="token operator">:</span> <span class="token parameter">state</span><span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>Home<span class="token punctuation">.</span>homemodule
            <span class="token comment">//命名空间写法 </span>
            <span class="token comment">//模块中写入 namespaced: true,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;increment&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;increment2&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            login<span class="token operator">:</span> <span class="token string">&#39;auth/loginByEmail&#39;</span><span class="token punctuation">,</span>
            loadLang<span class="token operator">:</span> <span class="token string">&#39;loadLang&#39;</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token comment">//调用用 this.login</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_2-main-js" tabindex="-1"><a class="header-anchor" href="#_2-main-js" aria-hidden="true">#</a> 2.main.js</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&#39;./store&#39;</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
    router<span class="token punctuation">,</span>
    store  <span class="token comment">//挂载</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3-其他文件引用" tabindex="-1"><a class="header-anchor" href="#_3-其他文件引用" aria-hidden="true">#</a> 3.其他文件引用</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>js调用<span class="token operator">:</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">&#39;jack&#39;</span> <span class="token comment">//不建议,因无记录</span>
如但文件导入则只需store
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&quot;userChange&quot;</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">)</span> 

html引用<span class="token operator">:</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>userInfo<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment">//计算属性引用</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>这个状态自管理应用包含以下几个部分：</p><ul><li><strong>state</strong>，驱动应用的数据源；</li><li><strong>view</strong>，以声明方式将 <strong>state</strong> 映射到视图；</li><li><strong>actions</strong>，响应在 <strong>view</strong> 上的用户输入导致的状态变化。</li></ul><p>以下是一个表示“单向数据流”理念的简单示意：</p></blockquote><p>![1569118000473](../../.vuepress/public/images/vue//1569118000473.png</p><h3 id="_4-模块化结构-项目结构" tabindex="-1"><a class="header-anchor" href="#_4-模块化结构-项目结构" aria-hidden="true">#</a> 4.模块化结构-项目结构</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>└── store
    ├── index.js          # 我们组装模块并导出 store 的地方
    ├──	state.js		  # 根级别的 mutation
    ├── mutations.js      # 根级别的 mutation 同步事件
    ├── actions.js        # 根级别的 action   异步事件
    └── modules
        ├── cart       	  # 购物车模块文件夹
        ├── products   	  # 产品模块文件夹
        └── index.js
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>├──index.js</p><blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">&#39;vuex&#39;</span>
<span class="token keyword">import</span> vuexModules <span class="token keyword">from</span> <span class="token string">&#39;./modules&#39;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></blockquote><blockquote><p>import state from &#39;./state&#39;<br> import mutations from &#39;./mutations&#39;<br> import actions from &#39;./actions&#39;</p></blockquote><blockquote><p>Vue.use(Vuex)</p></blockquote><blockquote><p>export default new Vuex.Store({<br> state,<br> mutations,<br> actions,<br> modules: vuexModules<br> })</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code></code></pre><div class="line-numbers"></div></div></blockquote><p>├── state.js</p><blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
   lang<span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></blockquote><p>├── mutations.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setLang</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></blockquote><blockquote><p>├── actions.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
   <span class="token function">loadLang</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>dispatch<span class="token punctuation">,</span> commit<span class="token punctuation">,</span> state<span class="token punctuation">}</span><span class="token punctuation">,</span> lang</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;addLangPack&#39;</span><span class="token punctuation">,</span> lang<span class="token punctuation">)</span> <span class="token comment">//commit触发mutations</span>
               <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;loadLang&#39;</span><span class="token punctuation">,</span> i18n<span class="token punctuation">.</span>fallbackLocale<span class="token punctuation">)</span>  <span class="token comment">//dispatch触发 actions</span>
   <span class="token function">loadLang</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> lang</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;addLangPack&#39;</span><span class="token punctuation">,</span> lang<span class="token punctuation">)</span> <span class="token comment">//commit触发mutations</span>
		context<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;loadLang&#39;</span><span class="token punctuation">,</span> i18n<span class="token punctuation">.</span>fallbackLocale<span class="token punctuation">)</span>  <span class="token comment">//dispatch触发 actions</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></blockquote><blockquote><p>└── modules</p><blockquote><p>├──m1文件夹</p></blockquote><blockquote><blockquote><p>├──m1.js</p></blockquote></blockquote><blockquote><blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
   cachePage<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></blockquote></blockquote><blockquote><blockquote><p>const mutations = {<br> addTagNav(state, data){<br> }<br> }</p></blockquote></blockquote><blockquote><blockquote><p>export default {<br> namespaced: true,<br> state,<br> mutations<br> }</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code></code></pre><div class="line-numbers"></div></div></blockquote></blockquote><blockquote><p>index.js</p></blockquote><blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> user <span class="token keyword">from</span> <span class="token string">&#39;./m1.js&#39;</span>
<span class="token keyword">import</span> tagNav <span class="token keyword">from</span> <span class="token string">&#39;./tagNav&#39;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></blockquote><blockquote><p>export default {<br> user: user,<br> tagNav: tagNav<br> }</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code></code></pre><div class="line-numbers"></div></div></blockquote></blockquote><h3 id="_5-命名空间" tabindex="-1"><a class="header-anchor" href="#_5-命名空间" aria-hidden="true">#</a> 5.命名空间</h3><p>默认情况下，模块内部的 action、mutation 和 getter 是注册在<strong>全局命名空间</strong>的。</p><p>注意：SET_A_name 命名不可用。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>未命名写法<span class="token operator">:</span> 
<span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      homename<span class="token operator">:</span> <span class="token string">&quot;homename&quot;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">homemodule</span><span class="token operator">:</span> <span class="token parameter">state</span><span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>Home<span class="token punctuation">.</span>homemodule
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      SET_homeName<span class="token operator">:</span> <span class="token string">&quot;SET_homeName&quot;</span><span class="token punctuation">,</span>
      SET_homemodule<span class="token operator">:</span> <span class="token string">&quot;SET_homemodule&quot;</span> <span class="token comment">//直接使用</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>当模块被注册后，它的所有 getter、action 及 mutation 都会自动根据模块注册的路径调整命名。</p><h4 id="命名空间写法" tabindex="-1"><a class="header-anchor" href="#命名空间写法" aria-hidden="true">#</a> 命名空间写法</h4><ol><li>写法-1-</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>modules<span class="token operator">:</span> <span class="token punctuation">{</span>
    moduleA<span class="token operator">:</span> <span class="token punctuation">{</span>
      namespaced<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//指定为命名空间</span>
      state<span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      homename<span class="token operator">:</span> <span class="token string">&quot;homename&quot;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">homemodule</span><span class="token operator">:</span> <span class="token parameter">state</span><span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>Home<span class="token punctuation">.</span>homemodule
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      SET_homeName<span class="token operator">:</span> <span class="token string">&quot;SET_homeName&quot;</span><span class="token punctuation">,</span>
      SET_homemodule<span class="token operator">:</span> <span class="token string">&quot;moduleA/SET_homemodule&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    
 <span class="token operator">-</span>写法<span class="token operator">-</span><span class="token number">2</span><span class="token operator">-</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ol start="2"><li>写法-2</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>computed<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token string">&#39;moduleA&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">a</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>a<span class="token punctuation">,</span>
    <span class="token function-variable function">b</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>b
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
methods<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">&#39;moduleA&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span> <span class="token comment">// -&gt; this.foo()</span>
    <span class="token string">&#39;bar&#39;</span> <span class="token comment">// -&gt; this.bar()</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ol start="3"><li>写法-3</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createNamespacedHelpers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vuex&#39;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> mapState<span class="token punctuation">,</span> mapActions <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">createNamespacedHelpers</span><span class="token punctuation">(</span><span class="token string">&#39;some/nested/module&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在 `some/nested/module` 中查找</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function-variable function">a</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>a<span class="token punctuation">,</span>
      <span class="token function-variable function">b</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>b
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在 `some/nested/module` 中查找</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span>
      <span class="token string">&#39;bar&#39;</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="在带命名空间的模块内访问全局内容" tabindex="-1"><a class="header-anchor" href="#在带命名空间的模块内访问全局内容" aria-hidden="true">#</a> 在带命名空间的模块内访问全局内容</h4><ol><li>希望使用全局 state 和 getter，<code>rootState</code> 和 <code>rootGetters</code> 会作为第三和第四参数传入 getter，也会通过 <code>context</code> 对象的属性传入 action。</li><li>若需要在全局命名空间内分发 action 或提交 mutation，将 <code>{ root: true }</code> 作为第三参数传给 <code>dispatch</code> 或 <code>commit</code> 即可。</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>modules<span class="token operator">:</span> <span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token punctuation">{</span>
    namespaced<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    getters<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 在这个模块的 getter 中，`getters` 被局部化了</span>
      <span class="token comment">// 你可以使用 getter 的第四个参数来调用 `rootGetters`</span>
      <span class="token function">someGetter</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> getters<span class="token punctuation">,</span> rootState<span class="token punctuation">,</span> rootGetters</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        getters<span class="token punctuation">.</span>someOtherGetter <span class="token comment">// -&gt; &#39;foo/someOtherGetter&#39;</span>
        rootGetters<span class="token punctuation">.</span>someOtherGetter <span class="token comment">// -&gt; &#39;someOtherGetter&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">someOtherGetter</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    actions<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 在这个模块中， dispatch 和 commit 也被局部化了</span>
      <span class="token comment">// 他们可以接受 `root` 属性以访问根 dispatch 或 commit</span>
      <span class="token function">someAction</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> dispatch<span class="token punctuation">,</span> commit<span class="token punctuation">,</span> getters<span class="token punctuation">,</span> rootGetters <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        getters<span class="token punctuation">.</span>someGetter <span class="token comment">// -&gt; &#39;foo/someGetter&#39;</span>
        rootGetters<span class="token punctuation">.</span>someGetter <span class="token comment">// -&gt; &#39;someGetter&#39;</span>

        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;someOtherAction&#39;</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; &#39;foo/someOtherAction&#39;</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;someOtherAction&#39;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> root<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; &#39;someOtherAction&#39;</span>

        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;someMutation&#39;</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; &#39;foo/someMutation&#39;</span>
        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;someMutation&#39;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> root<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; &#39;someMutation&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">someOtherAction</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h4 id="在带命名空间的模块注册全局-action" tabindex="-1"><a class="header-anchor" href="#在带命名空间的模块注册全局-action" aria-hidden="true">#</a> 在带命名空间的模块注册全局 action</h4><ol><li>若需要在带命名空间的模块注册全局 action，你可添加 <code>root: true</code>，并将这个 action 的定义放在函数 <code>handler</code> 中。例如：</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">someOtherAction</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>dispatch<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;someAction&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  modules<span class="token operator">:</span> <span class="token punctuation">{</span>
    foo<span class="token operator">:</span> <span class="token punctuation">{</span>
      namespaced<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      actions<span class="token operator">:</span> <span class="token punctuation">{</span>
        someAction<span class="token operator">:</span> <span class="token punctuation">{</span>
          root<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token function">handler</span> <span class="token punctuation">(</span><span class="token parameter">namespacedContext<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token comment">// -&gt; &#39;someAction&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="模块自动注册" tabindex="-1"><a class="header-anchor" href="#模块自动注册" aria-hidden="true">#</a> 模块自动注册</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">&#39;vuex&#39;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> context <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">&#39;./modules&#39;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> moduleStores <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> fileName <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> fileModule <span class="token operator">=</span> <span class="token function">context</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span>default<span class="token punctuation">;</span>
    moduleStores<span class="token punctuation">[</span>fileName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>fileModule<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    modules<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>moduleStores<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    state<span class="token operator">:</span> <span class="token punctuation">{</span>
        curcity<span class="token operator">:</span> <span class="token punctuation">{</span>
            province<span class="token operator">:</span> <span class="token string">&#39;广东省&#39;</span><span class="token punctuation">,</span>
            provinceId<span class="token operator">:</span> <span class="token number">440000</span><span class="token punctuation">,</span>
            city<span class="token operator">:</span> <span class="token string">&#39;深圳&#39;</span><span class="token punctuation">,</span>
            cityId<span class="token operator">:</span> <span class="token number">440300</span><span class="token punctuation">,</span>
            cityshortnamepinyin<span class="token operator">:</span> <span class="token string">&#39;sz&#39;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        sessionCallBack<span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    mutations<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="_6-刷新事件beforunload解决持久化" tabindex="-1"><a class="header-anchor" href="#_6-刷新事件beforunload解决持久化" aria-hidden="true">#</a> 6.刷新事件beforunload解决持久化</h3><p>持久化插件:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>robinvdvleuten<span class="token operator">/</span>vuex<span class="token operator">-</span>persistedstate
npm install <span class="token operator">--</span>save vuex<span class="token operator">-</span>persistedstate

<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">&#39;vuex&#39;</span>
<span class="token keyword">import</span> createPersistedState <span class="token keyword">from</span> <span class="token string">&quot;vuex-persistedstate&quot;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">&#39;walle&#39;</span><span class="token punctuation">,</span>
    routeInfo<span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span><span class="token string">&#39;18888888888888&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  modules<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">createPersistedState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    storage<span class="token operator">:</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">,</span>
    key<span class="token operator">:</span><span class="token string">&#39;store&#39;</span><span class="token punctuation">,</span>
    <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//指定需要持久化state</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 只储存state中的assessmentData</span>
      assessmentData<span class="token operator">:</span> state<span class="token punctuation">.</span>age
     <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>刷新</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;store&#39;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">replaceState</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">,</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;store&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">//window.localStorage.clear() 防止用户看到 或 加密</span>
    
    <span class="token comment">// window.addEventListener(&#39;beforeunload&#39;,()=&gt;{</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;pagehide&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token comment">//移动端beforeunload不生效 代替方案</span>
      localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&#39;store&#39;</span><span class="token punctuation">,</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;</span> d540ae3776f88c5ffa8e51fafca101a17f31a2b7
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h1 id="vue-axios" tabindex="-1"><a class="header-anchor" href="#vue-axios" aria-hidden="true">#</a> VUE-Axios</h1><blockquote><p>官方网址: http://www.axios-js.com/zh-cn/docs/</p><p>安装: npm install --save axios vue-axios</p><p>vue专注于网路请求的一个轻量库,没有dom的功能操作<br> 需要导包<br> 使用箭头函数,this指向vue</p><p>https://www.cnblogs.com/chaoyuehedy/p/9931146.html</p></blockquote><h3 id="axios与ajax" tabindex="-1"><a class="header-anchor" href="#axios与ajax" aria-hidden="true">#</a> axios与ajax</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>axios 对原生<span class="token constant">XHR</span>的封装<span class="token punctuation">,</span>是一个基于 Promise 的http请求库，可以用在浏览器和node<span class="token punctuation">.</span>js中<span class="token punctuation">.</span>
<span class="token number">1.</span>从 node<span class="token punctuation">.</span>js 创建 http 请求
<span class="token number">2.</span>支持 Promise <span class="token constant">API</span>
<span class="token number">3.</span>自动转换 <span class="token constant">JSON</span> 数据
<span class="token number">3.</span>客户端支持防止<span class="token constant">CSRF</span>
<span class="token number">4.</span>提供了一些并发请求的接口

这个支持防止<span class="token constant">CSRF</span>其实挺好玩的，是怎么做到的呢，就是让你的每个请求都带一个从cookie中拿到的key<span class="token punctuation">,</span> 根据浏览器同源策略，假冒的网站是拿不到你cookie中得key的，这样，后台就可以轻松辨别出这个请求是否是用户在假冒网站上的误导输入，从而采取正确的策略。

Axios既提供了并发的封装，也没有下文会提到的fetch的各种问题，而且体积也较小，当之无愧现在最应该选用的请求的方式。

ajax：
本身是针对<span class="token constant">MVC</span>的编程<span class="token punctuation">,</span>不符合现在前端<span class="token constant">MVVM</span>的浪潮
基于原生的<span class="token constant">XHR</span>开发，<span class="token constant">XHR</span>本身的架构不清晰，已经有了fetch的替代方案
JQuery整个项目太大，单纯使用ajax却要引入整个JQuery非常的不合理（采取个性化打包的方案又不能享受<span class="token constant">CDN</span>服务

axios：
从 node<span class="token punctuation">.</span>js 创建 http 请求
支持 Promise <span class="token constant">API</span>
客户端支持防止<span class="token constant">CSRF</span>
提供了一些并发请求的接口（重要，方便了很多的操作）
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    headers<span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">//设置请求头</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer $(res.token)</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    params<span class="token operator">:</span><span class="token punctuation">{</span><span class="token comment">//geturl不传参,可在此写参</span>
         page<span class="token operator">:</span>page<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">backdata</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	
   
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
	key<span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span><span class="token comment">//post请求参数</span>
	info<span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token comment">//post请求参数</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">backdata</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
    
修改axios获取的返回数据
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>transformResponse<span class="token operator">=</span><span class="token punctuation">[</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
           <span class="token keyword">return</span> JSONbig<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> data<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>
            不管有没有错都会执行这个  
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
    
<span class="token function-variable function">多并发</span><span class="token operator">:</span>
    
<span class="token keyword">function</span> <span class="token function">getUserAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user/12345&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">function</span> <span class="token function">getUserPermissions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user/12345/permissions&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
axios<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">getUserAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getUserPermissions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>axios<span class="token punctuation">.</span><span class="token function">spread</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">acct<span class="token punctuation">,</span> perms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 两个请求现在都执行完成</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h3 id="axiso引用方式" tabindex="-1"><a class="header-anchor" href="#axiso引用方式" aria-hidden="true">#</a> axiso引用方式</h3><h4 id="_1-绑定原型方式" tabindex="-1"><a class="header-anchor" href="#_1-绑定原型方式" aria-hidden="true">#</a> 1.绑定原型方式:</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>axios是一个库，并不是vue中的第三方插件，使用时不能通过Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">)</span>安装插件，需要在原型上进行绑定：
安装<span class="token operator">:</span>npm install <span class="token operator">--</span>save axios

mian<span class="token punctuation">.</span>js文件中<span class="token operator">:</span>

<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> axios from ‘axios’
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$http <span class="token operator">=</span> axios <span class="token comment">//用法:axios</span>
<span class="token comment">//或 Vue.prototype.$axios = axios//用法:this.$axios</span>

用法<span class="token operator">:</span>
axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;url?id=123456&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
	parms<span class="token operator">:</span><span class="token punctuation">{</span>
		id<span class="token operator">:</span><span class="token number">123456</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h4 id="_2-插件方法" tabindex="-1"><a class="header-anchor" href="#_2-插件方法" aria-hidden="true">#</a> 2.插件方法</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>vue<span class="token operator">-</span>axios是将axios集成到Vue<span class="token punctuation">.</span>js的小包装器，可以像插件一样进行安装
安装<span class="token operator">:</span>npm install <span class="token operator">--</span>save axios vue<span class="token operator">-</span>axios  

<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>
<span class="token keyword">import</span> VueAxios <span class="token keyword">from</span> <span class="token string">&#39;vue-axios&#39;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueAxios<span class="token punctuation">,</span> axios<span class="token punctuation">)</span>

用法<span class="token operator">:</span>
Vue<span class="token punctuation">.</span>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">respose</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_3-接口封装方式" tabindex="-1"><a class="header-anchor" href="#_3-接口封装方式" aria-hidden="true">#</a> 3.接口封装方式</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> http <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    baseURL<span class="token operator">:</span><span class="token string">&#39;http://ttapi.research.itcast.cn&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token number">1.</span>接口方式<span class="token operator">:</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/app/v1_0/authorizations&#39;</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token number">2.</span>接口类型方式<span class="token operator">:</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">postRequests</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            method<span class="token operator">:</span> <span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span>
            url<span class="token operator">:</span> url<span class="token punctuation">,</span>
            data<span class="token operator">:</span> params<span class="token punctuation">,</span>
            headers<span class="token operator">:</span> <span class="token punctuation">{</span>
                  <span class="token string">&#39;Authorization&#39;</span><span class="token operator">:</span> <span class="token function">getStore</span><span class="token punctuation">(</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
                  <span class="token string">&#39;schoolCode&#39;</span><span class="token operator">:</span> <span class="token function">getStore</span><span class="token punctuation">(</span><span class="token string">&#39;schoolCode&#39;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

	引入<span class="token operator">:</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>postRequests<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./api&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">postFind</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token function">postRequests</span><span class="token punctuation">(</span><span class="token string">&#39;/travelPlanWeb&#39;</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;&gt;&gt;</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>
<span class="token keyword">var</span> baseUrl <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
<span class="token comment">// var version = &#39;1.0.1&#39;</span>
<span class="token comment">// 环境判断</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// baseUrl = &#39;http://192.168.8.32:8082/&#39;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;test&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  baseUrl <span class="token operator">=</span> <span class="token string">&#39;test&#39;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  baseUrl <span class="token operator">=</span> <span class="token string">&#39;prodction&#39;</span>
<span class="token punctuation">}</span>

<span class="token comment">// http://localhost:9010/department/querySubDepar</span>
<span class="token keyword">let</span> axi <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  baseUrl<span class="token operator">:</span> baseUrl<span class="token punctuation">,</span>
  timeOut<span class="token operator">:</span> <span class="token number">8000</span><span class="token punctuation">,</span>
  headers<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;application/json; charset=UTF-8&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token function-variable function">getData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> axi<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    params<span class="token punctuation">.</span>success <span class="token operator">&amp;&amp;</span> params<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    params<span class="token punctuation">.</span>fail <span class="token operator">&amp;&amp;</span> params<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">postData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">refs</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 判断是否有数据 转换为表单数据</span>
  <span class="token keyword">var</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>refs<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> refs<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> refs<span class="token punctuation">.</span>data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    refs<span class="token punctuation">.</span>data <span class="token operator">=</span> formData
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">axi</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> refs<span class="token punctuation">.</span>url<span class="token punctuation">,</span>
    data<span class="token operator">:</span> refs<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;application/json; charset=UTF-8&#39;</span>
        <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    refs<span class="token punctuation">.</span>success <span class="token operator">&amp;&amp;</span> refs<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    refs<span class="token punctuation">.</span>fail <span class="token operator">&amp;&amp;</span> refs<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>postData<span class="token punctuation">,</span> getData<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h4 id="_4-多基地址" tabindex="-1"><a class="header-anchor" href="#_4-多基地址" aria-hidden="true">#</a> 4.多基地址</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>

<span class="token keyword">let</span> http <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    baseURL<span class="token operator">:</span><span class="token string">&#39;基地址&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token keyword">export</span> <span class="token keyword">const</span> axiosA <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	baseURL<span class="token operator">:</span><span class="token string">&quot;http://www.a.cn&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> axiosb <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	baseURL<span class="token operator">:</span><span class="token string">&quot;http://www.b.cn&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>



调用<span class="token operator">:</span>按名导入
<span class="token keyword">import</span> <span class="token punctuation">{</span> axiosA <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;地址&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>创一个文件<span class="token operator">:</span>utils<span class="token operator">&gt;</span>http<span class="token operator">&gt;</span>index<span class="token punctuation">.</span>js
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">js</span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> http <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    baseURL<span class="token operator">:</span><span class="token string">&#39;http://ttapi.research.itcast.cn&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

接口方式<span class="token operator">:</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/app/v1_0/authorizations&#39;</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">vue</span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> login <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;diz&#39;</span>
<span class="token keyword">async</span> <span class="token function">loging</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">login</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="axios全局配置" tabindex="-1"><a class="header-anchor" href="#axios全局配置" aria-hidden="true">#</a> axios全局配置</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">15000</span><span class="token punctuation">;</span>  <span class="token comment">//超时响应</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>post<span class="token punctuation">[</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;application/x-www-form-urlencoded&#39;</span><span class="token punctuation">;</span> <span class="token comment">// 配置请求头（推荐）</span>
<span class="token comment">// axios.defaults.headers.post[&#39;Content-Type&#39;] = &#39;application/json;charset=utf-8&#39;; // 配置请求头</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> $core<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//确认协议和地址</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>   <span class="token comment">// axios 默认不发送cookie，需要全局设置true发送cooki</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>common<span class="token punctuation">[</span><span class="token string">&#39;Authorization&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">AUTH_TOKEN</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="axios传参方式" tabindex="-1"><a class="header-anchor" href="#axios传参方式" aria-hidden="true">#</a> axios传参方式</h3><h4 id="_1-get请求" tabindex="-1"><a class="header-anchor" href="#_1-get请求" aria-hidden="true">#</a> 1.get请求</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user?id=12345&amp;name=user&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token comment">//params参数必写 , 如果没有参数传{}也可以</span>
    params<span class="token operator">:</span> <span class="token punctuation">{</span>  
       id<span class="token operator">:</span> <span class="token number">12345</span>，
       name<span class="token operator">:</span> user
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
如有需写路径参数 url<span class="token operator">/</span><span class="token operator">:</span>target     <span class="token comment">//用 `url${}`,url拼接</span>
body<span class="token operator">:</span> 需对象传<span class="token punctuation">,</span><span class="token keyword">get</span>需params<span class="token punctuation">;</span>post只需<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token punctuation">{</span>
	params<span class="token operator">:</span><span class="token punctuation">{</span>
		参数
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    headers<span class="token operator">:</span><span class="token punctuation">{</span>请求头<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>




</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h4 id="_2-post请求" tabindex="-1"><a class="header-anchor" href="#_2-post请求" aria-hidden="true">#</a> 2.post请求</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>post<span class="token operator">/</span>put<span class="token operator">/</span>patch请求
传参格式为 formData 
 （全局请求头<span class="token operator">:</span><span class="token string">&#39;Content-Type&#39;</span><span class="token operator">=</span> <span class="token string">&#39;application/x-www-form-urlencoded&#39;</span>）

（request的Header<span class="token operator">:</span><span class="token string">&#39;Content-Type&#39;</span><span class="token operator">=</span> <span class="token string">&#39;multipart/form-data&#39;</span>）
ar formData<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span><span class="token number">123456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;pass&#39;</span><span class="token punctuation">,</span><span class="token number">12345678</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/notice&quot;</span><span class="token punctuation">,</span>formData<span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">return</span> res<span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">return</span> err<span class="token punctuation">}</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token punctuation">{</span>
	参数
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    headers<span class="token operator">:</span><span class="token punctuation">{</span>请求头<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="_3-query-形式" tabindex="-1"><a class="header-anchor" href="#_3-query-形式" aria-hidden="true">#</a> 3. query 形式</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>传参格式为 query 形式
（全局请求头<span class="token operator">:</span><span class="token string">&#39;Content-Type&#39;</span><span class="token operator">=</span> <span class="token string">&#39;application/x-www-form-urlencoded&#39;</span>）

（request的Header<span class="token operator">:</span><span class="token string">&#39;Content-Type&#39;</span><span class="token operator">=</span> <span class="token string">&#39;application/x-www-form-urlencoded&#39;</span>）


<span class="token keyword">import</span> Qs <span class="token keyword">from</span> <span class="token string">&#39;qs&#39;</span>   <span class="token comment">//引入方式</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$qs <span class="token operator">=</span> Qs  <span class="token comment">//全局加载</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//使用方式</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//使用方式</span>
 
<span class="token keyword">var</span> readyData<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>$qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    id<span class="token operator">:</span><span class="token number">1234</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span>user
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/notice&quot;</span><span class="token punctuation">,</span>readyData<span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">return</span> res<span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">return</span> err<span class="token punctuation">}</span><span class="token punctuation">)</span>
————————————————
使用URLSearchParams
<span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;param1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;value1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;param2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;value2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/foo&#39;</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="_4-json格式" tabindex="-1"><a class="header-anchor" href="#_4-json格式" aria-hidden="true">#</a> 4. JSON格式</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>传参格式为 <span class="token function">raw</span> <span class="token punctuation">(</span><span class="token constant">JSON</span>格式<span class="token punctuation">)</span>
（全局请求头<span class="token operator">:</span><span class="token string">&#39;Content-Type&#39;</span><span class="token operator">=</span> <span class="token string">&#39;application/x-www-form-urlencoded&#39;</span>）

（request的Header<span class="token operator">:</span><span class="token string">&#39;Content-Type&#39;</span><span class="token operator">=</span> <span class="token string">&#39;application/json;charset=UTF-8&#39;</span>）
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">var</span> readyData<span class="token operator">=</span><span class="token punctuation">{</span>
    id<span class="token operator">:</span><span class="token number">1234</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span>user
<span class="token punctuation">}</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/notice&quot;</span><span class="token punctuation">,</span>readyData<span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">return</span> res<span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">return</span> err<span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">var</span> readyData<span class="token operator">=</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    id<span class="token operator">:</span><span class="token number">1234</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span>user
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/notice&quot;</span><span class="token punctuation">,</span>readyData<span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">return</span> res<span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">return</span> err<span class="token punctuation">}</span><span class="token punctuation">)</span>
————————————————

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="_5-对象写法" tabindex="-1"><a class="header-anchor" href="#_5-对象写法" aria-hidden="true">#</a> 5.对象写法</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	url<span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
	method<span class="token operator">:</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span>
	params<span class="token operator">:</span><span class="token punctuation">{</span> num<span class="token operator">=</span><span class="token number">3</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	url<span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
	method<span class="token operator">:</span><span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span>
	data<span class="token operator">:</span><span class="token punctuation">{</span> num<span class="token operator">=</span><span class="token number">3</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="axios拦截器" tabindex="-1"><a class="header-anchor" href="#axios拦截器" aria-hidden="true">#</a> axios拦截器</h3><h4 id="_1-请求拦截" tabindex="-1"><a class="header-anchor" href="#_1-请求拦截" aria-hidden="true">#</a> 1.请求拦截</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>config保存请求时的所有数据<span class="token punctuation">,</span>查看请求报文

axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//发送请求头</span>
    <span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;userInfo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    config<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>Authorization<span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token keyword">return</span> config
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="/jiji/assets/img/1568688836118.009d78c8.png" alt="1568688836118"></p><h4 id="_2-响应拦截" tabindex="-1"><a class="header-anchor" href="#_2-响应拦截" aria-hidden="true">#</a> 2.响应拦截</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 添加响应拦截器</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 对响应数据做点什么</span>
    <span class="token keyword">return</span> response<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token comment">//执行上一个报错的请求</span>
     <span class="token keyword">return</span> <span class="token function">http</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>config<span class="token punctuation">)</span>
    
    <span class="token comment">// 对响应错误做点什么</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

自定义响应体
响应设置bigint

axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>transformResponse <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">try</span><span class="token punctuation">{</span>
     <span class="token keyword">return</span> JSONbig<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">{</span>
     <span class="token keyword">return</span> data
 <span class="token punctuation">}</span>   
<span class="token punctuation">}</span><span class="token punctuation">]</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="create方法" tabindex="-1"><a class="header-anchor" href="#create方法" aria-hidden="true">#</a> create方法</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  baseURL<span class="token operator">:</span> <span class="token string">&#39;https://some-domain.com/api/&#39;</span><span class="token punctuation">,</span>
  timeout<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">//超时响应时间</span>
  headers<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&#39;X-Custom-Header&#39;</span><span class="token operator">:</span> <span class="token string">&#39;foobar&#39;</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="post请求方式" tabindex="-1"><a class="header-anchor" href="#post请求方式" aria-hidden="true">#</a> post请求方式</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>data 与 pramas 区别
data<span class="token operator">:</span>请求体<span class="token punctuation">;</span>
pramas<span class="token operator">:</span>拼接到请求地址


文件上传<span class="token operator">:</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">uploadFileRequest</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>base<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> params<span class="token punctuation">,</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;multipart/form-data&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">// 转换</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">postRequest</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>base<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> params<span class="token punctuation">,</span>
    transformRequest<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> ret <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> it <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ret <span class="token operator">+=</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;=&#39;</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>it<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;&amp;&#39;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> ret
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;application/x-www-form-urlencoded&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h4 id="multipart-form-data" tabindex="-1"><a class="header-anchor" href="#multipart-form-data" aria-hidden="true">#</a> multipart/form-data</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&#39;multipart/form-data&#39;</span> 
		<span class="token keyword">let</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;multipartFile&quot;</span><span class="token punctuation">,</span> Blob<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Blob为 文件内容</span>
      <span class="token function">GETVoiceToSrc</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="get" tabindex="-1"><a class="header-anchor" href="#get" aria-hidden="true">#</a> get</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> qs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;qs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    params<span class="token operator">:</span><span class="token punctuation">{</span>
        arr<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">paramsSerializer</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> <span class="token punctuation">{</span>arrayFormat<span class="token operator">:</span> <span class="token string">&#39;repeat&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="请求转换" tabindex="-1"><a class="header-anchor" href="#请求转换" aria-hidden="true">#</a> 请求转换</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>
<span class="token keyword">import</span> qs <span class="token keyword">from</span> <span class="token string">&#39;qs&#39;</span>

<span class="token comment">//get传递数组</span>
axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    params<span class="token operator">:</span> <span class="token punctuation">{</span>
     id<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
     type<span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">paramsSerializer</span><span class="token operator">:</span> <span class="token parameter">params</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> <span class="token punctuation">{</span> indices<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//url?id=1&amp;id=2&amp;id=3</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>
    params<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 请求地址方式</span>
     id<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
     type<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> indices<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="qs" tabindex="-1"><a class="header-anchor" href="#qs" aria-hidden="true">#</a> qs</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> indices<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token comment">//形式： id=1&amp;id=2&amp;id=3</span>
qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>arrayFormat<span class="token operator">:</span> ‘indices‘<span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token comment">//形式： ids[0]=1&amp;ids[1]=2&amp;ids[2]=3</span>
qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>arrayFormat<span class="token operator">:</span> ‘brackets‘<span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token comment">//形式：id[]=1&amp;id[]=2&amp;id[]=3</span>
qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>ids<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>arrayFormat<span class="token operator">:</span> ‘repeat‘<span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token comment">//形式： id=1&amp;id=2&amp;id=3</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="拦截处理" tabindex="-1"><a class="header-anchor" href="#拦截处理" aria-hidden="true">#</a> 拦截处理</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 封装
 * 请求拦截、响应拦截、错误统一处理
 */</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">&#39;../router/index&#39;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&#39;../store/index&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;element-ui&#39;</span>

<span class="token doc-comment comment">/**
 * 跳转登录页
 * 携带当前页面路由，以期在登录页面完成登录后返回当前页面
 */</span>
<span class="token keyword">let</span> <span class="token function-variable function">toLogin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">&#39;token&#39;</span><span class="token punctuation">)</span>
    router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span>
        query<span class="token operator">:</span> <span class="token punctuation">{</span>
            redirect<span class="token operator">:</span> router<span class="token punctuation">.</span>currentRoute<span class="token punctuation">.</span>fullPath
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token comment">// 创建axios实例</span>
<span class="token keyword">let</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    timeout<span class="token operator">:</span> <span class="token number">30000</span><span class="token comment">//请求超时时间</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token doc-comment comment">/**
 * 请求拦截器
 * 每次请求前，如果存在token则在请求头中携带token
 */</span>
instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
    <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 登录流程控制中，根据本地是否存在token判断用户的登录情况</span>
        <span class="token comment">// 但是即使token存在，也有可能token是过期的，所以在每次的请求头中携带token</span>
        <span class="token comment">// 后台根据携带的token判断用户的登录情况，并返回给我们对应的状态码</span>
        <span class="token comment">// 而后我们可以在响应拦截器中，根据状态码进行一些统一的操作。</span>
        <span class="token comment">//设置统一请求头</span>

        <span class="token comment">//token</span>
        <span class="token keyword">let</span> phSessionToken <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;token&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            phSessionToken <span class="token operator">=</span> localStorage<span class="token punctuation">.</span>token
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            phSessionToken <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//设置请求头</span>
        config<span class="token punctuation">.</span>headers <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;application/json&#39;</span><span class="token punctuation">,</span>
            <span class="token string">&#39;phSessionToken&#39;</span><span class="token operator">:</span> phSessionToken
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> config
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token parameter">error</span> <span class="token operator">=&gt;</span> Promise<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token doc-comment comment">/**
 * 请求失败后的错误统一处理
 * param <span class="token punctuation">{</span>Number<span class="token punctuation">}</span> status 请求失败的状态码
 */</span>

<span class="token comment">//后台沟通状态码规范</span>
<span class="token keyword">let</span> <span class="token function-variable function">errorHandle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">status<span class="token punctuation">,</span> other</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//状态码判断</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//400: 客户端请求的语法错误，服务器无法理解</span>
        <span class="token keyword">case</span> <span class="token number">400</span><span class="token operator">:</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;400客户端请求的语法错误，服务器无法理解&#39;</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
        <span class="token keyword">case</span> <span class="token number">401</span><span class="token operator">:</span>
            <span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">&#39;登录过期，请重新登录&#39;</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">&#39;error&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">toLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//跳转到登录</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
        <span class="token comment">//404请求不存在</span>
        <span class="token keyword">case</span> <span class="token number">404</span><span class="token operator">:</span>
            <span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">&#39;请求的资源不存在&#39;</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">&#39;error&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
        <span class="token keyword">case</span> <span class="token number">408</span><span class="token operator">:</span>
            <span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">&#39;网络延时，请稍后&#39;</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">&#39;error&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">toLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//跳转到登录</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
        <span class="token comment">//500</span>
        <span class="token keyword">case</span> <span class="token number">500</span><span class="token operator">:</span>
            <span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">&#39;网络异常，请重新登录&#39;</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">&#39;error&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">toLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//跳转到登录</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//响应拦截器</span>
instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
    <span class="token comment">//请求成功</span>
    <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//Promise.resolve(value)方法返回一个以给定值解析后的Promise 对象。</span>
            <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;响应拦截器失败&quot;</span><span class="token punctuation">)</span>
            <span class="token comment">//Promise.reject(reason)方法返回一个带有拒绝原因reason参数的Promise对象。</span>
            <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//请求失败</span>
    <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">//return Promise.reject(error)</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> response <span class="token punctuation">}</span> <span class="token operator">=</span> error
        <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//请求已发出，但是不在2xx的范围    ------错误处理、token过期等</span>
            <span class="token function">errorHandle</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>status<span class="token punctuation">,</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
            <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                message<span class="token operator">:</span> <span class="token string">&#39;网络异常，即将前往登录页&#39;</span><span class="token punctuation">,</span>
                type<span class="token operator">:</span> <span class="token string">&#39;error&#39;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">//跳转到登录</span>
                <span class="token function">toLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span>
            <span class="token comment">// 处理断网的情况</span>
            <span class="token comment">// eg:请求超时或断网时，更新state的network状态</span>
            <span class="token comment">// network状态在app.vue中控制着一个全局的断网提示组件的显示隐藏</span>
            <span class="token comment">// 关于断网组件中的刷新重新获取数据，会在断网组件中说明</span>
            <span class="token comment">//store.commit(&#39;changeNetwork&#39;, false)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> instance
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br></div></div><h1 id="路由-生命周期-动画钩子-顺序" tabindex="-1"><a class="header-anchor" href="#路由-生命周期-动画钩子-顺序" aria-hidden="true">#</a> 路由 生命周期 动画钩子 顺序</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>进入首页的钩子们

    <span class="token number">1</span> 路由钩子 路由跳转前beforeEach

    <span class="token number">2</span> 路由钩子 home组件内部：守卫执行前beforeRouteEnter

    <span class="token number">3.</span>路由钩子 路由跳转后afterEach

    <span class="token number">4</span> 生命周期 home beforeCreate 创建前状态

    <span class="token number">5</span> 生命周期 home created 创建完毕状态

    <span class="token number">6</span> 生命周期 home beforeMount 挂载前状态

    <span class="token number">7</span> 动画钩子 beforeEnter

    <span class="token number">8</span> 生命周期 home mounted 挂载结束状态

    <span class="token number">9</span> 动画钩子 enter

    <span class="token number">10</span> 动画钩子 afterEnter


离开首页，进入别的页面 other

    <span class="token number">1</span> 路由钩子 home 导航离开该组件beforeRouteLeave

    <span class="token number">2</span> 路由钩子 路由跳转前beforeEach

    <span class="token number">3</span> 路由钩子 other组件内部：守卫执行前beforeRouteEnter

    <span class="token number">4.</span>路由钩子 路由跳转后afterEach

    <span class="token number">5</span> 生命周期 other beforeCreate 创建前状态

    <span class="token number">6</span> 生命周期 other created 创建完毕状态

    <span class="token number">7</span> 生命周期 other beforeMount 挂载前状态

    <span class="token number">8</span> 动画钩子 beforeEnter 
    <span class="token number">9</span> 动画钩子 beforeLeave

    <span class="token number">10</span> 动画钩子 leave

    <span class="token number">11</span> 动画钩子 afterLeave

    <span class="token number">12</span> 生命周期 home beforeDestroy 销毁前状态

    <span class="token number">13</span> 生命周期 home destroyed 销毁完成状态

    <span class="token number">14</span> 生命周期 other mounted 挂载结束状态

    <span class="token number">15</span> 动画钩子 enter

    <span class="token number">16</span> 动画钩子 afterEnter
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><h1 id="拓展内容" tabindex="-1"><a class="header-anchor" href="#拓展内容" aria-hidden="true">#</a> 拓展内容</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">[</span>Vue<span class="token punctuation">.</span>delete<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>cn<span class="token punctuation">.</span>vuejs<span class="token punctuation">.</span>org<span class="token operator">/</span>v2<span class="token operator">/</span>api<span class="token operator">/</span>#Vue<span class="token operator">-</span>directive<span class="token punctuation">)</span>
<span class="token punctuation">[</span>vue原理剖析<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>juejin<span class="token punctuation">.</span>im<span class="token operator">/</span>user<span class="token operator">/</span><span class="token number">59</span>ee29a36fb9a0451c3990e5<span class="token operator">/</span>posts<span class="token punctuation">)</span>
<span class="token punctuation">[</span>es6<span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span>新特性一览<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>juejin<span class="token punctuation">.</span>im<span class="token operator">/</span>post<span class="token operator">/</span><span class="token number">5</span>ca2e1935188254416288eb2<span class="token punctuation">)</span>
<span class="token punctuation">[</span>iView<span class="token operator">-</span>基于Vue的ui框架<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">www.iviewui.com</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>Cube<span class="token operator">-</span>ui<span class="token operator">-</span>移动端Vue组件库<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>didi<span class="token punctuation">.</span>github<span class="token punctuation">.</span>io<span class="token operator">/</span>cube<span class="token operator">-</span>ui<span class="token operator">/</span>#<span class="token operator">/</span>zh<span class="token operator">-</span><span class="token constant">CN</span><span class="token operator">/</span>example<span class="token punctuation">)</span>
<span class="token punctuation">[</span>Mint<span class="token operator">-</span>ui <span class="token operator">-</span>饿了么团队开发的移动端Vue组件库<span class="token punctuation">]</span><span class="token punctuation">(</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mint<span class="token operator">-</span>ui<span class="token punctuation">.</span>github<span class="token punctuation">.</span>io<span class="token operator">/</span>#<span class="token operator">!</span><span class="token operator">/</span>zh<span class="token operator">-</span>cn<span class="token punctuation">)</span>
<span class="token punctuation">[</span>Vux<span class="token operator">-</span>未适配vue<span class="token operator">-</span>cli3<span class="token punctuation">.</span>x的移动端ui库<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>doc<span class="token punctuation">.</span>vux<span class="token punctuation">.</span>li<span class="token operator">/</span>zh<span class="token operator">-</span><span class="token constant">CN</span><span class="token operator">/</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>mui  HBuilder团队开发的移动端框架<span class="token punctuation">]</span><span class="token punctuation">(</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>dev<span class="token punctuation">.</span>dcloud<span class="token punctuation">.</span>net<span class="token punctuation">.</span>cn<span class="token operator">/</span>mui<span class="token operator">/</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token constant">D2</span><span class="token operator">-</span>admin 现成的后台管理界面<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>d2admin<span class="token punctuation">.</span>fairyever<span class="token punctuation">.</span>com<span class="token punctuation">)</span>
<span class="token punctuation">[</span>iView<span class="token operator">-</span>admin 基于iView搭建的后台管理页面<span class="token punctuation">]</span><span class="token punctuation">(</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>admin<span class="token punctuation">.</span>iviewui<span class="token punctuation">.</span>com<span class="token operator">/</span>login<span class="token punctuation">)</span>
<span class="token punctuation">[</span>Element <span class="token operator">-</span> admin 基于Elementui实现的后台管理页面<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>panjiachen<span class="token punctuation">.</span>github<span class="token punctuation">.</span>io<span class="token operator">/</span>vue<span class="token operator">-</span>element<span class="token operator">-</span>admin<span class="token operator">-</span>site<span class="token operator">/</span>zh<span class="token operator">/</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>vue<span class="token operator">-</span>resource（早期结合Vue的网络请求库）<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>pagekit<span class="token operator">/</span>vue<span class="token operator">-</span>resource<span class="token punctuation">)</span>
<span class="token punctuation">[</span>为什么不在推荐vue<span class="token operator">-</span>resource<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>medium<span class="token punctuation">.</span>com<span class="token operator">/</span>the<span class="token operator">-</span>vue<span class="token operator">-</span>point<span class="token operator">/</span>retiring<span class="token operator">-</span>vue<span class="token operator">-</span>resource<span class="token operator">-</span><span class="token number">871</span>a82880af4#<span class="token number">.2</span>rkai1shx<span class="token punctuation">)</span>

<span class="token punctuation">[</span>vue<span class="token operator">-</span>i18n国际化<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>kazupon<span class="token operator">/</span>vue<span class="token operator">-</span>i18n<span class="token punctuation">)</span>
              

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h1 id="本地存储" tabindex="-1"><a class="header-anchor" href="#本地存储" aria-hidden="true">#</a> 本地存储</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">-</span> localStorage
    <span class="token operator">-</span> 只要自己不删就一直存在
<span class="token operator">-</span> sessionStorage
    <span class="token operator">-</span> 关掉浏览器就自动删除
<span class="token operator">-</span> 方法
    <span class="token operator">-</span> setItem
    <span class="token operator">-</span> getItem
    <span class="token operator">-</span> removeItem
    <span class="token operator">-</span> clear

    浏览器缓存技术有哪些
        cookie
        localStorage
        sessionStorage

    其实还想听你对这三个技术的区分和应用场景

    其实还要说共同点和不同点

     相同点：
       <span class="token number">1.</span> 把数据保存在浏览器
       <span class="token number">2.</span> 都是按域都是保存（按照域名保存）数据安全，数据无法被别的网站访问，自己访问自己的，数据不冲突
       <span class="token number">3.</span> 它们都只能保存字符串
       
     不同点：
       <span class="token number">1.</span>cookie 要比 localStorage以及sessionStorage的存储容量要小的多
       <span class="token number">2.</span>如果某个网站有cookie，那么每次访问这个网站都会自动带cookie 
       		localStorage和sessionStorage除非自己写代码取，不然不会自动带出来
       <span class="token number">3.</span>cookie可以设置有效期，
       	   localStorage和sessionStorage都不能设置有效期
           因为localStorage本身就是永久保存，
           而sessionStroage本身就是关掉浏览器就没了，所以不需要有效期

       <span class="token number">4.</span><span class="token function">cookie可以设置路径</span><span class="token punctuation">(</span>限制这个域名下的哪个路径才能访问<span class="token punctuation">)</span>，
       		但是localStorage和sessionStorage不能设置（他们两是这个域名下的所有路径都可以访问）

        我以前在哪些地方用这些东西
            cookie：项目的登录用过cookie（现在项目用cookie做登录判断的少，现在一般用token）
            记录关闭广告：这个东西我没做过，但是我喜欢看一个技术网站：开发者头条，职业毛病我研究了一下代码，发现它<span class="token number">7</span>天免广告的功能就是用cookie
        
             localStorage： 以前做的后台管理项目里有一个新增文章功能，用户点击保存草稿，我就保存到localStorage去了方便下次用户打开页面可以取出来在给它继续写

             sessionStorage：等做完这个项目的登录大家就明白了
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><blockquote></blockquote><h1 id="install" tabindex="-1"><a class="header-anchor" href="#install" aria-hidden="true">#</a> install</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>MyPlugin<span class="token punctuation">.</span><span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">Vue<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1. 添加全局方法或属性</span>
  Vue<span class="token punctuation">.</span><span class="token function-variable function">myGlobalMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 逻辑...</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 2. 添加全局资源</span>
  Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&#39;my-directive&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">bind</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> oldVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 逻辑...</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 3. 注入组件</span>
  Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">created</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 逻辑...</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 4. 添加实例方法</span>
  <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$myMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">methodOptions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 逻辑...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>注册全局组件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> a <span class="token keyword">from</span> <span class="token string">&#39;./a&#39;</span>
<span class="token keyword">import</span> b <span class="token keyword">from</span> <span class="token string">&#39;./b&#39;</span>
<span class="token keyword">let</span> components <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b <span class="token punctuation">}</span>
<span class="token keyword">const</span> installBase <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">install</span> <span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>components<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> components<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> base <span class="token keyword">from</span> <span class="token string">&#39;./base.js&#39;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>base<span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="插件-1" tabindex="-1"><a class="header-anchor" href="#插件-1" aria-hidden="true">#</a> 插件</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> bdLoading <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">install</span> <span class="token punctuation">(</span><span class="token parameter">vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> LoadingConstructor <span class="token operator">=</span> vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>Loading<span class="token punctuation">)</span>

        <span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LoadingConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


        <span class="token comment">// instance.$mount(document.createElement(&#39;div&#39;))</span>
        instance<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        instance<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&#39;444&#39;</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>$el<span class="token punctuation">)</span>
        vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$bdLoading</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            instance<span class="token punctuation">.</span>show <span class="token operator">=</span> options<span class="token punctuation">.</span>show
            instance<span class="token punctuation">.</span>text <span class="token operator">=</span> options<span class="token punctuation">.</span>text
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

main<span class="token punctuation">.</span>js

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bdLoading<span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$bdLoading</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	show<span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
    text<span class="token operator">:</span><span class="token string">&#39;ddd&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="插件封装" tabindex="-1"><a class="header-anchor" href="#插件封装" aria-hidden="true">#</a> 插件封装</h2><h2 id="html引入" tabindex="-1"><a class="header-anchor" href="#html引入" aria-hidden="true">#</a> html引入:</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">-</span>loading<span class="token punctuation">.</span>vue

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        loading<span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
    div<span class="token punctuation">{</span>
        font<span class="token operator">-</span>size<span class="token operator">:</span><span class="token number">40</span>px<span class="token punctuation">;</span>
        color<span class="token operator">:</span>#f60<span class="token punctuation">;</span>
        text<span class="token operator">-</span>align<span class="token operator">:</span>center<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">-</span>index<span class="token punctuation">.</span>js

<span class="token keyword">import</span> loadingComponent <span class="token keyword">from</span> <span class="token string">&#39;./loading.vue&#39;</span>

<span class="token keyword">const</span> loading<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token function-variable function">install</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;Loading&#39;</span><span class="token punctuation">,</span>loadingComponent<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>  <span class="token comment">//&#39;Loading&#39;这就是后面可以使用的组件的名字，install是默认的一个方法</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> loading<span class="token punctuation">;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">-</span>main<span class="token punctuation">.</span>js

<span class="token keyword">import</span> loading <span class="token keyword">from</span> <span class="token string">&#39;./loading&#39;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>loading<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Loading<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Loading<span class="token operator">&gt;</span> 
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>文件结构</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>src
	<span class="token operator">|</span>_components
		<span class="token operator">|</span>_loading
			<span class="token operator">|</span>_index<span class="token punctuation">.</span>js
			<span class="token operator">|</span>_loading<span class="token punctuation">.</span>vue
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h1 id="js引入" tabindex="-1"><a class="header-anchor" href="#js引入" aria-hidden="true">#</a> js引入:</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> ToastComponent <span class="token keyword">from</span> <span class="token string">&#39;./toast.vue&#39;</span>

<span class="token keyword">const</span> Toast <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 注册Toast</span>
Toast<span class="token punctuation">.</span><span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 生成一个Vue的子类</span>
    <span class="token comment">// 同时这个子类也就是组件</span>
    <span class="token keyword">const</span> ToastConstructor <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>ToastComponent<span class="token punctuation">)</span>
    <span class="token comment">//等价import alert from &#39;./main.vue&#39;</span>
	<span class="token comment">//let MyMsgConstructor = Vue.extend(alert);</span>
    
    <span class="token comment">// 生成一个该子类的实例</span>
    <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ToastConstructor</span><span class="token punctuation">(</span>
    	el<span class="token operator">:</span><span class="token string">&quot;.leftlist&quot;</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span><span class="token punctuation">{</span>
        	
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 将这个实例挂载在我创建的div上</span>
    <span class="token comment">// 并将此div加入全局挂载点内部</span>
    instance<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>$el<span class="token punctuation">)</span>
    
    <span class="token comment">// 通过Vue的原型注册一个方法</span>
    <span class="token comment">// 让所有实例共享这个方法 </span>
    <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$toast</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> duration <span class="token operator">=</span> <span class="token number">2000</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        instance<span class="token punctuation">.</span>message <span class="token operator">=</span> msg<span class="token punctuation">;</span>
        instance<span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            
            instance<span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> duration<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Toast
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> elInformComponent <span class="token keyword">from</span> <span class="token string">&#39;./el-inform.vue&#39;</span>
<span class="token keyword">const</span> elReportCor <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>elInformComponent<span class="token punctuation">)</span>

<span class="token keyword">let</span> instance<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">elReport</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span>ele</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">elReportCor</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        el<span class="token operator">:</span> ele<span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
            msg
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    instance<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>$el<span class="token punctuation">)</span>
    <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> elReport<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>禁用特性继承</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>inheritAttrs<span class="token operator">:</span><span class="token boolean">false</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>$attrs <span class="token comment">//外面给组件的所有属性</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>$listeners <span class="token comment">//外面给组件的事件</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>封装this插件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> bdxhdialog <span class="token keyword">from</span> <span class="token string">&#39;./bdxhDialog.vue&#39;</span>
<span class="token keyword">let</span> bdxhDialogConstr <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>bdxhdialog<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">bdxhDialog</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> rej</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
        <span class="token keyword">let</span> confirmDom <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bdxhDialogConstr</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            el<span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>confirmDom<span class="token punctuation">.</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        confirmDom<span class="token punctuation">.</span>title<span class="token operator">=</span>text<span class="token punctuation">.</span>title
        confirmDom<span class="token punctuation">.</span>content<span class="token operator">=</span>text<span class="token punctuation">.</span>content
        confirmDom<span class="token punctuation">.</span><span class="token function-variable function">BdxhSure</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">res</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            confirmDom<span class="token punctuation">.</span>isShow <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
        confirmDom<span class="token punctuation">.</span><span class="token function-variable function">BdxhCancel</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">rej</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            confirmDom<span class="token punctuation">.</span>isShow <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> bdxhDialog
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>自定义事件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>主<span class="token operator">:</span>
<span class="token operator">&lt;</span>son @xxoo<span class="token operator">=</span><span class="token string">&quot;do&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>son<span class="token operator">&gt;</span>

子<span class="token operator">:</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>div @xxoo<span class="token operator">=</span><span class="token string">&quot;$emit(&#39;do&#39;,参数)&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token comment">//$event.target.value</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h1 id="socket-io" tabindex="-1"><a class="header-anchor" href="#socket-io" aria-hidden="true">#</a> socket.io</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">socket.io</span><span class="token regex-delimiter">/</span></span>
导入<span class="token operator">:</span>npm i socket<span class="token punctuation">.</span>io<span class="token operator">-</span>client
创建

监听有没有人连接

如果监听过来了<span class="token punctuation">,</span>可接受客户端传递过来的值<span class="token punctuation">;</span>

可以回复

监听断开事件
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//导入</span>
<span class="token keyword">import</span> io <span class="token keyword">from</span> <span class="token string">&#39;socket.io-client&#39;</span><span class="token punctuation">;</span>

<span class="token comment">//请求</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>socket <span class="token operator">=</span> <span class="token function">io</span><span class="token punctuation">(</span><span class="token string">&#39;http://ttapi.research.itcast.cn&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
             query<span class="token operator">:</span><span class="token punctuation">{</span>
                 a<span class="token operator">:</span><span class="token string">&#39;sb&#39;</span>
             <span class="token punctuation">}</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//接收</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
             console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//回复内容</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//发送</span>
 methods<span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span> <span class="token comment">//发送</span>
                msg<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">,</span>
                timestamp<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">import</span> io <span class="token keyword">from</span> <span class="token string">&#39;socket.io-client&#39;</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>socket <span class="token operator">=</span> <span class="token function">io</span><span class="token punctuation">(</span><span class="token string">&#39;请求地址&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> socket <span class="token operator">=</span> <span class="token function">io</span><span class="token punctuation">(</span><span class="token string">&#39;ws://192.168.14.189:3000&#39;</span><span class="token punctuation">)</span>

        <span class="token comment">// 监听服务器的消息</span>
        socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

            <span class="token comment">// 把服务器广播的消息添加到ul里</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;#messages&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;li&gt;&#39;</span> <span class="token operator">+</span> msg <span class="token operator">+</span><span class="token string">&#39;&lt;/li&gt;&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token comment">// 给服务器发消息</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;form&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    
            <span class="token comment">// 给服务器发消息</span>
            socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;#m&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>

            <span class="token comment">// 清空内容</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;#m&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 实例化websocket对象，并且设置请求服务器地址为：echo.websocket.org</span>
        <span class="token keyword">var</span> ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">&quot;wss://echo.websocket.org&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 当会话打开时触发的事件（打电话接通的那一步）</span>
        ws<span class="token punctuation">.</span><span class="token function-variable function">onopen</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Connection open ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 给服务器发送了一段话：Hello itcast</span>
            ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;Hello 帅哥!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 当服务器给我发一句话时触发</span>
        ws<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// evt.data就是服务器给我返回的话（数据）</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Received Message: &quot;</span> <span class="token operator">+</span> evt<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 关闭链接（挂电话）</span>
            <span class="token comment">// ws.close();</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// 当会话结束触发</span>
        ws<span class="token punctuation">.</span><span class="token function-variable function">onclose</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Connection closed.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>    

        <span class="token keyword">var</span> msg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;msg&#39;</span><span class="token punctuation">)</span>
        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;send&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 每次点击按钮都把文本框的内容发给服务器</span>
            ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h1 id="双向绑定原理" tabindex="-1"><a class="header-anchor" href="#双向绑定原理" aria-hidden="true">#</a> 双向绑定原理</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>观察者模式

object<span class="token punctuation">.</span>defineProperty  添加属性
给一个对象添加属性<span class="token punctuation">;</span>
可以监听对象这个属性的取值和赋值<span class="token punctuation">;</span>
实现双向绑定的技术

<span class="token keyword">let</span> _name<span class="token punctuation">;</span>
object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>s<span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> _name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
        _name<span class="token operator">=</span>value
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">赋值调用set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">取值调用get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 


vue3<span class="token punctuation">.</span><span class="token number">0</span>用的是
proxy对象
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h1 id="bus模式传值" tabindex="-1"><a class="header-anchor" href="#bus模式传值" aria-hidden="true">#</a> bus模式传值</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">-</span>bus<span class="token punctuation">.</span>js<span class="token operator">-</span>
    <span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">-</span>one<span class="token punctuation">.</span>vue<span class="token operator">-</span>
    <span class="token operator">&lt;</span>div @click<span class="token operator">=</span><span class="token string">&quot;dosend&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    methods<span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">dosend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;one-change&#39;</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
    	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token operator">-</span>two<span class="token punctuation">.</span>vue<span class="token operator">-</span>
   <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        Bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&#39;one-change&#39;</span><span class="token punctuation">,</span><span class="token parameter">val</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>twodata <span class="token operator">=</span> val
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//  bus.js中只需要写这么多就ok</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$bus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token comment">//  在main.js中引入创建好的bus.js文件</span>
<span class="token keyword">import</span> bus <span class="token keyword">from</span> <span class="token string">&#39;./bus.js&#39;</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bus<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span><span class="token punctuation">,</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot; $bus.$emit(&#39;info&#39;,&#39;哈哈&#39;)&quot;</span><span class="token operator">&gt;</span>点击兄弟传值<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token comment">//  直接使用生命周期来接受,可以赋值给其他参数！</span>
<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&#39;info&#39;</span><span class="token punctuation">,</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h1 id="mvc模式mvvm模式" tabindex="-1"><a class="header-anchor" href="#mvc模式mvvm模式" aria-hidden="true">#</a> MVC模式MVVM模式</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">-</span> <span class="token constant">M</span>：model
<span class="token operator">-</span> <span class="token constant">V</span>： view
<span class="token operator">-</span> <span class="token constant">C</span>： controller

<span class="token operator">&gt;</span> m负责承载数据，<span class="token constant">V</span>负责界面展示，<span class="token constant">C</span>负责逻辑和负责调用数据方法再找到对应的界面元素赋值给它

<span class="token operator">-</span> 缺点：程序要写一些无聊的代码：找到<span class="token constant">DOM</span>元素，给它的value或者给其他属性赋值 例： dom<span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">.</span>msg
<span class="token operator">-</span> 监听界面的事件，根据最新变化赋值给model 例<span class="token operator">=</span>： data<span class="token punctuation">.</span>msg <span class="token operator">=</span> dom<span class="token punctuation">.</span>value



<span class="token operator">-</span> <span class="token constant">MVVM</span>其实就是聪明的大牛，发现这一部分无聊的代码，我可以写一个框架，帮你去处理
<span class="token operator">-</span> 这个中心，叫vm，可以帮你观察数据变化再自动更新到<span class="token constant">DOM</span>，以及从<span class="token constant">DOM</span>监听变化，自动更新到数据
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h1 id="vue-ssr" tabindex="-1"><a class="header-anchor" href="#vue-ssr" aria-hidden="true">#</a> VUE-SSR</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>同构 <span class="token operator">=</span> 服务器<span class="token operator">+</span>spa
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="nuxt" tabindex="-1"><a class="header-anchor" href="#nuxt" aria-hidden="true">#</a> nuxt</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm i save nuxt
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>realworld</p><p>https://github.com/gothinkster/realworld-starter-kit/blob/master/FRONTEND_INSTRUCTIONS.md</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>钩子 asyncData

nuxt提供的
在服务端就掉用<span class="token punctuation">,</span>在vue beforeCreate 之前
asyncData <span class="token operator">&gt;</span> beforeCreate

beforeCreate 在服务端也会调用<span class="token punctuation">,</span>两次调用


一般用
在mounted 里 获取操作后再 发请求
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h1 id="jsonp" tabindex="-1"><a class="header-anchor" href="#jsonp" aria-hidden="true">#</a> jsonp</h1><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h1 id="touch事件" tabindex="-1"><a class="header-anchor" href="#touch事件" aria-hidden="true">#</a> touch事件</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>touchstart事件：当手指触摸屏幕时候触发，即使已经有一个手指放在屏幕上也会触发。

<span class="token function">touchmove事件：当手指在屏幕上滑动的时候连续地触发。在这个事件发生期间，调用preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>事件可以阻止滚动。

touchend事件：当手指从屏幕上离开的时候触发。

touchcancel事件：当系统停止跟踪触摸的时候触发。关于这个事件的确切出发时间，文档中并没有具体说明，咱们只能去猜测了。


clientX：触摸目标在视口中的x坐标。

clientY：触摸目标在视口中的y坐标。

identifier：标识触摸的唯一<span class="token constant">ID</span>。

pageX：触摸目标在页面中的x坐标。

pageY：触摸目标在页面中的y坐标。

screenX：触摸目标在屏幕中的x坐标。

screenY：触摸目标在屏幕中的y坐标。

target：触目的<span class="token constant">DOM</span>节点目标。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>触摸事件封装</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token constant">MIN_DISTANCE</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getDirection</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&gt;</span> y <span class="token operator">&amp;&amp;</span> x <span class="token operator">&gt;</span> <span class="token constant">MIN_DISTANCE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&#39;horizontal&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">&gt;</span> x <span class="token operator">&amp;&amp;</span> y <span class="token operator">&gt;</span> <span class="token constant">MIN_DISTANCE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&#39;vertical&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> TouchMixin <span class="token operator">=</span> _vue<span class="token punctuation">.</span>default<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      direction<span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">touchStart</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">touchStart</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resetTouchStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>startX <span class="token operator">=</span> event<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>startY <span class="token operator">=</span> event<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">touchMove</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">touchMove</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> touch <span class="token operator">=</span> event<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>deltaX <span class="token operator">=</span> touch<span class="token punctuation">.</span>clientX <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startX<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>deltaY <span class="token operator">=</span> touch<span class="token punctuation">.</span>clientY <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startY<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>offsetX <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>deltaX<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>offsetY <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>deltaY<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>direction <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>direction <span class="token operator">||</span> <span class="token function">getDirection</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>offsetX<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">resetTouchStatus</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">resetTouchStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>direction <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>deltaX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>deltaY <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>offsetX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>offsetY <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h1 id="本地模拟服务器http-server" tabindex="-1"><a class="header-anchor" href="#本地模拟服务器http-server" aria-hidden="true">#</a> 本地模拟服务器http-server</h1><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm i http-server -g
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>http<span class="token operator">-</span>server <span class="token operator">-</span>o 
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-p 或者 --port</td><td>端口设置，默认是 <code>8080</code></td></tr><tr><td>-a</td><td>监听地址设置默认是 <code>0.0.0.0</code></td></tr><tr><td>-d</td><td>是否显示文件列表 默认<code>true</code></td></tr><tr><td>-i</td><td>显示自动索引 默认<code>true</code></td></tr><tr><td>-g 或者 --gzip</td><td>默认<code>false</code>，当文件的<code>gzip</code>版本存在且请求接受<code>gzip</code>编码时，它将服务于<code>./public/some-file.js.gz</code>，而不是<code>./public/some-file.js</code></td></tr><tr><td>-e 或者 --ext</td><td>如果没有提供默认文件扩展名(默认为<code>html</code>)</td></tr><tr><td>-s 或者 --silent</td><td>禁止控制台日志信息输出</td></tr><tr><td>–cors</td><td>允许跨域资源共享</td></tr><tr><td>-o</td><td>启动服务后打开默认浏览器</td></tr><tr><td>-c</td><td>设置缓存<code>cache-control max-age heade</code>存留时间（以秒为单位），示例：<code>-c10</code>是<code>10</code>秒，默认是<code>3600</code>秒，如果要禁用缓存就使用<code>-c-1</code></td></tr><tr><td>-U 或者 --utc</td><td>使用 <code>UTC</code>格式，在控制台输出时间信息</td></tr><tr><td>-P 或者 --proxy</td><td>通过一个 <code>url</code>地址，代理不能通过本地解析的资源</td></tr><tr><td>-S 或者 --ssl</td><td>使用<code>https</code>协议</td></tr><tr><td>-C 或者 --cert</td><td><code>ssl</code>证书文件的路径，默认是<code>cert.pem</code></td></tr><tr><td>-K 或者 --key</td><td><code>ssl</code>密匙文件路径</td></tr><tr><td>-h 或者 --help</td><td>显示帮助</td></tr></tbody></table><h1 id="时间封装mixin" tabindex="-1"><a class="header-anchor" href="#时间封装mixin" aria-hidden="true">#</a> 时间封装mixin</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>mixin<span class="token punctuation">.</span>js
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/** 格式化时间戳 */</span>
    <span class="token function">MixinUnixToDate</span><span class="token punctuation">(</span><span class="token parameter">timeStamp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      date<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span>timeStamp<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 精确到毫秒、如果没有到毫秒就 date.setTime(timeStamp*1000);</span>
      <span class="token keyword">let</span> y <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> m <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
      m <span class="token operator">=</span> m <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token string">&#39;0&#39;</span> <span class="token operator">+</span> m<span class="token punctuation">)</span> <span class="token operator">:</span> m<span class="token punctuation">;</span>
      <span class="token keyword">let</span> d <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      d <span class="token operator">=</span> d <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token string">&#39;0&#39;</span> <span class="token operator">+</span> d<span class="token punctuation">)</span> <span class="token operator">:</span> d<span class="token punctuation">;</span>
      <span class="token keyword">let</span> h <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      h <span class="token operator">=</span> h <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token string">&#39;0&#39;</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">:</span> h<span class="token punctuation">;</span>
      <span class="token keyword">let</span> minute <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> second <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      minute <span class="token operator">=</span> minute <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token string">&#39;0&#39;</span> <span class="token operator">+</span> minute<span class="token punctuation">)</span> <span class="token operator">:</span> minute<span class="token punctuation">;</span>
      second <span class="token operator">=</span> second <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token string">&#39;0&#39;</span> <span class="token operator">+</span> second<span class="token punctuation">)</span> <span class="token operator">:</span> second<span class="token punctuation">;</span>
      <span class="token keyword">return</span> y <span class="token operator">+</span> <span class="token string">&#39;-&#39;</span> <span class="token operator">+</span> m <span class="token operator">+</span> <span class="token string">&#39;-&#39;</span> <span class="token operator">+</span> d<span class="token operator">+</span><span class="token string">&#39; &#39;</span><span class="token operator">+</span>h<span class="token operator">+</span><span class="token string">&#39;:&#39;</span><span class="token operator">+</span>minute<span class="token operator">+</span><span class="token string">&#39;:&#39;</span><span class="token operator">+</span>second<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token doc-comment comment">/**
     * 计算传秒数的倒计时【天、时、分、秒】
     * <span class="token keyword">@param</span> <span class="token parameter">seconds</span>
     * <span class="token keyword">@returns</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token punctuation">{</span>day <span class="token operator">:</span> <span class="token operator">*</span><span class="token punctuation">,</span> hours <span class="token operator">:</span> <span class="token operator">*</span><span class="token punctuation">,</span> minutes <span class="token operator">:</span> <span class="token operator">*</span><span class="token punctuation">,</span> seconds <span class="token operator">:</span> <span class="token operator">*</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
     */</span>
    <span class="token function">countTimeDown</span><span class="token punctuation">(</span><span class="token parameter">date1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> time <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> date2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//当前系统时间</span>
      <span class="token keyword">var</span> date3 <span class="token operator">=</span> date2<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//时间差的毫秒数</span>
      <span class="token keyword">var</span> hours <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>date3 <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//相差小时</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>hours <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        time <span class="token operator">=</span> hours <span class="token operator">+</span> <span class="token string">&#39;小时前更新&#39;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>hours <span class="token operator">&gt;</span> <span class="token number">24</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//如果小时大于24，计算出天和小时</span>
          <span class="token keyword">var</span> day <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>hours <span class="token operator">/</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          hours <span class="token operator">%=</span> <span class="token number">24</span><span class="token punctuation">;</span><span class="token comment">//算出有多分钟</span>
          time <span class="token operator">=</span> day <span class="token operator">+</span> <span class="token string">&#39;天&#39;</span> <span class="token operator">+</span> hours <span class="token operator">+</span> <span class="token string">&#39;小时前更新&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">//计算相差分钟数</span>
        <span class="token keyword">var</span> leave2 <span class="token operator">=</span> date3 <span class="token operator">%</span> <span class="token punctuation">(</span><span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//计算小时数后剩余的毫秒数</span>
        <span class="token keyword">var</span> minutes <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>leave2 <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>minutes <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          time <span class="token operator">=</span> minutes <span class="token operator">+</span> <span class="token string">&#39;分钟前更新&#39;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          time <span class="token operator">=</span> <span class="token string">&#39;刚刚更新&#39;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> time<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>main<span class="token punctuation">.</span>js
<span class="token keyword">import</span> mixin <span class="token keyword">from</span> <span class="token string">&#39;./mixin&#39;</span>
 
Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span>mixin<span class="token punctuation">)</span>
全局注册

js中使用<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">MixinUnixToDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
html中<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token function">countTimeDown</span><span class="token punctuation">(</span>参数<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$Time <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">selectTime</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> allTime <span class="token operator">=</span> e
                <span class="token keyword">var</span> dateTime <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                <span class="token keyword">var</span> time <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
                <span class="token keyword">var</span> week <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getWeek</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39;-&#39;</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                    allTime<span class="token punctuation">,</span>
                    dateTime<span class="token punctuation">,</span>
                    time<span class="token punctuation">,</span>
                    week
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">addOneDay</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token keyword">var</span> time <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
                <span class="token keyword">var</span> dateTime <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;-&#39;</span><span class="token punctuation">)</span>
                dateTime<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>dateTime<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
                dateTime <span class="token operator">=</span> dateTime<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;-&#39;</span><span class="token punctuation">)</span>
                <span class="token keyword">var</span> week <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getWeek</span><span class="token punctuation">(</span>dateTime<span class="token punctuation">,</span> <span class="token string">&#39;-&#39;</span><span class="token punctuation">)</span>
                <span class="token keyword">var</span> allTime <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dateTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                    allTime<span class="token punctuation">,</span>
                    dateTime<span class="token punctuation">,</span>
                    time<span class="token punctuation">,</span>
                    week
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">getWeek</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">date<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> arys1 <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//日期为输入日期，格式为 2013-3-10</span>
                <span class="token keyword">var</span> ssdate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>arys1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>arys1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> arys1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> week1 <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>ssdate<span class="token punctuation">.</span><span class="token function">getDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;日&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;一&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;二&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;三&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;四&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;五&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;6&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;六&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> week <span class="token operator">=</span> <span class="token string">&quot;星期&quot;</span> <span class="token operator">+</span> week1<span class="token punctuation">;</span>
                <span class="token keyword">return</span> week<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">getNewTime</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>time<span class="token punctuation">)</span> <span class="token punctuation">{</span>

                    <span class="token keyword">var</span> myDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">000</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">var</span> myDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">var</span> year <span class="token operator">=</span> myDate<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> month <span class="token operator">=</span> myDate<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&#39;0&#39;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>myDate<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> myDate<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> day <span class="token operator">=</span> myDate<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&#39;0&#39;</span> <span class="token operator">+</span> myDate<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> myDate<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">var</span> hours <span class="token operator">=</span> myDate<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&#39;0&#39;</span> <span class="token operator">+</span> myDate<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> myDate<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">var</span> minutes <span class="token operator">=</span> myDate<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&#39;0&#39;</span> <span class="token operator">+</span> myDate<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> myDate<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">==</span> <span class="token string">&#39;2&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token operator">++</span>day
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                    allTime<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>year<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>month<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>day<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hours<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>minutes<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                    time<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hours<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>minutes<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                    dateTime<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>year<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>month<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>day<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                    week<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getWeek</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>year<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>month<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>day<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">&#39;-&#39;</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">timeTamp</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">getSTime</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//开始时间转成时间戳</span>

                <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setHours</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">getETime</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//结束时间转成时间戳</span>

                <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">16</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">getTime</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//获取当前时间戳</span>

                <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">payEndTime</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">getOnlineStatus</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 1离线 0在线</span>
                <span class="token keyword">var</span> status <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

                <span class="token keyword">var</span> timeDiff <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> time<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">;</span>
                status <span class="token operator">=</span> timeDiff <span class="token operator">&gt;=</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> status<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br></div></div><h1 id="vue开发环境与生产环境-跨域" tabindex="-1"><a class="header-anchor" href="#vue开发环境与生产环境-跨域" aria-hidden="true">#</a> vue开发环境与生产环境 跨域</h1><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>https://segmentfault.com/a/1190000017905030?utm_source=tag-newest
https://github.com/chimurai/http-proxy-middleware#proxycontext-config
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>/config /index.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//自行复制黏贴</span>
proxyTable<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">&#39;/apis&#39;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    target<span class="token operator">:</span> <span class="token string">&#39;http://10.1.63.26:19080/&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 后台api</span>
    changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">//是否跨域</span>
    <span class="token comment">// secure: true,</span>
    pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#39;^/apis&#39;</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span>   <span class="token comment">//需要rewrite的,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>/config /api.config.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//判断是否是生产环境</span>
<span class="token keyword">var</span> isPro <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;production&#39;</span> <span class="token comment">//process.env.NODE_ENV用于区分是生产环境还是开发环境</span>
<span class="token comment">//根据环境不同导出不同的baseURL</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    baseURL<span class="token operator">:</span> isPro <span class="token operator">?</span> <span class="token string">&#39;http://sbsb.com:8888/&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;/apis&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>main.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>
<span class="token keyword">import</span> apiConfig <span class="token keyword">from</span> <span class="token string">&#39;../config/api.config.js&#39;</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL<span class="token operator">=</span>apiConfig<span class="token punctuation">.</span>baseURL
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>encodeURIComponent() 函数可把字符串作为 URI 组件进行编码。</p><h2 id="vue-cli3-0" tabindex="-1"><a class="header-anchor" href="#vue-cli3-0" aria-hidden="true">#</a> vue-cli3.0+</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>根目录中创建vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js文件<span class="token operator">:</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
devServer <span class="token operator">:</span> <span class="token punctuation">{</span>
        proxy <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">&#39;/index&#39;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
                target <span class="token operator">:</span> <span class="token string">&#39;http://localhost/index&#39;</span><span class="token punctuation">,</span>
                <span class="token comment">// ws : true,</span>
                changeOrigin <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                pathRewrite <span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token string">&#39;^/index&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">&#39;/index&#39;</span>
链接：https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>juejin<span class="token punctuation">.</span>im<span class="token operator">/</span>post<span class="token operator">/</span><span class="token number">5</span>d1cc073f265da1bcb4f486d

build后 基地在为运行时的地址


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>
<span class="token keyword">var</span> baseUrl <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>

<span class="token comment">// 环境判断</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   baseUrl <span class="token operator">=</span> <span class="token string">&#39;/index&#39;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;test&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  baseUrl <span class="token operator">=</span> <span class="token string">&#39;test&#39;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  baseUrl <span class="token operator">=</span> <span class="token string">&#39;www.prodction.com&#39;</span>
<span class="token punctuation">}</span>

axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> baseUrl

build后 基地址为 production 的地址
	如<span class="token operator">:</span>www<span class="token punctuation">.</span>prodction<span class="token punctuation">.</span>com<span class="token operator">/</span>user

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>第二种<span class="token operator">:</span>无需配置axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
devServer <span class="token operator">:</span> <span class="token punctuation">{</span>
      proxy<span class="token operator">:</span> <span class="token string">&quot;http://localhost:3000&quot;</span><span class="token punctuation">,</span>
      port<span class="token operator">:</span> <span class="token number">8080</span>
<span class="token punctuation">}</span>
    
build后 基地在为运行时的地址<span class="token punctuation">;</span>
    如<span class="token operator">:</span>生产环境地址为www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com
    	请求接口地址为<span class="token operator">:</span>www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com<span class="token operator">/</span>user<span class="token punctuation">;</span>
    	而不是http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3000</span><span class="token operator">/</span>user
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="vue-cli3-0-配置文件-命令行跨域解决方案" tabindex="-1"><a class="header-anchor" href="#vue-cli3-0-配置文件-命令行跨域解决方案" aria-hidden="true">#</a> vue-cli3.0+ 配置文件+命令行跨域解决方案</h2><ol><li>在package.json同级目录下创建 环境配置文件 .env.xxx (xxx一般为:dev / pro /test )</li><li>package.json配置 命令行</li><li>配置axios.defaults.baseURL</li><li>vue.config.js配置跨域</li></ol><blockquote><p>1.在package.json同级目录下创建 环境配置文件</p><p><img src="D:\walle笔记-notes-\8、VUE\VUE.assets\image-20200305161012418-1583633264842.png" alt="image-20200305161012418"></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>文件内容格式如下<span class="token operator">:</span>按需
<span class="token constant">NODE_ENV</span><span class="token operator">=</span><span class="token string">&quot;development&quot;</span>                            <span class="token comment">//环境名</span>
<span class="token constant">VUE_APP_BASE_URL</span><span class="token operator">=</span><span class="token string">&quot;http://xxx.xxx.xxx&quot;</span>             <span class="token comment">//服务器地址</span>
<span class="token constant">VUE_APP_BASE_API</span><span class="token operator">=</span><span class="token string">&quot;http://xxx.xxx.xxx:port&quot;</span>        <span class="token comment">//接口地址</span>
<span class="token constant">VUE_APP_DIR_NAME</span><span class="token operator">=</span><span class="token string">&quot;xxx&quot;</span>                            <span class="token comment">//打包名</span>

注意<span class="token operator">:</span>
	<span class="token number">1.</span>必须以<span class="token constant">VUE_APP</span>开头
   <span class="token number">2.</span>上面地址引号后不可有空格
   <span class="token number">3.</span>设置跨域后<span class="token constant">VUE_APP_BASE_API</span>接上vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js文件中proxy设置的<span class="token string">&#39;/api&#39;</span>
	如<span class="token operator">:</span><span class="token constant">VUE_APP_BASE_API</span><span class="token operator">=</span><span class="token string">&quot;http://xxx.xxx.xxx:port/api&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>2.package.json配置 命令行</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
 <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qywx&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.1.0&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;private&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
 <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token property">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service serve&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service build&quot;</span><span class="token punctuation">,</span>
     <span class="token comment">//&#39;development&#39;为.env.xxx文件中NODE_ENV对应</span>
     <span class="token comment">// --mode 后制定执行的文件</span>
   <span class="token property">&quot;serve:dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service serve --mode development&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;build:pro&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service build --mode production&quot;</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span> 

命令窗口运行<span class="token operator">:</span>npm run serve<span class="token operator">:</span>dev 开发模式
命令窗口运行<span class="token operator">:</span>npm run build<span class="token operator">:</span>pro 打包生产模式
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>3.配置axios.defaults.baseURL</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_BASE_API</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>4.vue.config.js中devserver配置跨域;</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> env <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">;</span>
<span class="token comment">// npm i compression-webpack-plugin -D</span>
<span class="token keyword">const</span> CompressionWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;compression-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token comment">// 如果是hash模式</span>
   publicPath<span class="token operator">:</span> env <span class="token operator">===</span> <span class="token string">&#39;production&#39;</span> <span class="token operator">?</span> <span class="token string">&#39;./&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span>

   <span class="token comment">// 如果是history模式</span>
   <span class="token comment">// publicPath: env === &#39;production&#39; ? &#39;/&#39; : &#39;/&#39;,</span>
   outputDir<span class="token operator">:</span> <span class="token string">&#39;dist/c&#39;</span><span class="token punctuation">,</span>
   filenameHashing<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
   productionSourceMap<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

   <span class="token comment">// 输出文件目录默认&#39;dist</span>
   outputDir<span class="token operator">:</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">,</span>

   runtimeCompiler<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

   <span class="token comment">// 静态资源目录 (js, css, img, fonts)</span>

   assetsDir<span class="token operator">:</span> <span class="token string">&quot;assets&quot;</span><span class="token punctuation">,</span>
   <span class="token comment">//设置打包之后是否打包.map文件</span>
   productionSourceMap<span class="token operator">:</span> env <span class="token operator">!==</span> <span class="token string">&quot;development&quot;</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

   <span class="token comment">// 所有 webpack-dev-server 的选项都支持</span>
   devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
       port<span class="token operator">:</span> <span class="token number">8083</span><span class="token punctuation">,</span>
       host<span class="token operator">:</span> <span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span>
       hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
       open<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
       disableHostCheck<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
       proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
           <span class="token comment">// axios.defaults.baseURL = &#39;/api&#39;</span>
           <span class="token comment">//或axios.defaults.baseURL = &#39;http://xxxxx/api&#39;</span>
           <span class="token string">&#39;/api&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
               target<span class="token operator">:</span> <span class="token string">&quot;http://localhost:3000&quot;</span><span class="token punctuation">,</span>
               <span class="token comment">// ws: true,</span>
               changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
               pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
                   <span class="token string">&#39;^/api&#39;</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
               <span class="token punctuation">}</span>
           <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token punctuation">}</span>
       <span class="token comment">// proxy: &quot;http://localhost:3000&quot;,</span>

   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token function-variable function">configureWebpack</span><span class="token operator">:</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>env <span class="token operator">!==</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token comment">// 配置打包 压缩js</span>
           config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
               <span class="token keyword">new</span> <span class="token class-name">CompressionWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                   algorithm<span class="token operator">:</span> <span class="token string">&quot;gzip&quot;</span><span class="token punctuation">,</span>
                   test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$|\.html$|.\css</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">//匹配文件名</span>
                   threshold<span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span> <span class="token comment">//对超过10k的数据压缩</span>
                   deleteOriginalAssets<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//不删除源文件</span>
                   minRatio<span class="token operator">:</span> <span class="token number">0.8</span>
               <span class="token punctuation">}</span><span class="token punctuation">)</span>
           <span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h1 id="登陆判断" tabindex="-1"><a class="header-anchor" href="#登陆判断" aria-hidden="true">#</a> 登陆判断</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>登陆请求<span class="token operator">&gt;</span> 获取token且存入vuex和cookie<span class="token punctuation">,</span>进入一个值设置为登陆状态 <span class="token operator">&gt;</span> 刷新先判断登录状态<span class="token operator">&gt;</span>有<span class="token operator">&gt;</span>是否有token无则重新请求获取token<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h1 id="权限管理" tabindex="-1"><a class="header-anchor" href="#权限管理" aria-hidden="true">#</a> 权限管理</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>固定路由表：
异步路由表，含meta

 后端返回用户权限字段；admin
 遍历路由是否含有roles里有admin字段； 含有的
 使用router。addRouters动态添加匹配的路由表；做为该用户访问的路由
 固定路由表<span class="token operator">+</span>过滤后的路由表 



</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Date格式化</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">format</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fmt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;M+&quot;</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">//月份</span>
            <span class="token string">&quot;d+&quot;</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//日</span>
            <span class="token string">&quot;h+&quot;</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//小时</span>
            <span class="token string">&quot;m+&quot;</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//分</span>
            <span class="token string">&quot;s+&quot;</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//秒</span>
            <span class="token string">&quot;q+&quot;</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//季度</span>
            <span class="token constant">S</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMilliseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//毫秒</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(y+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>fmt<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fmt <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
                  RegExp<span class="token punctuation">.</span>$<span class="token number">1</span><span class="token punctuation">,</span>
                  <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">-</span> RegExp<span class="token punctuation">.</span>$<span class="token number">1.</span>length<span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;(&quot;</span> <span class="token operator">+</span> k <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>fmt<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  fmt <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
                        RegExp<span class="token punctuation">.</span>$<span class="token number">1</span><span class="token punctuation">,</span>
                        RegExp<span class="token punctuation">.</span>$<span class="token number">1.</span>length <span class="token operator">==</span> <span class="token number">1</span>
                              <span class="token operator">?</span> o<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
                              <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token string">&quot;00&quot;</span> <span class="token operator">+</span> o<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span> <span class="token operator">+</span> o<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
                  <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> fmt<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
调用<span class="token operator">:</span>
<span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>插件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>cross<span class="token operator">-</span>env
用于命令行 定义变量 

npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev cross<span class="token operator">-</span>env

<span class="token punctuation">{</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=production webpack --config build/webpack.config.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>chainWebpack


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>configureWebpack

merge
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h1 id="无感刷新token" tabindex="-1"><a class="header-anchor" href="#无感刷新token" aria-hidden="true">#</a> 无感刷新token</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>segmentfault<span class="token punctuation">.</span>com<span class="token operator">/</span>a<span class="token operator">/</span><span class="token number">1190000020210980</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>

<span class="token comment">// 从localStorage中获取token</span>
<span class="token keyword">function</span> <span class="token function">getLocalToken</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> token <span class="token operator">=</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;token&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> token
<span class="token punctuation">}</span>

<span class="token comment">// 给实例添加一个setToken方法，用于登录后将最新token动态添加到header，同时将token保存在localStorage中</span>
instance<span class="token punctuation">.</span><span class="token function-variable function">setToken</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  instance<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">&#39;X-Token&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> token
  window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&#39;token&#39;</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">refreshToken</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// instance是当前request.js中已创建的axios实例</span>
    <span class="token keyword">return</span> instance<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/refreshtoken&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 创建一个axios实例</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  baseURL<span class="token operator">:</span> <span class="token string">&#39;/api&#39;</span><span class="token punctuation">,</span>
  timeout<span class="token operator">:</span> <span class="token number">300000</span><span class="token punctuation">,</span>
  headers<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;application/json&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;X-Token&#39;</span><span class="token operator">:</span> <span class="token function">getLocalToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// headers塞token</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 是否正在刷新的标记</span>
<span class="token keyword">let</span> isRefreshing <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token comment">// 重试队列，每一项将是一个待执行的函数形式</span>
<span class="token keyword">let</span> requests <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> code <span class="token punctuation">}</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>data
  <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">===</span> <span class="token number">1234</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> config <span class="token operator">=</span> response<span class="token punctuation">.</span>config
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isRefreshing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      isRefreshing <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token keyword">return</span> <span class="token function">refreshToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> token <span class="token punctuation">}</span> <span class="token operator">=</span> res<span class="token punctuation">.</span>data
        instance<span class="token punctuation">.</span><span class="token function">setToken</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span>
        config<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">&#39;X-Token&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> token
        config<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
        <span class="token comment">// 已经刷新了token，将所有队列中的请求进行重试</span>
        requests<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">cb</span> <span class="token operator">=&gt;</span> <span class="token function">cb</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span>
        requests <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span> <span class="token function">instance</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;refreshtoken error =&gt;&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
        window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&#39;/&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        isRefreshing <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 正在刷新token，将返回一个未执行resolve的promise</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 将resolve放进队列，用一个函数形式来保存，等token刷新后直接执行</span>
        requests<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          config<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
          config<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">&#39;X-Token&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> token
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">instance</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> response
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> instance
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br></div></div><h1 id="git项目" tabindex="-1"><a class="header-anchor" href="#git项目" aria-hidden="true">#</a> git项目</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>nieyangyang712<span class="token operator">/</span>vuecli4<span class="token punctuation">.</span><span class="token number">0</span><span class="token operator">-</span>admin
vue<span class="token operator">-</span>cli4 状态管理器vuex <span class="token constant">UI</span>框架<span class="token punctuation">,</span>element<span class="token operator">-</span>ui 路由vue<span class="token operator">-</span>router<span class="token punctuation">,</span><span class="token constant">HTTP</span>请求<span class="token punctuation">,</span>axios 接口<span class="token punctuation">,</span>api<span class="token punctuation">.</span>js 环境<span class="token punctuation">,</span>dev test uat prod 本地存储<span class="token punctuation">,</span>localStorage 登录<span class="token punctuation">,</span> 兼容性ie9及以上
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>移动端饿了么
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>bailicangdu<span class="token operator">/</span>vue2<span class="token operator">-</span>elm

node接口
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>bailicangdu<span class="token operator">/</span>node<span class="token operator">-</span>elm
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>多页应用打包参考</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>seizeDev<span class="token operator">/</span>vue<span class="token operator">-</span>more<span class="token operator">-</span>pages<span class="token punctuation">.</span>git
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>常用插件</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ly-tab  移动端可滑动（惯性滑动&amp;回弹）Vue导航栏组件 ly-tab

fastclick 解决移动端300毫秒
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h1 id="vue-cli-eslint-prettier-code-formatter" tabindex="-1"><a class="header-anchor" href="#vue-cli-eslint-prettier-code-formatter" aria-hidden="true">#</a> vue-cli Eslint + prettier- Code formatter</h1><p>https://www.jianshu.com/p/65462d2dd51e</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>setting

<span class="token punctuation">{</span>
  <span class="token string">&quot;editor.formatOnPaste&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;editor.formatOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;editor.formatOnType&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;prettier.singleQuote&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;prettier.semi&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;prettier.trailingComma&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;eslint.autoFixOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;eslint.migration.2_x&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">.</span>eslintrc<span class="token punctuation">.</span>js
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  root<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  env<span class="token operator">:</span> <span class="token punctuation">{</span>
    node<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;plugin:vue/essential&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;eslint:recommended&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;@vue/prettier&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token string">&#39;babel-eslint&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&#39;no-console&#39;</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;production&#39;</span> <span class="token operator">?</span> <span class="token string">&#39;warn&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;no-debugger&#39;</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;production&#39;</span> <span class="token operator">?</span> <span class="token string">&#39;warn&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;prettier/prettier&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        tabWidth<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        useTabs<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        semi<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        singleQuote<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        trailingComma<span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
        bracketSpacing<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        jsxBracketSameLine<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        arrowParens<span class="token operator">:</span> <span class="token string">&#39;always&#39;</span><span class="token punctuation">,</span>
        printWidth<span class="token operator">:</span> <span class="token number">200</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
    <span class="token comment">// &#39;vue/singleline-html-element-content-newline&#39;: true,</span>
    <span class="token comment">// &#39;vue/multiline-html-element-content-newline&#39;: true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token string">&#39;babel-eslint&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  globals<span class="token operator">:</span> <span class="token punctuation">{</span>
    $App<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p>vue data中的时间个格式的字符串,请求传参时会转为UTC格式</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">changeDate</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> dateee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>dateee<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">T</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.[\d]{3}Z</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> date<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">28</span>T16<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00.000</span>Z 转 <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">29</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">20</span>
<span class="token constant">UTC</span>转北京时间
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>时间格式化</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//时间格式化函数，此处仅针对yyyy-MM-dd hh:mm:ss 的格式进行格式化</span>
<span class="token function-variable function">dateFormat</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> date<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> year<span class="token operator">=</span>date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 在日期格式中，月份是从0开始的，因此要加0
     * 使用三元表达式在小于10的前面加0，以达到格式统一  如 09:11:05
     * */</span>
    <span class="token keyword">var</span> month<span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span><span class="token operator">+</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> day<span class="token operator">=</span>date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span><span class="token operator">+</span>date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> hours<span class="token operator">=</span>date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span><span class="token operator">+</span>date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> minutes<span class="token operator">=</span>date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span><span class="token operator">+</span>date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> seconds<span class="token operator">=</span>date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span><span class="token operator">+</span>date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 拼接</span>
    <span class="token keyword">return</span> year<span class="token operator">+</span><span class="token string">&quot;-&quot;</span><span class="token operator">+</span>month<span class="token operator">+</span><span class="token string">&quot;-&quot;</span><span class="token operator">+</span>day<span class="token operator">+</span><span class="token string">&quot; &quot;</span><span class="token operator">+</span>hours<span class="token operator">+</span><span class="token string">&quot;:&quot;</span><span class="token operator">+</span>minutes<span class="token operator">+</span><span class="token string">&quot;:&quot;</span><span class="token operator">+</span>seconds<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token function">使用dateFormat</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">30</span>T01<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">000</span><span class="token operator">+</span><span class="token number">000</span>Z<span class="token punctuation">)</span> <span class="token comment">//2020-04-30 01:00:00</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h1 id="瀑布流实现" tabindex="-1"><a class="header-anchor" href="#瀑布流实现" aria-hidden="true">#</a> 瀑布流实现</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;zj_waterfall&quot;</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;col&quot;</span>
         ref<span class="token operator">=</span><span class="token string">&quot;col1&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>transition<span class="token operator">-</span>group name<span class="token operator">=</span><span class="token string">&quot;list&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item&quot;</span>
             v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in dataList1&quot;</span>
             <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item&quot;</span><span class="token operator">&gt;</span>

          <span class="token operator">&lt;</span>img <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item_img&quot;</span> <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">&quot;item.src&quot;</span>
               alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item_text&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item_tag&quot;</span><span class="token operator">&gt;</span>标签<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>transition<span class="token operator">-</span>group<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;col&quot;</span>
         ref<span class="token operator">=</span><span class="token string">&quot;col2&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>transition<span class="token operator">-</span>group name<span class="token operator">=</span><span class="token string">&quot;list&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item&quot;</span>
             v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in dataList2&quot;</span>
             <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>img <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item_img&quot;</span> <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">&quot;item.src&quot;</span>
               alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item_text&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item_tag&quot;</span><span class="token operator">&gt;</span>标签<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>transition<span class="token operator">-</span>group<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;col&quot;</span>
         ref<span class="token operator">=</span><span class="token string">&quot;col3&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>transition<span class="token operator">-</span>group name<span class="token operator">=</span><span class="token string">&quot;list&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item&quot;</span>
             v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in dataList3&quot;</span>
             <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item&quot;</span><span class="token operator">&gt;</span>

          <span class="token operator">&lt;</span>img <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item_img&quot;</span> <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">&quot;item.src&quot;</span>
               alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item_text&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item_tag&quot;</span><span class="token operator">&gt;</span>标签<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>transition<span class="token operator">-</span>group<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;col&quot;</span>
         ref<span class="token operator">=</span><span class="token string">&quot;col4&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>transition<span class="token operator">-</span>group name<span class="token operator">=</span><span class="token string">&quot;list&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item&quot;</span>
             v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in dataList4&quot;</span>
             <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>img <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item_img&quot;</span> <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">&quot;item.src&quot;</span>
               alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item_text&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item_tag&quot;</span><span class="token operator">&gt;</span>标签<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>transition<span class="token operator">-</span>group<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      mainMenuList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      dataList1<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      dataList2<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      dataList3<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      dataList4<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">mountMenu</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> temp <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mainMenuList<span class="token punctuation">;</span>
      <span class="token keyword">var</span> index <span class="token operator">=</span> arg <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> refName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">selectCol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">[</span>refName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mainMenuList<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">mountMenu</span><span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">selectCol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> <span class="token function-variable function">getHeight</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>ref<span class="token punctuation">]</span><span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> height1 <span class="token operator">=</span> <span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token string">&quot;col1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> height2 <span class="token operator">=</span> <span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token string">&quot;col2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> height3 <span class="token operator">=</span> <span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token string">&quot;col3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> height4 <span class="token operator">=</span> <span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token string">&quot;col4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>height1<span class="token punctuation">,</span> height2<span class="token punctuation">,</span> height3<span class="token punctuation">,</span> height4<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> height1<span class="token operator">:</span>
          <span class="token keyword">return</span> <span class="token string">&quot;dataList1&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> height2<span class="token operator">:</span>
          <span class="token keyword">return</span> <span class="token string">&quot;dataList2&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> height3<span class="token operator">:</span>
          <span class="token keyword">return</span> <span class="token string">&quot;dataList3&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> height4<span class="token operator">:</span>
          <span class="token keyword">return</span> <span class="token string">&quot;dataList4&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>mainMenuList <span class="token operator">=</span> <span class="token punctuation">[</span>
           <span class="token punctuation">{</span>text<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>src<span class="token operator">:</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../static/img/1.png&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token punctuation">{</span>text<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>src<span class="token operator">:</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../static/img/2.png&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token punctuation">{</span>text<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>src<span class="token operator">:</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../static/img/3.png&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token punctuation">{</span>text<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span>src<span class="token operator">:</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../static/img/4.png&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token punctuation">{</span>text<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>src<span class="token operator">:</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../static/img/5.png&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token punctuation">{</span>text<span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span>src<span class="token operator">:</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../static/img/1.png&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token punctuation">{</span>text<span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span>src<span class="token operator">:</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../static/img/6.png&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token punctuation">{</span>text<span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span>src<span class="token operator">:</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../static/img/6.png&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token punctuation">{</span>text<span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span>src<span class="token operator">:</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../static/img/4.png&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token punctuation">{</span>text<span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span>src<span class="token operator">:</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../static/img/6.png&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token punctuation">]</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">mountMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">&quot;less&quot;</span> scoped<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>zj_waterfall <span class="token punctuation">{</span>
  width<span class="token operator">:</span> <span class="token number">1180</span>px<span class="token punctuation">;</span>
  display<span class="token operator">:</span> flex<span class="token punctuation">;</span>
  justify<span class="token operator">-</span>content<span class="token operator">:</span> space<span class="token operator">-</span>between<span class="token punctuation">;</span>
  flex<span class="token operator">-</span>wrap<span class="token operator">:</span> wrap<span class="token punctuation">;</span>
  align<span class="token operator">-</span>items<span class="token operator">:</span> flex<span class="token operator">-</span>start<span class="token punctuation">;</span>
  <span class="token punctuation">.</span>col <span class="token punctuation">{</span>
    width<span class="token operator">:</span> <span class="token number">24</span><span class="token operator">%</span><span class="token punctuation">;</span>
    background<span class="token operator">-</span>color<span class="token operator">:</span> #fff<span class="token punctuation">;</span>
    <span class="token punctuation">.</span>item <span class="token punctuation">{</span>
      margin<span class="token operator">-</span>top<span class="token operator">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span>
      overflow<span class="token operator">:</span> hidden<span class="token punctuation">;</span>
      border<span class="token operator">-</span>radius<span class="token operator">:</span> <span class="token number">4</span>px<span class="token punctuation">;</span>
      line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">48</span>px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span>item_text <span class="token punctuation">{</span>
      display<span class="token operator">:</span> flex<span class="token punctuation">;</span>
      justify<span class="token operator">-</span>content<span class="token operator">:</span> space<span class="token operator">-</span>between<span class="token punctuation">;</span>
      align<span class="token operator">-</span>items<span class="token operator">:</span> center<span class="token punctuation">;</span>
      padding<span class="token operator">-</span>left<span class="token operator">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>
      padding<span class="token operator">-</span>right<span class="token operator">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span>item_img<span class="token punctuation">{</span>
        width<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br></div></div><h1 id="vue-quill-editor" tabindex="-1"><a class="header-anchor" href="#vue-quill-editor" aria-hidden="true">#</a> vue-quill-editor</h1><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>quill-editor</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span>
                  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rn_quilleditor_wrap<span class="token punctuation">&quot;</span></span>
                  <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>QuillEditor<span class="token punctuation">&quot;</span></span>
                  <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>editorOption<span class="token punctuation">&quot;</span></span>
                  <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onEditorChange($event)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-uploader</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rn_van-uploader<span class="token punctuation">&quot;</span></span>
                    <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vantUploader <span class="token punctuation">&quot;</span></span>
                    <span class="token attr-name">:after-read</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onUpImg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>  //css隐藏起来

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-uploader</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Quill <span class="token keyword">from</span> <span class="token string">&quot;quill&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> quillEditor <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-quill-editor&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;quill/dist/quill.core.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;quill/dist/quill.snow.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;quill/dist/quill.bubble.css&quot;</span><span class="token punctuation">;</span>


 <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      content<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>text<span class="token punctuation">,</span>
      showHeight<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      docmHeight<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      hidshow<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      editorOption<span class="token operator">:</span> <span class="token punctuation">{</span>
        placeholder<span class="token operator">:</span> <span class="token string">&quot;输入文本...&quot;</span><span class="token punctuation">,</span>
        theme<span class="token operator">:</span> <span class="token string">&quot;snow&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 主题</span>
        readOnly<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        modules<span class="token operator">:</span> <span class="token punctuation">{</span>
          toolbar<span class="token operator">:</span> <span class="token punctuation">{</span>
            container<span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">[</span><span class="token punctuation">{</span> size<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;small&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">&quot;large&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;huge&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">[</span><span class="token string">&quot;bold&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;italic&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;underline&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">[</span><span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">[</span><span class="token punctuation">{</span> align<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">[</span><span class="token string">&quot;image&quot;</span><span class="token punctuation">]</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            handlers<span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// 自定义上传人文件方式</span>
                <span class="token comment">// quill-默认将图片压缩base64放入html中;导致文件过大</span>
                <span class="token comment">//所以用上传图片转成线上地址减少html的大小</span>
              <span class="token function-variable function">image</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// console.log(&quot;value&quot;, value);</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token comment">// 触发input框选择图片文件</span>
                  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.van-uploader__input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                  <span class="token keyword">this</span><span class="token punctuation">.</span>quill<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;image&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
      
      
methods<span class="token operator">:</span><span class="token punctuation">{</span>
       <span class="token function">onUpImg</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//   console.log(&quot;img&quot;, e);</span>
      <span class="token keyword">let</span> imgData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      imgData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;multipartFile&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">GET_ImgUrl</span><span class="token punctuation">(</span>imgData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">//http请求 img转线上地址</span>
        <span class="token comment">// console.log(res);</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//插入图片</span>
          <span class="token keyword">let</span> quill <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>QuillEditor<span class="token punctuation">.</span>quill<span class="token punctuation">;</span>
          <span class="token keyword">let</span> length <span class="token operator">=</span> quill<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index<span class="token punctuation">;</span>
          quill<span class="token punctuation">.</span><span class="token function">insertEmbed</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> <span class="token string">&quot;image&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>result<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
          quill<span class="token punctuation">.</span><span class="token function">setSelection</span><span class="token punctuation">(</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code> //与编辑框展示相同样式
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ql-container ql-snow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ql-editor<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>newsData.content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h1 id="元素滚动置顶-节流" tabindex="-1"><a class="header-anchor" href="#元素滚动置顶-节流" aria-hidden="true">#</a> 元素滚动置顶-节流</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>weekeleOffTop <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>weekele<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;scroll&quot;</span><span class="token punctuation">,</span> <span class="token function">Throttle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>scrollToTop<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
      
 <span class="token function">scrollToTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> top <span class="token operator">=</span>
        window<span class="token punctuation">.</span>pageYOffset <span class="token operator">||</span>
        document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>top <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>weekeleOffTop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fixedClass <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fixedClass <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">const</span> <span class="token function-variable function">Throttle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> gapTime</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> _lastTime <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> _nowTime <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_nowTime <span class="token operator">-</span> _lastTime <span class="token operator">&gt;</span> gapTime <span class="token operator">||</span> <span class="token operator">!</span>_lastTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      _lastTime <span class="token operator">=</span> _nowTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h1 id="按钮节流方法" tabindex="-1"><a class="header-anchor" href="#按钮节流方法" aria-hidden="true">#</a> 按钮节流方法</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>变了判断方法<span class="token operator">:</span>
Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&#39;throttle&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">bind</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> throttleTime <span class="token operator">=</span> binding<span class="token punctuation">.</span>value <span class="token comment">// 节流时间</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>throttleTime<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 用户若不设置节流时间，则默认2s</span>
      throttleTime <span class="token operator">=</span> <span class="token number">2000</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> cbFun
    el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">.</span>isDisableClick <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cbFun<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cbFun <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          el<span class="token punctuation">.</span>isDisableClick <span class="token operator">=</span> <span class="token boolean">false</span>
          cbFun <span class="token operator">=</span> <span class="token keyword">null</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> throttleTime<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;sayHello&quot;</span> ref<span class="token operator">=</span><span class="token string">&quot;target&quot;</span> v<span class="token operator">-</span>throttle<span class="token operator">&gt;</span>提交<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>target<span class="token punctuation">.</span>isDisableClick<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello!&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&#39;throttle&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">bind</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> throttleTime <span class="token operator">=</span> binding<span class="token punctuation">.</span>value <span class="token comment">// 节流时间</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>throttleTime<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 用户若不设置节流时间，则默认2s</span>
      throttleTime <span class="token operator">=</span> <span class="token number">2000</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> cbFun
    el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>el<span class="token punctuation">.</span>disabled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                el<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span>
                cbFun <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    el<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">false</span>
                    cbFun <span class="token operator">=</span> <span class="token keyword">null</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> throttleTime<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;sayHello&quot;</span> v<span class="token operator">-</span>throttle<span class="token operator">&gt;</span>提交<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
复制代码
<span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello!&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>vue 自定义指令方式<span class="token operator">:</span>
<span class="token keyword">let</span> throttleTime <span class="token operator">=</span> binding<span class="token punctuation">.</span>value<span class="token punctuation">;</span> <span class="token comment">// 防抖时间</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>throttleTime<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 用户若不设置防抖时间，则默认2s</span>
      throttleTime <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> cbFun<span class="token punctuation">;</span>
    el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cbFun<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 第一次执行</span>
        cbFun <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          cbFun <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> throttleTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        event <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span><span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取消剩余同名事件</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;sayHello&quot;</span> v<span class="token operator">-</span>throttle<span class="token operator">&gt;</span>提交<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello!&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>请求封装</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> requesting <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> type<span class="token punctuation">,</span> dataType<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">let</span> uid <span class="token operator">=</span> params<span class="token punctuation">.</span>url<span class="token operator">+</span>params<span class="token punctuation">.</span>type<span class="token operator">+</span>params<span class="token punctuation">.</span>method<span class="token operator">+</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
     <span class="token keyword">if</span><span class="token punctuation">(</span>requesting<span class="token punctuation">[</span>uid<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&#39;请勿重复点击哦~&#39;</span><span class="token punctuation">)</span>
         <span class="token keyword">return</span>
     <span class="token punctuation">}</span>
     requesting<span class="token punctuation">[</span>uid<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>
     <span class="token function">Ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> type<span class="token punctuation">,</span> dataType<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         requesting<span class="token punctuation">[</span>uid<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">最后更新时间: </span><span class="meta-item-info">1/14/2022, 11:05:08 PM</span></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/jiji/assets/js/runtime~app.127e7072.js" defer></script><script src="/jiji/assets/js/812.314801ab.js" defer></script><script src="/jiji/assets/js/app.e4505b8a.js" defer></script>
  </body>
</html>
