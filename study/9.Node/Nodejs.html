<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link type="text/css" rel="stylesheet" href="/jiji/css/sidebar.css"><script type="text/javascript" src="/jiji/js/side.js"></script><title>NodeJS | </title><meta name="description" content="">
    <link rel="preload" href="/jiji/assets/js/runtime~app.4bdad6db.js" as="script"><link rel="preload" href="/jiji/assets/css/styles.9f8e0fc9.css" as="style"><link rel="preload" href="/jiji/assets/js/812.314801ab.js" as="script"><link rel="preload" href="/jiji/assets/js/app.b79d7b56.js" as="script">
    <link rel="stylesheet" href="/jiji/assets/css/styles.9f8e0fc9.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/jiji/" class=""><!----><!----></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/jiji/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="学习记"><span class="title">学习记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="学习记"><span class="title">学习记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/study/1.html/html.md" class="nav-link" aria-label="1.html"><!--[--><!--]--> 1.html <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/3.JS/javascript.md" class="nav-link" aria-label="3.JS"><!--[--><!--]--> 3.JS <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/4.ES6/ES6.md" class="nav-link" aria-label="4.ES6"><!--[--><!--]--> 4.ES6 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/5.JQuery/JQuery.md" class="nav-link" aria-label="5.JQuery"><!--[--><!--]--> 5.JQuery <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/7.Git/git.md" class="nav-link" aria-label="7.Git"><!--[--><!--]--> 7.Git <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/8.Canvas/canvas.md" class="nav-link" aria-label="8.Canvas"><!--[--><!--]--> 8.Canvas <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/9.Node/Nodejs.md" class="nav-link" aria-label="9.Node"><!--[--><!--]--> 9.Node <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/9.Node/Nodejs.md" class="nav-link" aria-label="Nodejs.md"><!--[--><!--]--> Nodejs.md <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/9.Node/koa.md" class="nav-link" aria-label="koa.md"><!--[--><!--]--> koa.md <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/10.Vue/VUE.md" class="nav-link" aria-label="10.Vue"><!--[--><!--]--> 10.Vue <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE.md" class="nav-link" aria-label="VUE.md"><!--[--><!--]--> VUE.md <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/nuxt.md" class="nav-link" aria-label="nuxt.md"><!--[--><!--]--> nuxt.md <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/12.Webpack/webpack.md" class="nav-link" aria-label="12.Webpack"><!--[--><!--]--> 12.Webpack <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/13.TypeScript/Typescript.md" class="nav-link" aria-label="13.TypeScript"><!--[--><!--]--> 13.TypeScript <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/14.设计模式/设计模式.md" class="nav-link" aria-label="14.设计模式"><!--[--><!--]--> 14.设计模式 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/15.移动端/移动端.md" class="nav-link" aria-label="15.移动端"><!--[--><!--]--> 15.移动端 <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/16.前端性能/前端优化.md" class="nav-link" aria-label="16.前端性能"><!--[--><!--]--> 16.前端性能 <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/16.前端性能/前端优化.md" class="nav-link" aria-label="前端优化.md"><!--[--><!--]--> 前端优化.md <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/16.前端性能/前端性能.md" class="nav-link" aria-label="前端性能.md"><!--[--><!--]--> 前端性能.md <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/17.ESLint/eslint.md" class="nav-link" aria-label="17.ESLint"><!--[--><!--]--> 17.ESLint <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/18.Jest/jest.md" class="nav-link" aria-label="18.Jest"><!--[--><!--]--> 18.Jest <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/19.Flutter" class="nav-link" aria-label="19.Flutter"><!--[--><!--]--> 19.Flutter <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/App常见交互方式.md" class="nav-link" aria-label="App常见交互方式.md"><!--[--><!--]--> App常见交互方式.md <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/Dart-flutter.md" class="nav-link" aria-label="Dart-flutter.md"><!--[--><!--]--> Dart-flutter.md <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/Getx.md" class="nav-link" aria-label="Getx.md"><!--[--><!--]--> Getx.md <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_tools.md" class="nav-link" aria-label="flutter_tools.md"><!--[--><!--]--> flutter_tools.md <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_ui.md" class="nav-link" aria-label="flutter_ui.md"><!--[--><!--]--> flutter_ui.md <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_util.md" class="nav-link" aria-label="flutter_util.md"><!--[--><!--]--> flutter_util.md <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/20.Android/android.md" class="nav-link" aria-label="20.Android"><!--[--><!--]--> 20.Android <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/22.算法/算法.md" class="nav-link" aria-label="22.算法"><!--[--><!--]--> 22.算法 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a href="/jiji/prod" class="nav-link" aria-label="项目记"><!--[--><!--]--> 项目记 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/jiji/book" class="nav-link" aria-label="读书记"><!--[--><!--]--> 读书记 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/jiji/resource" class="nav-link" aria-label="资源记"><!--[--><!--]--> 资源记 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/jiji/money" class="nav-link" aria-label="另辟蹊径记"><!--[--><!--]--> 另辟蹊径记 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/WALL-E-WEB/everyday" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/jiji/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="学习记"><span class="title">学习记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="学习记"><span class="title">学习记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/jiji/study/1.html/html.md" class="nav-link" aria-label="1.html"><!--[--><!--]--> 1.html <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/3.JS/javascript.md" class="nav-link" aria-label="3.JS"><!--[--><!--]--> 3.JS <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/4.ES6/ES6.md" class="nav-link" aria-label="4.ES6"><!--[--><!--]--> 4.ES6 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/5.JQuery/JQuery.md" class="nav-link" aria-label="5.JQuery"><!--[--><!--]--> 5.JQuery <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/7.Git/git.md" class="nav-link" aria-label="7.Git"><!--[--><!--]--> 7.Git <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/8.Canvas/canvas.md" class="nav-link" aria-label="8.Canvas"><!--[--><!--]--> 8.Canvas <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/9.Node/Nodejs.md" class="nav-link" aria-label="9.Node"><!--[--><!--]--> 9.Node <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/9.Node/Nodejs.md" class="nav-link" aria-label="Nodejs.md"><!--[--><!--]--> Nodejs.md <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/9.Node/koa.md" class="nav-link" aria-label="koa.md"><!--[--><!--]--> koa.md <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/10.Vue/VUE.md" class="nav-link" aria-label="10.Vue"><!--[--><!--]--> 10.Vue <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/VUE.md" class="nav-link" aria-label="VUE.md"><!--[--><!--]--> VUE.md <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/10.Vue/nuxt.md" class="nav-link" aria-label="nuxt.md"><!--[--><!--]--> nuxt.md <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/12.Webpack/webpack.md" class="nav-link" aria-label="12.Webpack"><!--[--><!--]--> 12.Webpack <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/13.TypeScript/Typescript.md" class="nav-link" aria-label="13.TypeScript"><!--[--><!--]--> 13.TypeScript <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/14.设计模式/设计模式.md" class="nav-link" aria-label="14.设计模式"><!--[--><!--]--> 14.设计模式 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/15.移动端/移动端.md" class="nav-link" aria-label="15.移动端"><!--[--><!--]--> 15.移动端 <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/16.前端性能/前端优化.md" class="nav-link" aria-label="16.前端性能"><!--[--><!--]--> 16.前端性能 <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/16.前端性能/前端优化.md" class="nav-link" aria-label="前端优化.md"><!--[--><!--]--> 前端优化.md <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/16.前端性能/前端性能.md" class="nav-link" aria-label="前端性能.md"><!--[--><!--]--> 前端性能.md <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/17.ESLint/eslint.md" class="nav-link" aria-label="17.ESLint"><!--[--><!--]--> 17.ESLint <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/18.Jest/jest.md" class="nav-link" aria-label="18.Jest"><!--[--><!--]--> 18.Jest <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/jiji/study/19.Flutter" class="nav-link" aria-label="19.Flutter"><!--[--><!--]--> 19.Flutter <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/App常见交互方式.md" class="nav-link" aria-label="App常见交互方式.md"><!--[--><!--]--> App常见交互方式.md <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/Dart-flutter.md" class="nav-link" aria-label="Dart-flutter.md"><!--[--><!--]--> Dart-flutter.md <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/Getx.md" class="nav-link" aria-label="Getx.md"><!--[--><!--]--> Getx.md <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_tools.md" class="nav-link" aria-label="flutter_tools.md"><!--[--><!--]--> flutter_tools.md <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_ui.md" class="nav-link" aria-label="flutter_ui.md"><!--[--><!--]--> flutter_ui.md <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jiji/study/19.Flutter/flutter_util.md" class="nav-link" aria-label="flutter_util.md"><!--[--><!--]--> flutter_util.md <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/jiji/study/20.Android/android.md" class="nav-link" aria-label="20.Android"><!--[--><!--]--> 20.Android <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/jiji/study/22.算法/算法.md" class="nav-link" aria-label="22.算法"><!--[--><!--]--> 22.算法 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a href="/jiji/prod" class="nav-link" aria-label="项目记"><!--[--><!--]--> 项目记 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/jiji/book" class="nav-link" aria-label="读书记"><!--[--><!--]--> 读书记 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/jiji/resource" class="nav-link" aria-label="资源记"><!--[--><!--]--> 资源记 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/jiji/money" class="nav-link" aria-label="另辟蹊径记"><!--[--><!--]--> 另辟蹊径记 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/WALL-E-WEB/everyday" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">NodeJS</p><ul class=""><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#require-加载规则" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="require-加载规则"><!--[--><!--]--> require-加载规则 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#npm" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="npm"><!--[--><!--]--> npm <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#文件系统" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="文件系统"><!--[--><!--]--> 文件系统 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#文件删除" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="文件删除"><!--[--><!--]--> 文件删除 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#文件读取" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="文件读取"><!--[--><!--]--> 文件读取 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#writefile" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="writeFile()"><!--[--><!--]--> writeFile() <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#path模块-路径" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="path模块-路径"><!--[--><!--]--> path模块-路径 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#http" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="http"><!--[--><!--]--> http <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#创建本地服务器" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="创建本地服务器"><!--[--><!--]--> 创建本地服务器 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#request-请求报文" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="request-请求报文"><!--[--><!--]--> request-请求报文 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#response-响应报文" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="response-响应报文"><!--[--><!--]--> response-响应报文 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#get-post" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="get/post"><!--[--><!--]--> get/post <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#express" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Express"><!--[--><!--]--> Express <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#multer" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="multer"><!--[--><!--]--> multer <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#中间件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="中间件"><!--[--><!--]--> 中间件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#hash" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="hash"><!--[--><!--]--> hash <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#图片验证" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="图片验证"><!--[--><!--]--> 图片验证 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#connect-multipary" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="connect-multipary"><!--[--><!--]--> connect-multipary <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#all方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="all方法"><!--[--><!--]--> all方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#race方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="race方法"><!--[--><!--]--> race方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#mysql" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="mysql"><!--[--><!--]--> mysql <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_1-http-简单文件服务器" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.http-简单文件服务器"><!--[--><!--]--> 1.http-简单文件服务器 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_2-重定向" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.重定向"><!--[--><!--]--> 2.重定向 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_3-获取get数据" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.获取get数据"><!--[--><!--]--> 3.获取get数据 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_4-path模块生成路径" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4.path模块生成路径"><!--[--><!--]--> 4.path模块生成路径 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_5-数据库操作封装" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="5.数据库操作封装"><!--[--><!--]--> 5.数据库操作封装 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#let-与-const" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="let 与 const"><!--[--><!--]--> let 与 const <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#解构" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="解构"><!--[--><!--]--> 解构 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#对象解构赋值" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="对象解构赋值"><!--[--><!--]--> 对象解构赋值 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#字符串解构" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="字符串解构"><!--[--><!--]--> 字符串解构 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#函数参数解构赋值" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="函数参数解构赋值"><!--[--><!--]--> 函数参数解构赋值 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#解构用途" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="解构用途"><!--[--><!--]--> 解构用途 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#箭头函数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="箭头函数"><!--[--><!--]--> 箭头函数 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#展开运算符" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="展开运算符"><!--[--><!--]--> 展开运算符 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#模板字符串" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="模板字符串"><!--[--><!--]--> 模板字符串 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_01-es6简介" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="01.  ES6简介"><!--[--><!--]--> 01.  ES6简介 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_1-1-什么是es6" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.1 什么是ES6"><!--[--><!--]--> 1.1 什么是ES6 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_1-2-es6的兼容性" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.2 ES6的兼容性"><!--[--><!--]--> 1.2 ES6的兼容性 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_02-let与const" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="02. let与const"><!--[--><!--]--> 02. let与const <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_2-1-他们是什么" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.1 他们是什么？"><!--[--><!--]--> 2.1 他们是什么？ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_2-2-let与const的区别" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.2 let与const的区别"><!--[--><!--]--> 2.2 let与const的区别 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_2-3-与var的区别" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.3 与var的区别"><!--[--><!--]--> 2.3 与var的区别 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_2-4-使用建议" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.4 使用建议"><!--[--><!--]--> 2.4 使用建议 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_03-箭头函数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="03. 箭头函数"><!--[--><!--]--> 03. 箭头函数 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_3-1-箭头函数的书写规则" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.1 箭头函数的书写规则"><!--[--><!--]--> 3.1 箭头函数的书写规则 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_3-2-更简洁的写法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.2 更简洁的写法"><!--[--><!--]--> 3.2 更简洁的写法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_3-3-箭头函数的使用场景" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.3 箭头函数的使用场景"><!--[--><!--]--> 3.3 箭头函数的使用场景 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_3-4-箭头函数使用注意" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3.4 箭头函数使用注意"><!--[--><!--]--> 3.4 箭头函数使用注意 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_04-字符串" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="04. 字符串"><!--[--><!--]--> 04. 字符串 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_4-1-模板字符串" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4.1 模板字符串"><!--[--><!--]--> 4.1 模板字符串 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_4-2-字符串新增方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4.2 字符串新增方法"><!--[--><!--]--> 4.2 字符串新增方法 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_05-数值number" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="05. 数值Number"><!--[--><!--]--> 05. 数值Number <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_06-math类" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="06. Math类"><!--[--><!--]--> 06. Math类 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_07-函数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="07. 函数"><!--[--><!--]--> 07. 函数 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_7-1-参数默认值" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="7.1 参数默认值"><!--[--><!--]--> 7.1 参数默认值 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_7-2-参数是1个对象的时候" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="7.2 参数是1个对象的时候"><!--[--><!--]--> 7.2 参数是1个对象的时候 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_7-3-rest参数-可变参数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="7.3 rest参数(可变参数)"><!--[--><!--]--> 7.3 rest参数(可变参数) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_7-4-函数参数的尾逗号" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="7.4 函数参数的尾逗号"><!--[--><!--]--> 7.4 函数参数的尾逗号 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_08-数组" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="08. 数组"><!--[--><!--]--> 08. 数组 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_8-1-扩展运算符" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="8.1 扩展运算符"><!--[--><!--]--> 8.1 扩展运算符 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_8-2-常用扩展方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="8.2 常用扩展方法"><!--[--><!--]--> 8.2 常用扩展方法 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_09-对象" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="09. 对象"><!--[--><!--]--> 09. 对象 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_9-1-属性简洁表示法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="9.1 属性简洁表示法"><!--[--><!--]--> 9.1 属性简洁表示法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_9-2-属性名表达式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="9.2 属性名表达式"><!--[--><!--]--> 9.2 属性名表达式 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_9-3-属性的可枚举" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="9.3 属性的可枚举"><!--[--><!--]--> 9.3 属性的可枚举 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#引入" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="引入"><!--[--><!--]--> 引入 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#属性描述对象" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="属性描述对象"><!--[--><!--]--> 属性描述对象 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#属性遍历" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="属性遍历"><!--[--><!--]--> 属性遍历 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#for-in-遍历对象" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="for in 遍历对象"><!--[--><!--]--> for in 遍历对象 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#object-keys-obj" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Object.keys(obj)"><!--[--><!--]--> Object.keys(obj) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#object-getownpropertynames-obj" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Object.getOwnPropertyNames(obj)"><!--[--><!--]--> Object.getOwnPropertyNames(obj) <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_10-set" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="10. set"><!--[--><!--]--> 10. set <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#weakset" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="WeakSet"><!--[--><!--]--> WeakSet <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_11-map" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="11. Map"><!--[--><!--]--> 11. Map <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#常用方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="常用方法"><!--[--><!--]--> 常用方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#weakmap" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="WeakMap"><!--[--><!--]--> WeakMap <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_12-迭代器" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="12. 迭代器"><!--[--><!--]--> 12. 迭代器 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_12-1-for-of的原理" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="12.1 for...of的原理"><!--[--><!--]--> 12.1 for...of的原理 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_12-2-实现自己的迭代器" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="12.2 实现自己的迭代器"><!--[--><!--]--> 12.2 实现自己的迭代器 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/jiji/study/9.Node/Nodejs.html#_12-3-原生实现了迭代器的对象" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="12.3 原生实现了迭代器的对象"><!--[--><!--]--> 12.3 原生实现了迭代器的对象 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="nodejs" tabindex="-1"><a class="header-anchor" href="#nodejs" aria-hidden="true">#</a> NodeJS</h1><p>是一种不需要在浏览器执行的技术;</p><p>​ 1.内置了谷歌的V8引擎-高效率的执行 js代码;</p><p>​ 2.内置模块 就是写好的 Js代码,类似于jquery.js;</p><p>数据库,微服务(Docker);</p><p>ipconfig 查看ip地址</p><p>cls 清屏</p><h2 id="require-加载规则" tabindex="-1"><a class="header-anchor" href="#require-加载规则" aria-hidden="true">#</a> require-加载规则</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;模块标识&#39;</span><span class="token punctuation">)</span>
	<span class="token number">1.</span>缓存优先<span class="token punctuation">,</span>
    <span class="token number">2.</span> 模块
    	<span class="token number">1.</span>第三方模块<span class="token operator">:</span>
		<span class="token number">2.</span>核心模块<span class="token operator">:</span>已转为二进制<span class="token punctuation">,</span>本质是文件
		<span class="token number">3.</span>引用<span class="token operator">:</span><span class="token string">&#39;./xxx&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="npm" tabindex="-1"><a class="header-anchor" href="#npm" aria-hidden="true">#</a> npm</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>cnpm<span class="token operator">-</span>淘宝
npm<span class="token punctuation">.</span>taobao<span class="token punctuation">.</span>org
npm install <span class="token operator">--</span>global cnpm   <span class="token comment">//使用淘宝镜像 后面使用cnpm</span>

npm install 包名 <span class="token operator">--</span>registry<span class="token operator">=</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>registry<span class="token punctuation">.</span>npm<span class="token punctuation">.</span>taobao<span class="token punctuation">.</span>org

加载改为<span class="token operator">:</span>
npm config <span class="token keyword">set</span> registry https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>registry<span class="token punctuation">.</span>npm<span class="token punctuation">.</span>taobao<span class="token punctuation">.</span>org

npm init
	npm init <span class="token operator">-</span>y <span class="token comment">//跳过导向一步到位,直到创建依赖项创建</span>

npm install <span class="token operator">--</span>save 包名 下载并保存依赖项
	npm i <span class="token operator">-</span><span class="token constant">S</span> 包名
	
npm uninstall <span class="token operator">--</span>save 包名  删除
	npm un <span class="token operator">-</span><span class="token constant">S</span> 包名

npm 命令 <span class="token operator">--</span>help

查看是否成功
npm config list
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="文件系统" tabindex="-1"><a class="header-anchor" href="#文件系统" aria-hidden="true">#</a> 文件系统</h2><h4 id="文件删除" tabindex="-1"><a class="header-anchor" href="#文件删除" aria-hidden="true">#</a> 文件删除</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string">&quot;./tex.txt&quot;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err <span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="文件读取" tabindex="-1"><a class="header-anchor" href="#文件读取" aria-hidden="true">#</a> 文件读取</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//异步</span>
	第一个参数<span class="token operator">:</span>读取文件路径<span class="token punctuation">;</span>
	第二个参数是<span class="token operator">:</span>一个回调函数
    	成功<span class="token operator">:</span>
			data 数据
            err	错误对象  err<span class="token punctuation">.</span>message<span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>encoding<span class="token operator">:</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>err <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
		cosole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



url是相对于小黑框的执行路径而言<span class="token punctuation">;</span>
url <span class="token operator">=</span> nodejs执行所在的位置<span class="token operator">+</span>url<span class="token punctuation">;</span>

	问题<span class="token operator">:</span>相对路径不准确<span class="token punctuation">,</span>绝对不可移动<span class="token punctuation">;</span>
	解决<span class="token operator">:</span>
	__dirname	执行js文件 所在 的绝对路径<span class="token comment">//两个下划线</span>
    __filename	执行js文件 本身的绝对路径<span class="token comment">//两个下划线</span>
<span class="token keyword">let</span> filePath <span class="token operator">=</span> _dirname<span class="token operator">+</span><span class="token string">&#39;./aa.txt&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="writefile" tabindex="-1"><a class="header-anchor" href="#writefile" aria-hidden="true">#</a> writeFile()</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>第一个参数<span class="token operator">:</span>文件路径<span class="token punctuation">;</span>
第二个参数<span class="token operator">:</span>文件内容<span class="token punctuation">;</span>
第三个参数<span class="token operator">:</span>回调函数<span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;写入内容&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token comment">//失败</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token comment">//成功</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="path模块-路径" tabindex="-1"><a class="header-anchor" href="#path模块-路径" aria-hidden="true">#</a> path模块-路径</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> filePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
拼接路径

导入本地包
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//</span>

<span class="token keyword">const</span> dbpath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;utils&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;db.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//通过path方法 导入其他包</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>dbpath<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//导入包</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="http" tabindex="-1"><a class="header-anchor" href="#http" aria-hidden="true">#</a> http</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> serverobj <span class="token operator">=</span>http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>reponse</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>	<span class="token punctuation">{</span>
    
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	request<span class="token operator">:</span>请求报文<span class="token punctuation">,</span>包含浏览器发来的数据
        reponse<span class="token operator">:</span>响应报文对象<span class="token punctuation">,</span>包含了和准备了要发送到浏览器的数据
serverobj<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
locallhost<span class="token operator">:</span><span class="token number">3747</span><span class="token punctuation">;</span>浏览器请求

request对象<span class="token punctuation">,</span>请求报文<span class="token punctuation">,</span>
request<span class="token punctuation">.</span>url<span class="token operator">:</span>文件路径
request<span class="token punctuation">.</span>method<span class="token operator">:</span>get<span class="token punctuation">,</span>post
request<span class="token punctuation">.</span>headers<span class="token operator">:</span>
request<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>host<span class="token operator">:</span>请求记录<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>什么是服务器软件<span class="token operator">?</span>
	用来和浏览器软件做通信的软件<span class="token punctuation">,</span>接受 分析 业务处理<span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span>
ip 和端口的作用<span class="token operator">?</span>
	ip<span class="token operator">:</span>互联网中唯一标识<span class="token punctuation">;</span>
	port<span class="token operator">:</span>在电脑中 唯一标识
使用http模块<span class="token punctuation">,</span>
	<span class="token number">1.</span>导包<span class="token punctuation">;</span><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token number">2.</span>创建<span class="token punctuation">;</span>服务器对象
	<span class="token number">3.</span>启动<span class="token punctuation">;</span>服务器软件监听<span class="token punctuation">;</span><span class="token function">serverlisten</span><span class="token punctuation">(</span><span class="token number">3747</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		启动服务器时执行
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="创建本地服务器" tabindex="-1"><a class="header-anchor" href="#创建本地服务器" aria-hidden="true">#</a> 创建本地服务器</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> serverobj <span class="token operator">=</span> <span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> filepath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
serverobj<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3747</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token number">1.</span>加载核心模块
	<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2.</span>创建
	<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">cearteServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>reponse</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">3.</span>服务要干嘛
	server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;request&#39;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;收到客户请求&#39;</span><span class="token operator">+</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;holllll&#39;</span><span class="token punctuation">)</span>
    response<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;nodejs&#39;</span><span class="token punctuation">)</span>
    response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token number">4.</span>绑定端口号<span class="token punctuation">,</span>启动服务
	server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">)</span>


resquest<span class="token punctuation">.</span><span class="token function">setHearder</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;text/html;charset-utf-8&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="request-请求报文" tabindex="-1"><a class="header-anchor" href="#request-请求报文" aria-hidden="true">#</a> request-请求报文</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>request<span class="token punctuation">.</span>url 请求的路径
request<span class="token punctuation">.</span>method 请求的方式 get<span class="token operator">/</span>post
request<span class="token punctuation">.</span>query<span class="token punctuation">.</span>key   获取<span class="token keyword">get</span>发送的url<span class="token operator">?</span>后的key<span class="token operator">=</span>value
request<span class="token punctuation">.</span>post
request<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;content-type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;text/html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 设置
reuqest<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&#39;content-type&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// text/html; 获取</span>
reuqest<span class="token punctuation">.</span><span class="token function">removeHeader</span><span class="token punctuation">(</span><span class="token string">&#39;content-type&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//移除</span>

request<span class="token punctuation">.</span>headers  打印全部请求头信息<span class="token operator">--</span>对象形式
request<span class="token punctuation">.</span>rawHeaders  全部头信息<span class="token operator">--</span>数组形式
request<span class="token punctuation">.</span>httpVersion  请求的协议方式
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="response-响应报文" tabindex="-1"><a class="header-anchor" href="#response-响应报文" aria-hidden="true">#</a> response-响应报文</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>response.header
response.setHeader(属性名,属性值);
response.wriete();
response.end()
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="get-post" tabindex="-1"><a class="header-anchor" href="#get-post" aria-hidden="true">#</a> get/post</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> method <span class="token operator">=</span> <span class="token string">&#39;GET/POST&#39;</span>
 
 <span class="token constant">GET</span><span class="token operator">:</span>把数据放到url；
 <span class="token constant">POGT</span>：把数据放到 请求报文体 中； 
 
 应用场景：
 	<span class="token constant">GET</span>：为了获取服务器数据；（获取）
 	<span class="token constant">POST</span><span class="token operator">:</span>为了修改改正服务器数据；（提交）
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="express" tabindex="-1"><a class="header-anchor" href="#express" aria-hidden="true">#</a> Express</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>www<span class="token punctuation">.</span>express<span class="token punctuation">.</span>com<span class="token punctuation">.</span>cn

<span class="token comment">//1.下载</span>
<span class="token comment">//2.导包</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> body<span class="token operator">-</span>parser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;body-parser&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//用户post</span>
<span class="token comment">//2.1设置 web 文件夹 为 静态资源文件夹，浏览器可以直接访问</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&#39;web&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2.2 注册 body-parser 中间件：自动 帮我们把 浏览器 发送来的 post 数据 封装到 request.body 中</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> extended<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// parse application/x-www-form-urlencoded</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// parse application/json</span>

<span class="token comment">//3. 创建服务器</span>
	<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	

<span class="token comment">// 4.注册路由</span>
  <span class="token comment">// 4.1向浏览器发送 响应数据</span>
    app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/htmll&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token comment">//1.字符串</span>
            res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;sdfsdfsdsdfdfdfsdf&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//写在报文体</span>
            <span class="token comment">//2.JSON</span>
            <span class="token comment">// let obj = {name:&#39;kk&#39;,age:&#39;dddd&#39;};</span>
            <span class="token comment">// res.send(obj); //JSON.parse(obj)里面执行</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//4.2获取 浏览器发送来的 get 参数，并打印</span>
	app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/url&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token comment">//4.3post</span>
    app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/reg&#39;</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>txtName<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>txtPwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 5.</span>



<span class="token comment">// 6.启动,设置端口</span>
    app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3747</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;success&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;启动 失败&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h2 id="multer" tabindex="-1"><a class="header-anchor" href="#multer" aria-hidden="true">#</a> multer</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>expressjs<span class="token operator">/</span>multer<span class="token operator">/</span>blob<span class="token operator">/</span>master<span class="token operator">/</span>doc<span class="token operator">/</span><span class="token constant">README</span><span class="token operator">-</span>zh<span class="token operator">-</span>cn<span class="token punctuation">.</span>md

<span class="token comment">//1.导包</span>
<span class="token comment">//1.1 导入 express 包</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span>
<span class="token comment">//1.2 创建 express服务器程序对象</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//1.3 创建 multer 对象，并设置 上传文件夹</span>
<span class="token keyword">var</span> multer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;multer&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> upload <span class="token operator">=</span> <span class="token function">multer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> dest<span class="token operator">:</span> <span class="token string">&#39;uploads/&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>创建文件夹

<span class="token comment">//2.1设置 web 文件夹 为 静态资源文件夹，浏览器可以直接访问</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&#39;web&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//3.注册路由 (url -&gt; 处理函数 的关系)</span>

<span class="token comment">// 3.3 获取 浏览器 发送来的 post 参数，并打印</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/upload&#39;</span><span class="token punctuation">,</span> upload<span class="token punctuation">.</span><span class="token function">single</span><span class="token punctuation">(</span><span class="token string">&#39;file01&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>注册路由
  <span class="token comment">// req.file 是 `file01` 文件的信息</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// req.body 将具有文本域数据，如果存在的话</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;上传成功啦~~~&#39;</span> <span class="token operator">+</span> req<span class="token punctuation">.</span>file<span class="token punctuation">.</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>req<span class="token punctuation">.</span>files 是 <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">photos</span><span class="token template-punctuation string">`</span></span> 文件数组的信息
<span class="token punctuation">{</span> fieldname<span class="token operator">:</span> <span class="token string">&#39;icon&#39;</span><span class="token punctuation">,</span>
  originalname<span class="token operator">:</span> <span class="token string">&#39;6385682971224b4c33e8e3507fd7a279.png&#39;</span><span class="token punctuation">,</span>
  encoding<span class="token operator">:</span> <span class="token string">&#39;7bit&#39;</span><span class="token punctuation">,</span>
  mimetype<span class="token operator">:</span> <span class="token string">&#39;image/png&#39;</span><span class="token punctuation">,</span>
  destination<span class="token operator">:</span> <span class="token string">&#39;uploads&#39;</span><span class="token punctuation">,</span>
  filename<span class="token operator">:</span> <span class="token string">&#39;8c9c56da992fc02ab691a7dca0d0c63e&#39;</span><span class="token punctuation">,</span>
  path<span class="token operator">:</span> <span class="token string">&#39;uploads\\8c9c56da992fc02ab691a7dca0d0c63e&#39;</span><span class="token punctuation">,</span>
  size<span class="token operator">:</span> <span class="token number">25978</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>req<span class="token punctuation">.</span>body 将具有文本域数据，如果存在的话
<span class="token punctuation">[</span>Object<span class="token operator">:</span> <span class="token keyword">null</span> prototype<span class="token punctuation">]</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;walle&#39;</span><span class="token punctuation">,</span> sikll<span class="token operator">:</span> <span class="token string">&#39;kuku&#39;</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h1 id="express-1" tabindex="-1"><a class="header-anchor" href="#express-1" aria-hidden="true">#</a> express</h1><h2 id="中间件" tabindex="-1"><a class="header-anchor" href="#中间件" aria-hidden="true">#</a> 中间件</h2><ul><li>特点: <ol><li>使用app.use 注册中间件 函数—-本质是一个函数;</li><li>中间件函数有三个固定的参数(request,response,next());</li><li>中间件中 必须调用 next()函数,!!一般放在所有业务执行之后;</li><li>【面向切面编程】中间件,不论哪个路由被请求都会 先执行 中间件;</li></ol></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>中间件
	
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>response<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&#39;web/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//暴露文件</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span>extende<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Router()</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> myRouter <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

myRouter<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
myRouter<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/htmss&#39;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> myRouter

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
导入<span class="token operator">:</span>
<span class="token keyword">const</span> myrouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./01myrouter.js&#39;</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>myrouter<span class="token punctuation">)</span> <span class="token comment">//自定义路由模块 注册</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="hash" tabindex="-1"><a class="header-anchor" href="#hash" aria-hidden="true">#</a> hash</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>hash<span class="token punctuation">.</span>js   npm搜索
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h1 id="cookie" tabindex="-1"><a class="header-anchor" href="#cookie" aria-hidden="true">#</a> cookie</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> cookieParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;cookie-parser&#39;</span><span class="token punctuation">)</span>

注册cookie中间件
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cookieParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

res<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

backurl<span class="token operator">:</span><span class="token string">&#39;/index&#39;</span> 返回链接
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h1 id="cookie-session" tabindex="-1"><a class="header-anchor" href="#cookie-session" aria-hidden="true">#</a> cookie-session</h1><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>session模块包含cookie-parser所有方法

app.use(cookiesession({
	name:&#39;sessionId&#39;,
	keys:[&#39;234&#39;,&#39;kjlk&#39;]
}))
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="图片验证" tabindex="-1"><a class="header-anchor" href="#图片验证" aria-hidden="true">#</a> 图片验证</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>svg-captcha
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="connect-multipary" tabindex="-1"><a class="header-anchor" href="#connect-multipary" aria-hidden="true">#</a> connect-multipary</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>bodyparser 不支持formdata
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h1 id="跨域" tabindex="-1"><a class="header-anchor" href="#跨域" aria-hidden="true">#</a> 跨域</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>浏览器会针对 异步对象 的 异步请求 做 跨域请求<span class="token punctuation">.</span>

<span class="token operator">--</span><span class="token number">1.</span>请求添加如下<span class="token operator">:</span>响应报文加如下
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Access-Control-Allow-Origin&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">)</span>
添加到响应报文<span class="token punctuation">,</span>允许跨域访问

<span class="token operator">--</span><span class="token number">2.</span>下载包解决<span class="token punctuation">,</span>原理如<span class="token number">1</span><span class="token punctuation">;</span>
npm i cors
<span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;cors&#39;</span><span class="token punctuation">)</span>
注册cors跨域中间件
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token operator">--</span><span class="token number">3.</span>解决<span class="token operator">:</span>利用创建script的src请求<span class="token punctuation">;</span>避开对http对异步跨域检测
$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
    method<span class="token operator">:</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span>
    dataType<span class="token operator">:</span><span class="token string">&#39;jsonp&#39;</span><span class="token punctuation">,</span><span class="token comment">//ajax不再使用异步请求,而是使用script标签去请求</span>
    cache<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//不使用缓存,原理:是url产生随机数</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">backdata</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">eval</span><span class="token punctuation">(</span>backData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
以上操作原理如下<span class="token operator">:</span>
<span class="token keyword">let</span> strhtml <span class="token operator">=</span> <span class="token string">&#39;&lt;script src=&quot;跨域地址&quot;&gt;&lt;/script&gt;&#39;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;body&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>strhtml<span class="token punctuation">)</span>

<span class="token operator">--</span><span class="token number">4.</span>通过src写入参数传入服务器<span class="token punctuation">,</span>
<span class="token keyword">let</span> strhtml <span class="token operator">=</span> <span class="token string">&#39;&lt;script src=&quot;跨域地址?fn=fnname&quot;&gt;&lt;/script&gt;&#39;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;body&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>strhtml<span class="token punctuation">)</span>
服务端<span class="token operator">:</span>
<span class="token keyword">let</span> jsmethodname <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>fn
res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>jsmethodname <span class="token operator">+</span><span class="token string">&#39;(参数)&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h1 id="jsonp" tabindex="-1"><a class="header-anchor" href="#jsonp" aria-hidden="true">#</a> JSONP</h1><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h1 id="promise" tabindex="-1"><a class="header-anchor" href="#promise" aria-hidden="true">#</a> promise</h1><p>三个状态</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>pending<span class="token operator">:</span>进行中
fulfilled<span class="token operator">:</span>成功
rejected<span class="token operator">:</span>失败

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getPromise</span><span class="token punctuation">(</span><span class="token parameter">fileName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//读文件</span>
      fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./etc/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.txt</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">//读文件没有出错(异步成功)</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">//失败</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//需求: 要先读a, 读完a后读b, 读完b后读c.</span>
<span class="token function">getPromise</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//继续读b</span>
    <span class="token keyword">return</span> <span class="token function">getPromise</span><span class="token punctuation">(</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//继续读c</span>
    <span class="token keyword">return</span> <span class="token function">getPromise</span><span class="token punctuation">(</span><span class="token string">&#39;c&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token comment">//catch方法用来捕获错误信息的</span>
      
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


promise 是一个构造函数
<span class="token comment">//必须传入一个回调函数,两个参数resolve,reject</span>
<span class="token comment">//把需要异步的代码放到这个构造函数里</span>
<span class="token comment">//没有错执行resolve</span>
<span class="token comment">//错执行reject</span>
<span class="token comment">//一旦创建即执行</span>
<span class="token keyword">let</span> pm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
        	<span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>  

<span class="token comment">// </span>
pm<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
						<span class="token comment">//里面调用数据传入resolve(data)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><p>catch</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>用于捕获错误信息
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="all方法" tabindex="-1"><a class="header-anchor" href="#all方法" aria-hidden="true">#</a> all方法</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">/</span>读a<span class="token operator">/</span>b<span class="token operator">/</span>c文件的promise
<span class="token keyword">let</span> pa <span class="token operator">=</span> <span class="token function">getPromise</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> pb <span class="token operator">=</span> <span class="token function">getPromise</span><span class="token punctuation">(</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> pc <span class="token operator">=</span> <span class="token function">getPromise</span><span class="token punctuation">(</span><span class="token string">&#39;c&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 把这三个promise对象,搞成一个promise对象.</span>
<span class="token keyword">let</span> pAll <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pa<span class="token punctuation">,</span>pb<span class="token punctuation">,</span>pc<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 三个promise都异步成功后,才去执行pAll.then的第一个参数函数.</span>
<span class="token comment">// 只要有一个失败了,就去执行catch里面的函数.</span>
pAll<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="race方法" tabindex="-1"><a class="header-anchor" href="#race方法" aria-hidden="true">#</a> race方法</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>与all类似
只需一个成功就执行


<span class="token comment">// 三个promise只需要有一个异步请求成功了,就会去执行p.then的第一个参数函数.</span>
<span class="token comment">// 都失败了,就去执行catch里面的函数.</span>
<span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pa<span class="token punctuation">,</span> pb<span class="token punctuation">,</span> pc<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h1 id="数据库" tabindex="-1"><a class="header-anchor" href="#数据库" aria-hidden="true">#</a> 数据库</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">--</span> <span class="token number">1.</span>查询
select <span class="token operator">*</span> from heroinfo


<span class="token operator">--</span> <span class="token number">2.</span>新增
insert into <span class="token function">heroinfo</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>skill<span class="token punctuation">,</span>icon<span class="token punctuation">)</span> <span class="token function">values</span><span class="token punctuation">(</span><span class="token string">&#39;孙悟空&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;金箍棒&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;3.jpg&#39;</span> <span class="token punctuation">)</span>


<span class="token operator">--</span><span class="token number">3.</span>删除
<span class="token keyword">delete</span> from heroinfo where id<span class="token operator">=</span><span class="token number">3</span>
<span class="token keyword">delete</span> from heroinfo where id<span class="token operator">&gt;</span><span class="token number">1</span> and id<span class="token operator">&lt;=</span><span class="token number">4</span>


<span class="token operator">--</span><span class="token number">4.</span>修改
update heroinfo <span class="token keyword">set</span> skill <span class="token operator">=</span> <span class="token string">&#39;七十二变&#39;</span> where id<span class="token operator">=</span><span class="token number">5</span>
update heroinfo <span class="token keyword">set</span> skill <span class="token operator">=</span> <span class="token string">&#39;77变&#39;</span> <span class="token punctuation">,</span>icon<span class="token operator">=</span> <span class="token string">&#39;7.jpg&#39;</span> where id <span class="token operator">=</span> <span class="token number">5</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql" aria-hidden="true">#</a> mysql</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mysql&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token comment">//创建连接</span>
	host<span class="token operator">:</span><span class="token string">&#39;127.0.0.1&#39;</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span><span class="token number">3306</span><span class="token punctuation">,</span><span class="token comment">//默认3306,可不写</span>
	user<span class="token operator">:</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span>
	password<span class="token operator">:</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span>
	database<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>数据库名
<span class="token punctuation">}</span><span class="token punctuation">)</span>
    
connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//连接</span>


connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">&#39;数据库操作语句&#39;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>res<span class="token punctuation">,</span>fields</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>

connection<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//关闭连接</span>



</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>返回
select的返回<span class="token operator">:</span>
<span class="token punctuation">[</span> RowDataPacket <span class="token punctuation">{</span> Id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&#39;pppp&#39;</span><span class="token punctuation">,</span> skill<span class="token operator">:</span> <span class="token string">&#39;sss&#39;</span><span class="token punctuation">,</span> icon<span class="token operator">:</span> <span class="token string">&#39;sss&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  RowDataPacket <span class="token punctuation">{</span> Id<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&#39;pppp&#39;</span><span class="token punctuation">,</span> skill<span class="token operator">:</span> <span class="token string">&#39;kk&#39;</span><span class="token punctuation">,</span> icon<span class="token operator">:</span> <span class="token string">&#39;kk&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  RowDataPacket <span class="token punctuation">{</span> Id<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&#39;pppp&#39;</span><span class="token punctuation">,</span> skill<span class="token operator">:</span> <span class="token string">&#39;kuku&#39;</span><span class="token punctuation">,</span> icon<span class="token operator">:</span> <span class="token string">&#39;kk&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  RowDataPacket <span class="token punctuation">{</span> Id<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&#39;pppp&#39;</span><span class="token punctuation">,</span> skill<span class="token operator">:</span> <span class="token string">&#39;kk&#39;</span><span class="token punctuation">,</span> icon<span class="token operator">:</span> <span class="token string">&#39;kk&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span>
  
insert<span class="token operator">:</span>的返回
	OkPacket<span class="token punctuation">{</span>
      fieldCount<span class="token operator">:</span><span class="token number">0</span>
      affectedRows<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">//受影响行数,新增,修改,删除</span>
      insertId<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>	<span class="token comment">//新增操作会 返回新增行id</span>
      serverStatus<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token comment">//服务器状态</span>
      warningCount<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
      protocol41<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      changedRows<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h1 id="获取异步值方法" tabindex="-1"><a class="header-anchor" href="#获取异步值方法" aria-hidden="true">#</a> 获取异步值方法</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/*
 * @Description: In User Settings Edit
 * @Author: your name
 * @Date: 2019-08-28 19:35:16
 * @LastEditTime: 2019-08-28 19:35:25
 * @LastEditors: Please set LastEditors
 */</span>
<span class="token comment">//1.调函数</span>
<span class="token keyword">function</span> <span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        r <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token function">cb</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">getSomething</span><span class="token punctuation">(</span>compute<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//2.promise</span>
<span class="token comment">//专门解决由于回调函数引起的问题</span>
<span class="token keyword">function</span> <span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            r <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>compute<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//3.generator</span>
<span class="token comment">//有中断函数执行的能力</span>
<span class="token keyword">function</span> <span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        r <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token parameter">it</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> it <span class="token operator">=</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//4.promise + generator</span>
<span class="token comment">//promise加generator，才是异步的完美方式</span>
<span class="token keyword">function</span> <span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            r <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> it <span class="token operator">=</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//5.async</span>
<span class="token comment">//终极方案:async。</span>
<span class="token keyword">function</span> <span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            r <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br></div></div><h1 id="案例" tabindex="-1"><a class="header-anchor" href="#案例" aria-hidden="true">#</a> 案例</h1><h3 id="_1-http-简单文件服务器" tabindex="-1"><a class="header-anchor" href="#_1-http-简单文件服务器" aria-hidden="true">#</a> 1.http-简单文件服务器</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> mime <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mime&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> serverobj <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> urlstr <span class="token operator">=</span> request<span class="token punctuation">.</span>url<span class="token punctuation">;</span> <span class="token comment">//获取请求/后的链接</span>
    
    <span class="token comment">//根据链接 获取mime值 ,</span>
    <span class="token keyword">let</span> mimeval <span class="token operator">=</span> mime<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span>urlstr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//设置response headers中的 Content-Type</span>
    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> mimeval<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> filepath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> urlstr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取地址</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;请求失败&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

serverobj<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3747</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;success&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="_2-重定向" tabindex="-1"><a class="header-anchor" href="#_2-重定向" aria-hidden="true">#</a> 2.重定向</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> mime <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mime&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// 如果 浏览器请求的 是页面 9，就发送 302 给 浏览器，告诉他 跳转到 2.html</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;9.html&#39;</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
    <span class="token comment">// 向 响应报文 头 中 添加 location ，告诉浏览器 要跳转的目标</span>
        response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;location&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;2.html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token comment">// 向响应报文头中 设置 状态码为 302</span>
        response<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">302</span><span class="token punctuation">,</span><span class="token string">&#39;move&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;10.html&#39;</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> mimeval <span class="token operator">=</span> mime<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//根据获取的url尾部,获取Content-type</span>
        response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-type&#39;</span><span class="token punctuation">,</span>mimeval<span class="token operator">+</span><span class="token string">&quot;;charset=utf-8&quot;</span><span class="token punctuation">)</span>
        response<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;script&gt;alert(&quot;要跳转了&quot;); window.location = &quot;2.html&quot;;&lt;/script&gt;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       
    <span class="token punctuation">}</span>
    response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3747</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;启动成功&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;启动失败&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="_3-获取get数据" tabindex="-1"><a class="header-anchor" href="#_3-获取get数据" aria-hidden="true">#</a> 3.获取get数据</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&#39;UTF-8&#39;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 表单 Get 方式提交数据  <span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">&quot;http://192.168.14.134:3747/2.html&quot;</span> method<span class="token operator">=</span><span class="token string">&quot;GET&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;txtName&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;txtPwd&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>br<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;提交&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>

<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> serverobj <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//a. 获取 浏览器 用 get 方式 传来的 数据</span>
    <span class="token keyword">let</span> urlstr <span class="token operator">=</span> request<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>urlstr<span class="token punctuation">)</span>
     <span class="token comment">//b. 使用 url.parse 方法，将 请求的 路径中的 get 参数 转成 对象，存入 url对象.query属性中</span>
    <span class="token keyword">let</span> urlobj <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>urlstr<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>urlobj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

serverobj<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3747</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;success&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39; failures&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="_4-path模块生成路径" tabindex="-1"><a class="header-anchor" href="#_4-path模块生成路径" aria-hidden="true">#</a> 4.path模块生成路径</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//文件夹路径+文件路径 拼接</span>
<span class="token keyword">let</span> filePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&#39;文件路径&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        cosole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>messge<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_5-数据库操作封装" tabindex="-1"><a class="header-anchor" href="#_5-数据库操作封装" aria-hidden="true">#</a> 5.数据库操作封装</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mysql&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> connInfo<span class="token operator">=</span><span class="token punctuation">{</span>
    host<span class="token operator">:</span><span class="token string">&#39;127.0.0.1&#39;</span><span class="token punctuation">,</span>
    database<span class="token operator">:</span><span class="token string">&#39;新数据库2&#39;</span><span class="token punctuation">,</span>
    user<span class="token operator">:</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span>
    password<span class="token operator">:</span><span class="token string">&#39;root&#39;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getHero</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>connInfo<span class="token punctuation">)</span>
        connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">&#39;select * from hero&#39;</span><span class="token punctuation">,</span>fn<span class="token punctuation">)</span>
        connection<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">addHero</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>name<span class="token punctuation">,</span>skill<span class="token punctuation">,</span>icon<span class="token punctuation">}</span><span class="token punctuation">,</span>fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>connInfo<span class="token punctuation">)</span>
        connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into hero(name,skill,icon) value(&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;,&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>skill<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;,&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>icon<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>fn<span class="token punctuation">)</span>
        connection<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">deleteHero</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span>fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>connInfo<span class="token punctuation">)</span>
        connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">delete from hero where id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>fn<span class="token punctuation">)</span>
        connection<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">updateHero</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>name<span class="token punctuation">,</span>skill<span class="token punctuation">,</span>icon<span class="token punctuation">,</span>id<span class="token punctuation">}</span><span class="token punctuation">,</span>fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>connInfo<span class="token punctuation">)</span>
        connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">update hero set name = &#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39; ,skill = &#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>skill<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;,icon = &#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>icon<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39; where id = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>fn<span class="token punctuation">)</span>
        connection<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h1 id="es6" tabindex="-1"><a class="header-anchor" href="#es6" aria-hidden="true">#</a> ES6</h1><h2 id="let-与-const" tabindex="-1"><a class="header-anchor" href="#let-与-const" aria-hidden="true">#</a> let 与 const</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span>
	无法变量提升
	无法重复声明
	可以重新赋值
	有块级作用域
	
<span class="token keyword">const</span>
	<span class="token number">1.</span>无法变量提升
 \<span class="token operator">*</span> <span class="token number">2.</span>无法重复声明
 \<span class="token operator">*</span> <span class="token number">3.</span>无法重新赋值
 \<span class="token operator">*</span> <span class="token number">4.</span>有块级作用域
 \<span class="token operator">*</span> <span class="token number">5.</span>必须声明时就要赋值
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="解构" tabindex="-1"><a class="header-anchor" href="#解构" aria-hidden="true">#</a> 解构</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token constant">ES6</span> 允许按照一定模式，从数组和对象中提取值，对变量进行赋值，这被称为解构（Destructuring）。
这种写法属于“模式匹配”
<span class="token keyword">let</span> <span class="token punctuation">[</span>foo<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>bar<span class="token punctuation">]</span><span class="token punctuation">,</span> baz<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
foo <span class="token comment">// 1</span>
bar <span class="token comment">// 2</span>
baz <span class="token comment">// 3</span>

<span class="token number">1.</span>解构不成功返回 <span class="token keyword">undefined</span>
<span class="token number">2.</span>不完全解构
	<span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		x <span class="token comment">// 1</span>
		y <span class="token comment">// 2</span>
	<span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> <span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		a <span class="token comment">// 1</span>
		b <span class="token comment">// 2</span>
		d <span class="token comment">// 4</span>
<span class="token number">3.</span>如果等号的右边不是数组<span class="token operator">/</span><span class="token function">对象</span><span class="token punctuation">(</span>不可遍历的结构 <span class="token operator">/</span>Iterator 接口<span class="token punctuation">)</span><span class="token punctuation">,</span>会报错<span class="token punctuation">;</span>


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="对象解构赋值" tabindex="-1"><a class="header-anchor" href="#对象解构赋值" aria-hidden="true">#</a> 对象解构赋值</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>而对象的属性没有次序，变量必须与属性同名，
<span class="token keyword">let</span> <span class="token punctuation">{</span> bar<span class="token punctuation">,</span> foo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">&#39;aaa&#39;</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token string">&#39;bbb&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
foo <span class="token comment">// &quot;aaa&quot;</span>
bar <span class="token comment">// &quot;bbb&quot;</span>

<span class="token comment">// 例一</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> log<span class="token punctuation">,</span> sin<span class="token punctuation">,</span> cos <span class="token punctuation">}</span> <span class="token operator">=</span> Math<span class="token punctuation">;</span>
上面代码的例一将Math对象的对数、正弦、余弦三个方法，赋值到对应的变量上
<span class="token comment">// 例二</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token operator">=</span> console<span class="token punctuation">;</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span> <span class="token comment">// hello</span>
例二将console<span class="token punctuation">.</span>log赋值到log变量

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> obj<span class="token punctuation">.</span>prop<span class="token punctuation">,</span> bar<span class="token operator">:</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj <span class="token comment">// {prop:123}</span>
arr <span class="token comment">// [true]</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>默认赋值<span class="token operator">--</span><span class="token operator">-</span>做边有值则不覆盖<span class="token punctuation">,</span>无则赋值
<span class="token keyword">var</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
x <span class="token comment">// 3</span>

<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
x <span class="token comment">// 1</span>
y <span class="token comment">// 5</span>

<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
y <span class="token comment">// 3</span>

<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
y <span class="token comment">// 5</span>

<span class="token keyword">var</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
x <span class="token comment">// 3</span>

<span class="token keyword">var</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
x <span class="token comment">// null</span>

注意点<span class="token operator">:</span>
<span class="token comment">// 正确的写法  //声明语句不能用()</span>
<span class="token keyword">let</span> x<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 错误的写法</span>
<span class="token keyword">let</span> x<span class="token punctuation">;</span>
<span class="token punctuation">{</span>x<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// SyntaxError: syntax error</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h3 id="字符串解构" tabindex="-1"><a class="header-anchor" href="#字符串解构" aria-hidden="true">#</a> 字符串解构</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>字符串被转换成了一个类似数组的对象。
<span class="token keyword">const</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">;</span>
a <span class="token comment">// &quot;h&quot;</span>
b <span class="token comment">// &quot;e&quot;</span>
c <span class="token comment">// &quot;l&quot;</span>
d <span class="token comment">// &quot;l&quot;</span>
e <span class="token comment">// &quot;o&quot;</span>

类似数组的对象都有一个length属性，因此还可以对这个属性解构赋值。
<span class="token keyword">let</span> <span class="token punctuation">{</span>length <span class="token operator">:</span> len<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">;</span>
len <span class="token comment">// 5</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="函数参数解构赋值" tabindex="-1"><a class="header-anchor" href="#函数参数解构赋值" aria-hidden="true">#</a> 函数参数解构赋值</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 8]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 0]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 0]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 0]</span>

<span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 8]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, undefined]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [undefined, undefined]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 0]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="解构用途" tabindex="-1"><a class="header-anchor" href="#解构用途" aria-hidden="true">#</a> 解构用途</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>es6<span class="token punctuation">.</span>ruanyifeng<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token operator">?</span>search<span class="token operator">=</span><span class="token operator">%</span><span class="token constant">E3</span><span class="token operator">%</span><span class="token number">80</span><span class="token operator">%</span><span class="token number">8</span>AGenerator<span class="token operator">+</span><span class="token operator">%</span><span class="token constant">E5</span><span class="token operator">%</span><span class="token number">87</span><span class="token operator">%</span><span class="token constant">BD</span><span class="token operator">%</span><span class="token constant">E6</span><span class="token operator">%</span><span class="token number">95</span><span class="token operator">%</span><span class="token constant">B0</span><span class="token operator">%</span><span class="token constant">E3</span><span class="token operator">%</span><span class="token number">80</span><span class="token operator">%</span><span class="token number">8</span>B<span class="token operator">&amp;</span>x<span class="token operator">=</span><span class="token number">6</span><span class="token operator">&amp;</span>y<span class="token operator">=</span><span class="token number">3</span>#docs<span class="token operator">/</span>destructuring

<span class="token number">1.</span>变量交换值<span class="token operator">:</span>
	<span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>y<span class="token punctuation">,</span> x<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token number">2.</span><span class="token function-variable function">函数返回多个值</span><span class="token operator">:</span>
	<span class="token keyword">function</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  		<span class="token keyword">return</span> <span class="token punctuation">{</span>
    		foo<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    		bar<span class="token operator">:</span> <span class="token number">2</span>
  		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">let</span> <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">3.</span><span class="token function-variable function">函数参数的定义</span><span class="token operator">:</span>
	<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
	<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">{</span>z<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">4.</span>提取<span class="token constant">JSON</span>数据<span class="token operator">:</span>
	<span class="token keyword">let</span> jsonData <span class="token operator">=</span> <span class="token punctuation">{</span>
    	id<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
    	status<span class="token operator">:</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">,</span>
    	data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">867</span><span class="token punctuation">,</span> <span class="token number">5309</span><span class="token punctuation">]</span>
  	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> status<span class="token punctuation">,</span> data<span class="token operator">:</span> number <span class="token punctuation">}</span> <span class="token operator">=</span> jsonData<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="箭头函数" tabindex="-1"><a class="header-anchor" href="#箭头函数" aria-hidden="true">#</a> 箭头函数</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">;</span>

<span class="token comment">// 等同于</span>
<span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> v<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="展开运算符" tabindex="-1"><a class="header-anchor" href="#展开运算符" aria-hidden="true">#</a> 展开运算符</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> chinaPerson <span class="token operator">=</span> <span class="token punctuation">{</span>
  skin<span class="token operator">:</span> <span class="token string">&#39;yellow&#39;</span><span class="token punctuation">,</span>
  hair<span class="token operator">:</span> <span class="token string">&#39;black&#39;</span><span class="token punctuation">,</span>
  sayHi<span class="token operator">:</span> <span class="token string">&#39;吃了没&#39;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> zhubo <span class="token operator">=</span> <span class="token punctuation">{</span>
  skill<span class="token operator">:</span> <span class="token string">&#39;唱，跳，rap&#39;</span><span class="token punctuation">,</span>
  habbit<span class="token operator">:</span> <span class="token string">&#39;打篮球&#39;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> newObj <span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>chinaPerson<span class="token punctuation">,</span> <span class="token comment">// 将 chinaPerson 的成员 都添加到此</span>
  <span class="token operator">...</span>zhubo <span class="token comment">// 将 zhubo 的成员 都添加到此</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="模板字符串" tabindex="-1"><a class="header-anchor" href="#模板字符串" aria-hidden="true">#</a> 模板字符串</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>可以挖坑 $<span class="token punctuation">{</span>表达式<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h1 id="es6-简要" tabindex="-1"><a class="header-anchor" href="#es6-简要" aria-hidden="true">#</a> ES6 简要</h1><h2 id="_01-es6简介" tabindex="-1"><a class="header-anchor" href="#_01-es6简介" aria-hidden="true">#</a> 01. ES6简介</h2><h3 id="_1-1-什么是es6" tabindex="-1"><a class="header-anchor" href="#_1-1-什么是es6" aria-hidden="true">#</a> 1.1 什么是ES6</h3><p>​ ES6其实就是在ES5的基础之上新增了一些语法和提供多了一些api, 使用ES6新增的语法和api, 我们可以快速实现一些功能，而不必使用ES5中写很多代码的方式来实现。比如我要判断1个字符串是否以指定的字符串开始，在ES6中，直接为字符串对象新增了1个方法<code>startsWtih</code>就可以轻松的实现这个功能。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;heima good&quot;</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> res <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;hei&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//判断字符串str是否以hei开头</span>
<span class="token comment">//res就是1个bool值，代表str是否以&quot;hei&quot;开头</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>​ ES6就是这么高效，为JavaScripter提供了快速高效的编码方式.</p><h3 id="_1-2-es6的兼容性" tabindex="-1"><a class="header-anchor" href="#_1-2-es6的兼容性" aria-hidden="true">#</a> 1.2 ES6的兼容性</h3><p>​ ES6标准于2015年6月正式发布, 经过四年的发展，PC桌面端的主流浏览器最新版本都对ES6实现了最大化的兼容，移动端浏览器基本上实现了对ES6的兼容，NodeJS对ES6绝大部分语法进行了实现。</p><p>​ ES6兼容情况一览表： <a href="http://kangax.github.io/compat-table/es6/" target="_blank" rel="noopener noreferrer">传送门<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p>​ 对于少部分语法不兼容的情况(主要是PC桌面端浏览器), 我们可以使用编译器(如Babel)将我们写的ES6代码转换为ES5的代码，以便让低版本的浏览器可以兼容。具体如何使用Babel，我们将在后续的章节为大家介绍。</p><h2 id="_02-let与const" tabindex="-1"><a class="header-anchor" href="#_02-let与const" aria-hidden="true">#</a> 02. let与const</h2><h3 id="_2-1-他们是什么" tabindex="-1"><a class="header-anchor" href="#_2-1-他们是什么" aria-hidden="true">#</a> 2.1 他们是什么？</h3><p>​ <code>let</code>与<code>const</code>是ES6新增的两个关键字，他们的作用和<code>var</code>的作用一样，是用来声明变量的</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token string">&quot;i love heima&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-2-let与const的区别" tabindex="-1"><a class="header-anchor" href="#_2-2-let与const的区别" aria-hidden="true">#</a> 2.2 let与const的区别</h3><p>​ 使用<code>let</code>声明的变量，后续可以重新为其赋值；使用<code>const</code>声明的变量，要求在声明的同时就进行初始化，但是后续无法再为这个变量进行重新赋值。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b<span class="token punctuation">;</span>
b <span class="token operator">=</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
c <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">//错误，c是const声明的，变量不能再重新赋值</span>
<span class="token keyword">const</span> d<span class="token punctuation">;</span> <span class="token comment">//错误，使用const声明的变量，必须在声明的同时就初始化.</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>特别注意</strong>，<code>const</code>变量指向1个对象的时候，这个变量的值不能变，但是这个变量指向的对象可以修改.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
    gender<span class="token operator">:</span> <span class="token string">&quot;male&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;rose&quot;</span><span class="token punctuation">;</span> <span class="token comment">//可以，并没有修改person变量的值，修改的是person指向的对象的属性的值.</span>
person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;rose&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
    gender<span class="token operator">:</span> <span class="token string">&quot;female&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//错误，person变量是被const修饰的，不能再为其赋值.</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_2-3-与var的区别" tabindex="-1"><a class="header-anchor" href="#_2-3-与var的区别" aria-hidden="true">#</a> 2.3 与var的区别</h3><p>使用<code>let</code>和<code>const</code>声明的变量不存在变量提升，有自己的作用域 - 其所在的大括弧中。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">{</span>
    <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//报错，提示变量c未定义</span>
    <span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token comment">//变量b、c只能在声明b、c变量中的大括弧中访问。 </span>
    <span class="token comment">//并且也不存在变量提升</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//可以访问</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//可以访问</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//可以访问</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//可以访问</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//不可以访问</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//不可以访问`</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_2-4-使用建议" tabindex="-1"><a class="header-anchor" href="#_2-4-使用建议" aria-hidden="true">#</a> 2.4 使用建议</h3><ul><li>能使用const就不要使用let</li><li>能使用let就不要使用var</li></ul><p>​ 其实大多数情况下，我们声明的变量后续都不会再重新赋值，所以这种情况，建议使用<code>const</code>；如果变量的值后续需要更改，可以使用<code>let</code>； <code>var</code>关键字请彻底废弃。</p><h2 id="_03-箭头函数" tabindex="-1"><a class="header-anchor" href="#_03-箭头函数" aria-hidden="true">#</a> 03. 箭头函数</h2><p>​ 箭头函数是我们之前学习的函数的一种简写方式。</p><h3 id="_3-1-箭头函数的书写规则" tabindex="-1"><a class="header-anchor" href="#_3-1-箭头函数的书写规则" aria-hidden="true">#</a> 3.1 箭头函数的书写规则</h3><p>​ 将普通函数的<code>function</code>关键字删掉， 在小括弧与大括弧中间加上1个箭头<code>=&gt;</code>，用法与普通函数一样。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>箭头函数的作用： 让我们声明函数的时候，使用更少的代码，看起来更简洁。</p><h3 id="_3-2-更简洁的写法" tabindex="-1"><a class="header-anchor" href="#_3-2-更简洁的写法" aria-hidden="true">#</a> 3.2 更简洁的写法</h3><ul><li>a. 如果参数只有1个，那么包围参数的小括弧可以省略</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isEven</span> <span class="token operator">=</span> <span class="token parameter">num</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>b. 如果函数体只有一句代码，那么包围函数体的大括弧可以省略,并且这句代码的结果会自动作为返回值返回</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isEven</span> <span class="token operator">=</span> <span class="token parameter">num</span> <span class="token operator">=&gt;</span> num <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">isEven</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-3-箭头函数的使用场景" tabindex="-1"><a class="header-anchor" href="#_3-3-箭头函数的使用场景" aria-hidden="true">#</a> 3.3 箭头函数的使用场景</h3><ul><li>箭头函数本身是1个匿名函数，所以如果你要二次使用，必须得有个变量保存起来.</li><li>箭头函数在回调函数中被经常使用到，代码会显得更简洁。</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-4-箭头函数使用注意" tabindex="-1"><a class="header-anchor" href="#_3-4-箭头函数使用注意" aria-hidden="true">#</a> 3.4 箭头函数使用注意</h3><ul><li>函数体内的<code>this</code>对象，就是定义时所在的对象，而不是使用时所在的对象。</li><li>不可以使用<code>arguments</code>对象，该对象在函数体内不存在。如果要用，可以用 rest 参数代替。</li></ul><h2 id="_04-字符串" tabindex="-1"><a class="header-anchor" href="#_04-字符串" aria-hidden="true">#</a> 04. 字符串</h2><h3 id="_4-1-模板字符串" tabindex="-1"><a class="header-anchor" href="#_4-1-模板字符串" aria-hidden="true">#</a> 4.1 模板字符串</h3><p>​ 声明字符串我们可以使用单引号和双引号来表示，在ES6中新增了一种声明方式，使用1对撇号来表示。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">大家好，
我是小明
\n哈哈，你好啊
这是1个模板字符串哦
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>模板字符串，支持换行，等操作，撇号中的内容会被原样识别。</li><li>模板字符串还支持变量替换</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> name1 <span class="token operator">=</span> <span class="token string">&quot;杜子腾&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> name2 <span class="token operator">=</span> <span class="token string">&quot;秦寿生&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">孔子东游，见两小儿辩斗，问其故。
</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name1<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">曰：“我以日始出时去人近，而日中时远也。”
</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name2<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">以日初出远，而日中时近也。
</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name1<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">曰：“日初出大如车盖，及日中则如盘盂，此不为远者小而近者大乎？”
</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name2<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">曰：“日初出沧沧凉凉，及其日中如探汤，此不为近者热而远者凉乎？”
孔子不能决也。
</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name1<span class="token operator">+</span><span class="token string">&quot;和&quot;</span><span class="token operator">+</span>name2<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">笑曰：“孰为汝多知乎？”
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_4-2-字符串新增方法" tabindex="-1"><a class="header-anchor" href="#_4-2-字符串新增方法" aria-hidden="true">#</a> 4.2 字符串新增方法</h3><ul><li><code>includes()</code>方法 是否包含子串</li><li><code>startsWith()</code>方法 以指定的串开始</li><li><code>endsWith()</code>方法 以指定的串结尾</li><li><code>repeat()</code>方法 将字符串重复</li><li><code>padStart()</code>方法 头部补全</li><li><code>padEnd()</code>方法 尾部补全</li></ul><h2 id="_05-数值number" tabindex="-1"><a class="header-anchor" href="#_05-数值number" aria-hidden="true">#</a> 05. 数值Number</h2><blockquote><p>ES6为Number新增了一些方法，方便我们更加方便操作Number数据.</p></blockquote><ul><li><code>Number.isFinite()</code> 用来检查一个数值是否为有限的（finite），即不是<code>Infinity</code></li><li><code>Number.isNaN()</code> 用来检查一个值是否为<code>NaN</code></li><li>es6将全局方法<code>parseInt()</code>和<code>parseFloat()</code>，移植到<code>Number</code>对象上面，行为完全保持不变</li><li><code>Number.isInteger()</code> 用来判断一个数值是否为整数。</li></ul><h2 id="_06-math类" tabindex="-1"><a class="header-anchor" href="#_06-math类" aria-hidden="true">#</a> 06. Math类</h2><p>ES6对Math对象新增了很多数学方法. <a href="http://es6.ruanyifeng.com/#docs/number#Math-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%A9%E5%B1%95" target="_blank" rel="noopener noreferrer">传送门<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p>并且新增了1个算术运算符 - 指数运算符 （ ** ）</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">**</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token comment">//2的3次方.</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_07-函数" tabindex="-1"><a class="header-anchor" href="#_07-函数" aria-hidden="true">#</a> 07. 函数</h2><h3 id="_7-1-参数默认值" tabindex="-1"><a class="header-anchor" href="#_7-1-参数默认值" aria-hidden="true">#</a> 7.1 参数默认值</h3><p>​ 在声明函数的时候，允许对函数的参数赋一个默认值， 当调用函数时，如果不为指定默认值的参数传值，那么在函数执行的时候，参数的值就是默认值</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">20</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//在调用函数的时候，只为第1个参数传值，而没有为第2个参数传值。那么第2个参数的值就是其默认值20</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果两个参数都传了值，那么参数的值就是传入的值。</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>​ 需要注意的是， 如果函数的参数带了默认值，那么带了默认值的参数必须写在参数列表的最后</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//报错，带默认值的参数必须放在参数列表的最后.</span>
    
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>​ 这样，别人在调用我们写的函数的时候，一眼就能看出哪些参数是必传参数，哪些参数是可选参数。</p><h3 id="_7-2-参数是1个对象的时候" tabindex="-1"><a class="header-anchor" href="#_7-2-参数是1个对象的时候" aria-hidden="true">#</a> 7.2 参数是1个对象的时候</h3><p>​ 当1个函数的参数是1个对象的时候，按照我们之前的写法，调用者很难知道这个对象的属性有哪些。比如，jQuery的ajax方法，这个方法我们都知道要传入1个对象，但是这个对象要准备哪些属性呢？ 除了看文档，真的没有别的方法。在ES6中，为我们提供了一种写法，让调用者看到我们函数的形参就知道要传入哪些属性，代码演示如下</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//参数直接使用1个大括弧围起来，把属性写在其中. 这就表示参数是1个对象，这个对象中有这么些属性</span>
<span class="token keyword">const</span> <span class="token function-variable function">ajax</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>url<span class="token punctuation">,</span> method<span class="token punctuation">,</span> data<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> method<span class="token punctuation">,</span> data<span class="token punctuation">)</span>      
<span class="token punctuation">}</span>

<span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span>
    method<span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">18</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_7-3-rest参数-可变参数" tabindex="-1"><a class="header-anchor" href="#_7-3-rest参数-可变参数" aria-hidden="true">#</a> 7.3 rest参数(可变参数)</h3><p>​ 当我们需要某1个函数可以接收任意多个参数的时候，我们之前的做法要么是使用arguments，要么是使用1个数组，在ES6中，借鉴了其它语言中非常流行的一种做法，那就是rest参数.</p><p>​ 当形参前面加上<code>...</code> 三个点， 就表示这是1个rest参数，这是1个数组，它可以接收多余的实参到这个数组中。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//args就是1个rest参数，它是1个数组，用来存储传入的额外参数.</span>
    <span class="token keyword">let</span> sum <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token keyword">in</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        sum <span class="token operator">+=</span> args<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//1和2分别传给了参数a和b, 后面的所有参数都传给了args数组.</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>​ <strong>需要注意的是，rest参数只能放在参数列表的最后，并且1个函数最多只能有1个rest参数</strong></p><h3 id="_7-4-函数参数的尾逗号" tabindex="-1"><a class="header-anchor" href="#_7-4-函数参数的尾逗号" aria-hidden="true">#</a> 7.4 函数参数的尾逗号</h3><p>​ 在ES6中，允许在参数列表的最后也加上1个逗号，用来让我们的代码变的可读性更高。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_08-数组" tabindex="-1"><a class="header-anchor" href="#_08-数组" aria-hidden="true">#</a> 08. 数组</h2><h3 id="_8-1-扩展运算符" tabindex="-1"><a class="header-anchor" href="#_8-1-扩展运算符" aria-hidden="true">#</a> 8.1 扩展运算符</h3><p>​ 其实叫做<code>展开运算符</code>更容易理解一些，它可以将1个数组中的元素展开, 一般用在函数的传参中。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//将数组arr展开成单独的10,20,30，传给add函数</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_8-2-常用扩展方法" tabindex="-1"><a class="header-anchor" href="#_8-2-常用扩展方法" aria-hidden="true">#</a> 8.2 常用扩展方法</h3><ul><li><p><code>includes()</code>， 判断数组中是否包含指定的元素</p></li><li><p><code>flat()</code>, 当数组中包含1个数组时，可以将里面的数组拉平，变成1个一维数组。参数代表拉平的层数。<code>Infinity</code></p><p>其它方法扩展。 <a href="http://es6.ruanyifeng.com/#docs/array" target="_blank" rel="noopener noreferrer">传送门<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p></li></ul><h2 id="_09-对象" tabindex="-1"><a class="header-anchor" href="#_09-对象" aria-hidden="true">#</a> 09. 对象</h2><h3 id="_9-1-属性简洁表示法" tabindex="-1"><a class="header-anchor" href="#_9-1-属性简洁表示法" aria-hidden="true">#</a> 9.1 属性简洁表示法</h3><p>​ 声明对象的时候，如果属性名和属性值都是一样的变量，可以使用简写的形式，代码演示如下。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token constant">ES5</span>写法<span class="token operator">:</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> gender <span class="token operator">=</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> name<span class="token punctuation">,</span>
    age<span class="token operator">:</span> age<span class="token punctuation">,</span>
    gender<span class="token operator">:</span> gender<span class="token punctuation">,</span>
    <span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;你好，hi...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token constant">ES6</span>简写形式
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> gender <span class="token operator">=</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">,</span>
    age<span class="token punctuation">,</span>
    gender<span class="token punctuation">,</span> <span class="token comment">//如果属性名，和属性的值使用的是同1个变量，可以这样简写</span>
    <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;你好，hi...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token comment">//对象方法也可以简写.</span>
<span class="token punctuation">}</span>


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="_9-2-属性名表达式" tabindex="-1"><a class="header-anchor" href="#_9-2-属性名表达式" aria-hidden="true">#</a> 9.2 属性名表达式</h3><p>在ES5中，要为对象新增1个属性，可以使用这样的代码</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span>
p1<span class="token punctuation">.</span>gender <span class="token operator">=</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">;</span>
p1<span class="token punctuation">[</span><span class="token string">&quot;weight&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">140</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>在ES6中，为对象新增属性，属性可以使用表达式，像下面这样</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span>
p1<span class="token punctuation">[</span><span class="token string">&quot;gen&quot;</span><span class="token operator">+</span><span class="token string">&quot;der&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">;</span>
p1<span class="token punctuation">[</span><span class="token string">&quot;wei&quot;</span><span class="token operator">+</span><span class="token string">&quot;ght&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">140</span><span class="token punctuation">;</span>
p1<span class="token punctuation">[</span><span class="token string">&quot;say&quot;</span><span class="token operator">+</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hi....&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>最终对象是这样的，属性名可以使用拼接。</p><h3 id="_9-3-属性的可枚举" tabindex="-1"><a class="header-anchor" href="#_9-3-属性的可枚举" aria-hidden="true">#</a> 9.3 属性的可枚举</h3><h4 id="引入" tabindex="-1"><a class="header-anchor" href="#引入" aria-hidden="true">#</a> 引入</h4><p>​ <code>for in</code>可以遍历对象的属性包括方法</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
    <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hi...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> p1<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>结果如下</p><p>但是，你有没有想过一个问题，p1对象中只有这些成员吗？还有从父类继承过来的<code>toString</code>方法没有被遍历出来，是继承的属性不能被遍历吗？ 用代码证实一下</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Animal</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token operator">||</span> <span class="token string">&#39;Animal&#39;</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sleep</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&#39;正在睡觉！&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">food</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&#39;正在吃：&#39;</span> <span class="token operator">+</span> food<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&quot;哺乳动物&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>
<span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;cat&quot;</span>

<span class="token keyword">var</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> c1<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c1<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token comment">//证实父类的属性可以被遍历.</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>证实父类的属性可以被遍历</p><p>那究竟什么样的属性才可以被遍历呢？</p><h4 id="属性描述对象" tabindex="-1"><a class="header-anchor" href="#属性描述对象" aria-hidden="true">#</a> 属性描述对象</h4><blockquote><p>对象的每一个属性，其实都有1个描述对象，这个描述对象来保存这个属性的描述信息(是否能被遍历，是否可读，默认值...)。 使用 *Object.getOwnPropertyDescriptor()*方法可以获取对象的属性的描述方法.</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
    <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hi...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> desc <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取p1对象的name属性的描述对象</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>属性描述对象描述这个属性的信息如下。</p><p>​ 只有当属性的描述对象的<code>enumerable</code>值为<code>true</code>的时候，这个属性才会被允许遍历。</p><p>​ 那属性的描述对象的<code>enumerable</code>值什么时候才有可能为<code>false</code>呢?</p><p>​ 当我们使用<code>Object.getOwnPropertyDescriptor()</code> 为对象定义属性的时候，可以指定描述对象的<code>enumerable</code>的值</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
    <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hi...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//参数1  要设定属性的对象</span>
<span class="token comment">//参数2  要设定的属性的名</span>
<span class="token comment">//参数3  描述对象</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> <span class="token string">&quot;gender&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    value<span class="token operator">:</span> <span class="token string">&quot;男&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>​ 此时，新增的属性就不能被<code>for in</code>遍历了.</p><h4 id="属性遍历" tabindex="-1"><a class="header-anchor" href="#属性遍历" aria-hidden="true">#</a> 属性遍历</h4><h5 id="for-in-遍历对象" tabindex="-1"><a class="header-anchor" href="#for-in-遍历对象" aria-hidden="true">#</a> <code>for in</code> 遍历对象</h5><p>​ 循环遍历对象自身的和继承的可枚举属性</p><h5 id="object-keys-obj" tabindex="-1"><a class="header-anchor" href="#object-keys-obj" aria-hidden="true">#</a> <code>Object.keys(obj)</code></h5><p>​ 返回一个数组，包括对象自身的（不含继承的）所有可枚举属性的键名。</p><h5 id="object-getownpropertynames-obj" tabindex="-1"><a class="header-anchor" href="#object-getownpropertynames-obj" aria-hidden="true">#</a> <code>Object.getOwnPropertyNames(obj)</code></h5><p>​ 返回一个数组，包含对象自身的所有属性（包括不可枚举属性）的键名。</p><h2 id="_10-set" tabindex="-1"><a class="header-anchor" href="#_10-set" aria-hidden="true">#</a> 10. set</h2><blockquote><p>Set是1个类似于数组的数据结构，与数组不同的是，Set中的数据不允许重复，当向Set中添加1个已经存在的数据时，不会成功。</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//不会添加成功，但是不会报错</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>常用方法</p><ul><li><code>size</code>属性返回set中数据的个数</li><li><code>add()</code></li><li><code>delete()</code></li><li><code>has()</code></li><li><code>clear()</code></li></ul><p>遍历操作</p><ul><li><code>keys()</code></li><li><code>values()</code></li><li><code>entries()</code></li><li><code>forEach()</code></li></ul><h3 id="weakset" tabindex="-1"><a class="header-anchor" href="#weakset" aria-hidden="true">#</a> WeakSet</h3><blockquote><p>WeakSet和Set一样，都是存储不可重复的数据，与Set的区别有两点</p><ol><li>WeakSet中只能存储对象.</li><li>WeakSet中存储的对象都是弱引用，当外部没有变量指向对象的时候，即使被WeakSet所引用，对象也会被回收。</li></ol></blockquote><h2 id="_11-map" tabindex="-1"><a class="header-anchor" href="#_11-map" aria-hidden="true">#</a> 11. Map</h2><blockquote><p>键值对存储数据，和js中的对象类似，不同的是，js对象中的键只能是字符串，而map中的键可以是任意类型.</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;rose&quot;</span> <span class="token punctuation">}</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//以p1为键，将p2存储到Map对象中.</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="常用方法" tabindex="-1"><a class="header-anchor" href="#常用方法" aria-hidden="true">#</a> 常用方法</h3><ul><li><code>size</code>属性 获取Map中键值对的个数</li><li><code>set(key, value)</code> 添加键值对， <code>key</code>和<code>value</code>可以是任意的类型. 该方法返回当前Map对象.</li><li><code>get()</code>根据键获取键对应的值、</li><li><code>has(key)</code></li><li><code>delete(key)</code></li><li><code>clear()</code></li><li><code>keys()</code></li><li><code>values()</code></li><li><code>entries()</code></li><li><code>foreach()</code></li></ul><h3 id="weakmap" tabindex="-1"><a class="header-anchor" href="#weakmap" aria-hidden="true">#</a> WeakMap</h3><blockquote><p>与Map类似，WeakMap也是用来存储键值对的集合，与Map的区别有两点</p><ol><li>WeakMap只接受对象作为键名(null除外)</li><li>其次，<code>WeakMap</code>的键名所指向的对象，不计入垃圾回收机制。</li></ol></blockquote><h2 id="_12-迭代器" tabindex="-1"><a class="header-anchor" href="#_12-迭代器" aria-hidden="true">#</a> 12. 迭代器</h2><p>在ES6中新增了一种遍历方式叫做<code>for...of</code>，可以使用它来遍历数组、Map、Set等.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> arr<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> set<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;gender&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> map<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>能否使用<code>for...of</code>循环遍历我们自己写的对象吗？</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
    gender<span class="token operator">:</span> <span class="token string">&quot;男&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> p1<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">//报错 无法使用for of遍历p1对象.</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_12-1-for-of的原理" tabindex="-1"><a class="header-anchor" href="#_12-1-for-of的原理" aria-hidden="true">#</a> 12.1 for...of的原理</h3><p>​ 在使用<code>for..of</code>遍历1个对象的时候，先调用这个对象的<code>Symbol.iterator</code>方法，这个方法返回1个<code>迭代器</code>。每遍历一次，就会调用<code>迭代器</code>对象的<code>next</code>方法，这个方法会返回1个对象，这个对象包含两个属性，一个是<code>value</code>,指定本次遍历得到的结果，还有一个属性是<code>done</code>，bool值，代表遍历是否结束，每调用一次<code>next</code>方法， 就返回下1个被遍历的值，直到最后一个元素。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//1.调用set对象的遍历器方法，返回1个迭代器对象.  </span>
<span class="token keyword">const</span> iterator <span class="token operator">=</span> <span class="token keyword">set</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//iterator就是这个迭代器对象.</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> item <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>done<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_12-2-实现自己的迭代器" tabindex="-1"><a class="header-anchor" href="#_12-2-实现自己的迭代器" aria-hidden="true">#</a> 12.2 实现自己的迭代器</h3><p>知道了<code>for...of</code>的原理后， 如果我们希望我们自己的对象也能被<code>for...of</code>遍历，那么就可以这么做</p><ul><li>为对象添加1个<code>[Symbol.iterator]</code>方法。</li><li>这个方法返回1个对象</li><li>这个对象需要有1个next方法</li><li>这个next方法返回1个对象，对象包含<code>vulue</code>属性，表示本次遍历的值，包含1个<code>done</code>属性，表示本次遍历结束后是否还有数据。 然后保证下次调用next方法的时候 返回的是下1个数据.</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> hmSet <span class="token operator">=</span> <span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                    value<span class="token operator">:</span> that<span class="token punctuation">.</span>data<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    done<span class="token operator">:</span> index <span class="token operator">==</span> that<span class="token punctuation">.</span>data<span class="token punctuation">.</span>lenght <span class="token operator">+</span> <span class="token number">1</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> hmSet<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="_12-3-原生实现了迭代器的对象" tabindex="-1"><a class="header-anchor" href="#_12-3-原生实现了迭代器的对象" aria-hidden="true">#</a> 12.3 原生实现了迭代器的对象</h3><ul><li>Array</li><li>Map</li><li>Set</li><li>String</li><li>TypedArray</li><li>函数的 arguments 对象</li><li>NodeList 对象</li></ul><p>也就是说，这些对象是可以直接用<code>for...of</code>来遍历的。</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/WALL-E-WEB/everyday/edit/main/study/9.Node/Nodejs.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">12/15/2021, 4:09:07 PM</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: jia.top@jiatopdeiMac.lan">jia.top</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/jiji/assets/js/runtime~app.4bdad6db.js" defer></script><script src="/jiji/assets/js/812.314801ab.js" defer></script><script src="/jiji/assets/js/app.b79d7b56.js" defer></script>
  </body>
</html>
