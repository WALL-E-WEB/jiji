"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2778],{6524:(n,s,a)=>{a.r(s),a.d(s,{data:()=>p});const p={key:"v-c2a79916",path:"/study/9.Node/Nodejs.html",title:"NodeJS",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"require-加载规则",slug:"require-加载规则",children:[]},{level:2,title:"npm",slug:"npm",children:[]},{level:2,title:"文件系统",slug:"文件系统",children:[{level:4,title:"文件删除",slug:"文件删除",children:[]},{level:4,title:"文件读取",slug:"文件读取",children:[]},{level:4,title:"writeFile()",slug:"writefile",children:[]}]},{level:2,title:"path模块-路径",slug:"path模块-路径",children:[]},{level:2,title:"http",slug:"http",children:[]},{level:2,title:"创建本地服务器",slug:"创建本地服务器",children:[]},{level:2,title:"request-请求报文",slug:"request-请求报文",children:[]},{level:2,title:"response-响应报文",slug:"response-响应报文",children:[]},{level:2,title:"get/post",slug:"get-post",children:[]},{level:2,title:"Express",slug:"express",children:[]},{level:2,title:"multer",slug:"multer",children:[]},{level:2,title:"中间件",slug:"中间件",children:[]},{level:2,title:"hash",slug:"hash",children:[]},{level:2,title:"图片验证",slug:"图片验证",children:[]},{level:2,title:"connect-multipary",slug:"connect-multipary",children:[]},{level:2,title:"all方法",slug:"all方法",children:[]},{level:2,title:"race方法",slug:"race方法",children:[]},{level:2,title:"mysql",slug:"mysql",children:[{level:3,title:"1.http-简单文件服务器",slug:"_1-http-简单文件服务器",children:[]},{level:3,title:"2.重定向",slug:"_2-重定向",children:[]},{level:3,title:"3.获取get数据",slug:"_3-获取get数据",children:[]},{level:3,title:"4.path模块生成路径",slug:"_4-path模块生成路径",children:[]},{level:3,title:"5.数据库操作封装",slug:"_5-数据库操作封装",children:[]}]},{level:2,title:"let 与 const",slug:"let-与-const",children:[]},{level:2,title:"解构",slug:"解构",children:[{level:3,title:"对象解构赋值",slug:"对象解构赋值",children:[]},{level:3,title:"字符串解构",slug:"字符串解构",children:[]},{level:3,title:"函数参数解构赋值",slug:"函数参数解构赋值",children:[]},{level:3,title:"解构用途",slug:"解构用途",children:[]}]},{level:2,title:"箭头函数",slug:"箭头函数",children:[{level:3,title:"展开运算符",slug:"展开运算符",children:[]},{level:3,title:"模板字符串",slug:"模板字符串",children:[]}]},{level:2,title:"01.  ES6简介",slug:"_01-es6简介",children:[{level:3,title:"1.1 什么是ES6",slug:"_1-1-什么是es6",children:[]},{level:3,title:"1.2 ES6的兼容性",slug:"_1-2-es6的兼容性",children:[]}]},{level:2,title:"02. let与const",slug:"_02-let与const",children:[{level:3,title:"2.1 他们是什么？",slug:"_2-1-他们是什么",children:[]},{level:3,title:"2.2 let与const的区别",slug:"_2-2-let与const的区别",children:[]},{level:3,title:"2.3 与var的区别",slug:"_2-3-与var的区别",children:[]},{level:3,title:"2.4 使用建议",slug:"_2-4-使用建议",children:[]}]},{level:2,title:"03. 箭头函数",slug:"_03-箭头函数",children:[{level:3,title:"3.1 箭头函数的书写规则",slug:"_3-1-箭头函数的书写规则",children:[]},{level:3,title:"3.2 更简洁的写法",slug:"_3-2-更简洁的写法",children:[]},{level:3,title:"3.3 箭头函数的使用场景",slug:"_3-3-箭头函数的使用场景",children:[]},{level:3,title:"3.4 箭头函数使用注意",slug:"_3-4-箭头函数使用注意",children:[]}]},{level:2,title:"04. 字符串",slug:"_04-字符串",children:[{level:3,title:"4.1 模板字符串",slug:"_4-1-模板字符串",children:[]},{level:3,title:"4.2 字符串新增方法",slug:"_4-2-字符串新增方法",children:[]}]},{level:2,title:"05. 数值Number",slug:"_05-数值number",children:[]},{level:2,title:"06. Math类",slug:"_06-math类",children:[]},{level:2,title:"07. 函数",slug:"_07-函数",children:[{level:3,title:"7.1 参数默认值",slug:"_7-1-参数默认值",children:[]},{level:3,title:"7.2 参数是1个对象的时候",slug:"_7-2-参数是1个对象的时候",children:[]},{level:3,title:"7.3 rest参数(可变参数)",slug:"_7-3-rest参数-可变参数",children:[]},{level:3,title:"7.4 函数参数的尾逗号",slug:"_7-4-函数参数的尾逗号",children:[]}]},{level:2,title:"08. 数组",slug:"_08-数组",children:[{level:3,title:"8.1 扩展运算符",slug:"_8-1-扩展运算符",children:[]},{level:3,title:"8.2 常用扩展方法",slug:"_8-2-常用扩展方法",children:[]}]},{level:2,title:"09. 对象",slug:"_09-对象",children:[{level:3,title:"9.1 属性简洁表示法",slug:"_9-1-属性简洁表示法",children:[]},{level:3,title:"9.2 属性名表达式",slug:"_9-2-属性名表达式",children:[]},{level:3,title:"9.3 属性的可枚举",slug:"_9-3-属性的可枚举",children:[{level:4,title:"引入",slug:"引入",children:[]},{level:4,title:"属性描述对象",slug:"属性描述对象",children:[]},{level:4,title:"属性遍历",slug:"属性遍历",children:[{level:5,title:"for in 遍历对象",slug:"for-in-遍历对象",children:[]},{level:5,title:"Object.keys(obj)",slug:"object-keys-obj",children:[]},{level:5,title:"Object.getOwnPropertyNames(obj)",slug:"object-getownpropertynames-obj",children:[]}]}]}]},{level:2,title:"10. set",slug:"_10-set",children:[{level:3,title:"WeakSet",slug:"weakset",children:[]}]},{level:2,title:"11. Map",slug:"_11-map",children:[{level:3,title:"常用方法",slug:"常用方法",children:[]},{level:3,title:"WeakMap",slug:"weakmap",children:[]}]},{level:2,title:"12. 迭代器",slug:"_12-迭代器",children:[{level:3,title:"12.1 for...of的原理",slug:"_12-1-for-of的原理",children:[]},{level:3,title:"12.2 实现自己的迭代器",slug:"_12-2-实现自己的迭代器",children:[]},{level:3,title:"12.3 原生实现了迭代器的对象",slug:"_12-3-原生实现了迭代器的对象",children:[]}]}],filePathRelative:"study/9.Node/Nodejs.md",git:{updatedTime:1639555747e3}}},2724:(n,s,a)=>{a.r(s),a.d(s,{default:()=>y});var p=a(6252);const t=(0,p.uE)('<h1 id="nodejs" tabindex="-1"><a class="header-anchor" href="#nodejs" aria-hidden="true">#</a> NodeJS</h1><p>是一种不需要在浏览器执行的技术;</p><p>​ 1.内置了谷歌的V8引擎-高效率的执行 js代码;</p><p>​ 2.内置模块 就是写好的 Js代码,类似于jquery.js;</p><p>数据库,微服务(Docker);</p><p>ipconfig 查看ip地址</p><p>cls 清屏</p><h2 id="require-加载规则" tabindex="-1"><a class="header-anchor" href="#require-加载规则" aria-hidden="true">#</a> require-加载规则</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;模块标识&#39;</span><span class="token punctuation">)</span>\n\t<span class="token number">1.</span>缓存优先<span class="token punctuation">,</span>\n    <span class="token number">2.</span> 模块\n    \t<span class="token number">1.</span>第三方模块<span class="token operator">:</span>\n\t\t<span class="token number">2.</span>核心模块<span class="token operator">:</span>已转为二进制<span class="token punctuation">,</span>本质是文件\n\t\t<span class="token number">3.</span>引用<span class="token operator">:</span><span class="token string">&#39;./xxx&#39;</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="npm" tabindex="-1"><a class="header-anchor" href="#npm" aria-hidden="true">#</a> npm</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>cnpm<span class="token operator">-</span>淘宝\nnpm<span class="token punctuation">.</span>taobao<span class="token punctuation">.</span>org\nnpm install <span class="token operator">--</span>global cnpm   <span class="token comment">//使用淘宝镜像 后面使用cnpm</span>\n\nnpm install 包名 <span class="token operator">--</span>registry<span class="token operator">=</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>registry<span class="token punctuation">.</span>npm<span class="token punctuation">.</span>taobao<span class="token punctuation">.</span>org\n\n加载改为<span class="token operator">:</span>\nnpm config <span class="token keyword">set</span> registry https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>registry<span class="token punctuation">.</span>npm<span class="token punctuation">.</span>taobao<span class="token punctuation">.</span>org\n\nnpm init\n\tnpm init <span class="token operator">-</span>y <span class="token comment">//跳过导向一步到位,直到创建依赖项创建</span>\n\nnpm install <span class="token operator">--</span>save 包名 下载并保存依赖项\n\tnpm i <span class="token operator">-</span><span class="token constant">S</span> 包名\n\t\nnpm uninstall <span class="token operator">--</span>save 包名  删除\n\tnpm un <span class="token operator">-</span><span class="token constant">S</span> 包名\n\nnpm 命令 <span class="token operator">--</span>help\n\n查看是否成功\nnpm config list\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="文件系统" tabindex="-1"><a class="header-anchor" href="#文件系统" aria-hidden="true">#</a> 文件系统</h2><h4 id="文件删除" tabindex="-1"><a class="header-anchor" href="#文件删除" aria-hidden="true">#</a> 文件删除</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nfs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string">&quot;./tex.txt&quot;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span>err <span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="文件读取" tabindex="-1"><a class="header-anchor" href="#文件读取" aria-hidden="true">#</a> 文件读取</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//异步</span>\n\t第一个参数<span class="token operator">:</span>读取文件路径<span class="token punctuation">;</span>\n\t第二个参数是<span class="token operator">:</span>一个回调函数\n    \t成功<span class="token operator">:</span>\n\t\t\tdata 数据\n            err\t错误对象  err<span class="token punctuation">.</span>message<span class="token punctuation">;</span>\nfs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>encoding<span class="token operator">:</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n\t<span class="token keyword">if</span><span class="token punctuation">(</span>err <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n\t\tconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>\n\t\tcosole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t<span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n\n\nurl是相对于小黑框的执行路径而言<span class="token punctuation">;</span>\nurl <span class="token operator">=</span> nodejs执行所在的位置<span class="token operator">+</span>url<span class="token punctuation">;</span>\n\n\t问题<span class="token operator">:</span>相对路径不准确<span class="token punctuation">,</span>绝对不可移动<span class="token punctuation">;</span>\n\t解决<span class="token operator">:</span>\n\t__dirname\t执行js文件 所在 的绝对路径<span class="token comment">//两个下划线</span>\n    __filename\t执行js文件 本身的绝对路径<span class="token comment">//两个下划线</span>\n<span class="token keyword">let</span> filePath <span class="token operator">=</span> _dirname<span class="token operator">+</span><span class="token string">&#39;./aa.txt&#39;</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="writefile" tabindex="-1"><a class="header-anchor" href="#writefile" aria-hidden="true">#</a> writeFile()</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>第一个参数<span class="token operator">:</span>文件路径<span class="token punctuation">;</span>\n第二个参数<span class="token operator">:</span>文件内容<span class="token punctuation">;</span>\n第三个参数<span class="token operator">:</span>回调函数<span class="token punctuation">;</span>\nfs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;写入内容&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>\n       <span class="token comment">//失败</span>\n      <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>\n        <span class="token comment">//成功</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="path模块-路径" tabindex="-1"><a class="header-anchor" href="#path模块-路径" aria-hidden="true">#</a> path模块-路径</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> filePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n拼接路径\n\n导入本地包\n<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//</span>\n\n<span class="token keyword">const</span> dbpath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;utils&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;db.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//通过path方法 导入其他包</span>\n<span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>dbpath<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//导入包</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="http" tabindex="-1"><a class="header-anchor" href="#http" aria-hidden="true">#</a> http</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> serverobj <span class="token operator">=</span>http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>reponse</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>\t<span class="token punctuation">{</span>\n    \n\t<span class="token punctuation">}</span><span class="token punctuation">)</span>\n    \trequest<span class="token operator">:</span>请求报文<span class="token punctuation">,</span>包含浏览器发来的数据\n        reponse<span class="token operator">:</span>响应报文对象<span class="token punctuation">,</span>包含了和准备了要发送到浏览器的数据\nserverobj<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    \n<span class="token punctuation">}</span><span class="token punctuation">)</span>\nlocallhost<span class="token operator">:</span><span class="token number">3747</span><span class="token punctuation">;</span>浏览器请求\n\nrequest对象<span class="token punctuation">,</span>请求报文<span class="token punctuation">,</span>\nrequest<span class="token punctuation">.</span>url<span class="token operator">:</span>文件路径\nrequest<span class="token punctuation">.</span>method<span class="token operator">:</span>get<span class="token punctuation">,</span>post\nrequest<span class="token punctuation">.</span>headers<span class="token operator">:</span>\nrequest<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>host<span class="token operator">:</span>请求记录<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>什么是服务器软件<span class="token operator">?</span>\n\t用来和浏览器软件做通信的软件<span class="token punctuation">,</span>接受 分析 业务处理<span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span>\nip 和端口的作用<span class="token operator">?</span>\n\tip<span class="token operator">:</span>互联网中唯一标识<span class="token punctuation">;</span>\n\tport<span class="token operator">:</span>在电脑中 唯一标识\n使用http模块<span class="token punctuation">,</span>\n\t<span class="token number">1.</span>导包<span class="token punctuation">;</span><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t<span class="token number">2.</span>创建<span class="token punctuation">;</span>服务器对象\n\t<span class="token number">3.</span>启动<span class="token punctuation">;</span>服务器软件监听<span class="token punctuation">;</span><span class="token function">serverlisten</span><span class="token punctuation">(</span><span class="token number">3747</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\t启动服务器时执行\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="创建本地服务器" tabindex="-1"><a class="header-anchor" href="#创建本地服务器" aria-hidden="true">#</a> 创建本地服务器</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">var</span> serverobj <span class="token operator">=</span> <span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    <span class="token keyword">var</span> filepath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n        \n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nserverobj<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3747</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    \n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n<span class="token number">1.</span>加载核心模块\n\t<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token number">2.</span>创建\n\t<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">cearteServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>reponse</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n        \n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token number">3.</span>服务要干嘛\n\tserver<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;request&#39;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;收到客户请求&#39;</span><span class="token operator">+</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    response<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;holllll&#39;</span><span class="token punctuation">)</span>\n    response<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;nodejs&#39;</span><span class="token punctuation">)</span>\n    response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    \n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token number">4.</span>绑定端口号<span class="token punctuation">,</span>启动服务\n\tserver<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        \n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n\nresquest<span class="token punctuation">.</span><span class="token function">setHearder</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;text/html;charset-utf-8&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="request-请求报文" tabindex="-1"><a class="header-anchor" href="#request-请求报文" aria-hidden="true">#</a> request-请求报文</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>request<span class="token punctuation">.</span>url 请求的路径\nrequest<span class="token punctuation">.</span>method 请求的方式 get<span class="token operator">/</span>post\nrequest<span class="token punctuation">.</span>query<span class="token punctuation">.</span>key   获取<span class="token keyword">get</span>发送的url<span class="token operator">?</span>后的key<span class="token operator">=</span>value\nrequest<span class="token punctuation">.</span>post\nrequest<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;content-type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;text/html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 设置\nreuqest<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&#39;content-type&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// text/html; 获取</span>\nreuqest<span class="token punctuation">.</span><span class="token function">removeHeader</span><span class="token punctuation">(</span><span class="token string">&#39;content-type&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//移除</span>\n\nrequest<span class="token punctuation">.</span>headers  打印全部请求头信息<span class="token operator">--</span>对象形式\nrequest<span class="token punctuation">.</span>rawHeaders  全部头信息<span class="token operator">--</span>数组形式\nrequest<span class="token punctuation">.</span>httpVersion  请求的协议方式\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="response-响应报文" tabindex="-1"><a class="header-anchor" href="#response-响应报文" aria-hidden="true">#</a> response-响应报文</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>response.header\nresponse.setHeader(属性名,属性值);\nresponse.wriete();\nresponse.end()\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="get-post" tabindex="-1"><a class="header-anchor" href="#get-post" aria-hidden="true">#</a> get/post</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> method <span class="token operator">=</span> <span class="token string">&#39;GET/POST&#39;</span>\n \n <span class="token constant">GET</span><span class="token operator">:</span>把数据放到url；\n <span class="token constant">POGT</span>：把数据放到 请求报文体 中； \n \n 应用场景：\n \t<span class="token constant">GET</span>：为了获取服务器数据；（获取）\n \t<span class="token constant">POST</span><span class="token operator">:</span>为了修改改正服务器数据；（提交）\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="express" tabindex="-1"><a class="header-anchor" href="#express" aria-hidden="true">#</a> Express</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>www<span class="token punctuation">.</span>express<span class="token punctuation">.</span>com<span class="token punctuation">.</span>cn\n\n<span class="token comment">//1.下载</span>\n<span class="token comment">//2.导包</span>\n<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> body<span class="token operator">-</span>parser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;body-parser&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//用户post</span>\n<span class="token comment">//2.1设置 web 文件夹 为 静态资源文件夹，浏览器可以直接访问</span>\napp<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&#39;web&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">//2.2 注册 body-parser 中间件：自动 帮我们把 浏览器 发送来的 post 数据 封装到 request.body 中</span>\napp<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> extended<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// parse application/x-www-form-urlencoded</span>\napp<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// parse application/json</span>\n\n<span class="token comment">//3. 创建服务器</span>\n\t<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\n\n<span class="token comment">// 4.注册路由</span>\n  <span class="token comment">// 4.1向浏览器发送 响应数据</span>\n    app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/htmll&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n            <span class="token comment">//1.字符串</span>\n            res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;sdfsdfsdsdfdfdfsdf&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//写在报文体</span>\n            <span class="token comment">//2.JSON</span>\n            <span class="token comment">// let obj = {name:&#39;kk&#39;,age:&#39;dddd&#39;};</span>\n            <span class="token comment">// res.send(obj); //JSON.parse(obj)里面执行</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t<span class="token comment">//4.2获取 浏览器发送来的 get 参数，并打印</span>\n\tapp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/url&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\t<span class="token comment">//4.3post</span>\n    app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/reg&#39;</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>txtName<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>txtPwd<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n<span class="token comment">// 5.</span>\n\n\n\n<span class="token comment">// 6.启动,设置端口</span>\n    app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3747</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;success&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>\n            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;启动 失败&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h2 id="multer" tabindex="-1"><a class="header-anchor" href="#multer" aria-hidden="true">#</a> multer</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>expressjs<span class="token operator">/</span>multer<span class="token operator">/</span>blob<span class="token operator">/</span>master<span class="token operator">/</span>doc<span class="token operator">/</span><span class="token constant">README</span><span class="token operator">-</span>zh<span class="token operator">-</span>cn<span class="token punctuation">.</span>md\n\n<span class="token comment">//1.导包</span>\n<span class="token comment">//1.1 导入 express 包</span>\n<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span>\n<span class="token comment">//1.2 创建 express服务器程序对象</span>\n<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token comment">//1.3 创建 multer 对象，并设置 上传文件夹</span>\n<span class="token keyword">var</span> multer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;multer&#39;</span><span class="token punctuation">)</span>\n\n<span class="token keyword">var</span> upload <span class="token operator">=</span> <span class="token function">multer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> dest<span class="token operator">:</span> <span class="token string">&#39;uploads/&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>创建文件夹\n\n<span class="token comment">//2.1设置 web 文件夹 为 静态资源文件夹，浏览器可以直接访问</span>\napp<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&#39;web&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">//3.注册路由 (url -&gt; 处理函数 的关系)</span>\n\n<span class="token comment">// 3.3 获取 浏览器 发送来的 post 参数，并打印</span>\napp<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/upload&#39;</span><span class="token punctuation">,</span> upload<span class="token punctuation">.</span><span class="token function">single</span><span class="token punctuation">(</span><span class="token string">&#39;file01&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>注册路由\n  <span class="token comment">// req.file 是 `file01` 文件的信息</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// req.body 将具有文本域数据，如果存在的话</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;上传成功啦~~~&#39;</span> <span class="token operator">+</span> req<span class="token punctuation">.</span>file<span class="token punctuation">.</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>req<span class="token punctuation">.</span>files 是 <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">photos</span><span class="token template-punctuation string">`</span></span> 文件数组的信息\n<span class="token punctuation">{</span> fieldname<span class="token operator">:</span> <span class="token string">&#39;icon&#39;</span><span class="token punctuation">,</span>\n  originalname<span class="token operator">:</span> <span class="token string">&#39;6385682971224b4c33e8e3507fd7a279.png&#39;</span><span class="token punctuation">,</span>\n  encoding<span class="token operator">:</span> <span class="token string">&#39;7bit&#39;</span><span class="token punctuation">,</span>\n  mimetype<span class="token operator">:</span> <span class="token string">&#39;image/png&#39;</span><span class="token punctuation">,</span>\n  destination<span class="token operator">:</span> <span class="token string">&#39;uploads&#39;</span><span class="token punctuation">,</span>\n  filename<span class="token operator">:</span> <span class="token string">&#39;8c9c56da992fc02ab691a7dca0d0c63e&#39;</span><span class="token punctuation">,</span>\n  path<span class="token operator">:</span> <span class="token string">&#39;uploads\\\\8c9c56da992fc02ab691a7dca0d0c63e&#39;</span><span class="token punctuation">,</span>\n  size<span class="token operator">:</span> <span class="token number">25978</span> <span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>req<span class="token punctuation">.</span>body 将具有文本域数据，如果存在的话\n<span class="token punctuation">[</span>Object<span class="token operator">:</span> <span class="token keyword">null</span> prototype<span class="token punctuation">]</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;walle&#39;</span><span class="token punctuation">,</span> sikll<span class="token operator">:</span> <span class="token string">&#39;kuku&#39;</span> <span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h1 id="express-1" tabindex="-1"><a class="header-anchor" href="#express-1" aria-hidden="true">#</a> express</h1><h2 id="中间件" tabindex="-1"><a class="header-anchor" href="#中间件" aria-hidden="true">#</a> 中间件</h2><ul><li>特点: <ol><li>使用app.use 注册中间件 函数—-本质是一个函数;</li><li>中间件函数有三个固定的参数(request,response,next());</li><li>中间件中 必须调用 next()函数,!!一般放在所有业务执行之后;</li><li>【面向切面编程】中间件,不论哪个路由被请求都会 先执行 中间件;</li></ol></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>中间件\n\t\napp<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>response<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n\t\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\napp<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&#39;web/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//暴露文件</span>\n\napp<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span>extende<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\napp<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Router()</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span>\n\n<span class="token keyword">let</span> myRouter <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\nmyRouter<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n\t<span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\nmyRouter<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/htmss&#39;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> myRouter\n\n<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>\n导入<span class="token operator">:</span>\n<span class="token keyword">const</span> myrouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./01myrouter.js&#39;</span><span class="token punctuation">)</span>\n\napp<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>myrouter<span class="token punctuation">)</span> <span class="token comment">//自定义路由模块 注册</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="hash" tabindex="-1"><a class="header-anchor" href="#hash" aria-hidden="true">#</a> hash</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>hash<span class="token punctuation">.</span>js   npm搜索\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h1 id="cookie" tabindex="-1"><a class="header-anchor" href="#cookie" aria-hidden="true">#</a> cookie</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> cookieParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;cookie-parser&#39;</span><span class="token punctuation">)</span>\n\n注册cookie中间件\napp<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cookieParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n\nres<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\nbackurl<span class="token operator">:</span><span class="token string">&#39;/index&#39;</span> 返回链接\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h1 id="cookie-session" tabindex="-1"><a class="header-anchor" href="#cookie-session" aria-hidden="true">#</a> cookie-session</h1><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>session模块包含cookie-parser所有方法\n\napp.use(cookiesession({\n\tname:&#39;sessionId&#39;,\n\tkeys:[&#39;234&#39;,&#39;kjlk&#39;]\n}))\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="图片验证" tabindex="-1"><a class="header-anchor" href="#图片验证" aria-hidden="true">#</a> 图片验证</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>svg-captcha\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="connect-multipary" tabindex="-1"><a class="header-anchor" href="#connect-multipary" aria-hidden="true">#</a> connect-multipary</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>bodyparser 不支持formdata\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h1 id="跨域" tabindex="-1"><a class="header-anchor" href="#跨域" aria-hidden="true">#</a> 跨域</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>浏览器会针对 异步对象 的 异步请求 做 跨域请求<span class="token punctuation">.</span>\n\n<span class="token operator">--</span><span class="token number">1.</span>请求添加如下<span class="token operator">:</span>响应报文加如下\nresponse<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Access-Control-Allow-Origin&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">)</span>\n添加到响应报文<span class="token punctuation">,</span>允许跨域访问\n\n<span class="token operator">--</span><span class="token number">2.</span>下载包解决<span class="token punctuation">,</span>原理如<span class="token number">1</span><span class="token punctuation">;</span>\nnpm i cors\n<span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;cors&#39;</span><span class="token punctuation">)</span>\n注册cors跨域中间件\napp<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n\n<span class="token operator">--</span><span class="token number">3.</span>解决<span class="token operator">:</span>利用创建script的src请求<span class="token punctuation">;</span>避开对http对异步跨域检测\n$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    url<span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>\n    method<span class="token operator">:</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span>\n    dataType<span class="token operator">:</span><span class="token string">&#39;jsonp&#39;</span><span class="token punctuation">,</span><span class="token comment">//ajax不再使用异步请求,而是使用script标签去请求</span>\n    cache<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//不使用缓存,原理:是url产生随机数</span>\n    <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">backdata</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token function">eval</span><span class="token punctuation">(</span>backData<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n以上操作原理如下<span class="token operator">:</span>\n<span class="token keyword">let</span> strhtml <span class="token operator">=</span> <span class="token string">&#39;&lt;script src=&quot;跨域地址&quot;&gt;&lt;/script&gt;&#39;</span>\n<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;body&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>strhtml<span class="token punctuation">)</span>\n\n<span class="token operator">--</span><span class="token number">4.</span>通过src写入参数传入服务器<span class="token punctuation">,</span>\n<span class="token keyword">let</span> strhtml <span class="token operator">=</span> <span class="token string">&#39;&lt;script src=&quot;跨域地址?fn=fnname&quot;&gt;&lt;/script&gt;&#39;</span>\n<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;body&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>strhtml<span class="token punctuation">)</span>\n服务端<span class="token operator">:</span>\n<span class="token keyword">let</span> jsmethodname <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>fn\nres<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>jsmethodname <span class="token operator">+</span><span class="token string">&#39;(参数)&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h1 id="jsonp" tabindex="-1"><a class="header-anchor" href="#jsonp" aria-hidden="true">#</a> JSONP</h1><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h1 id="promise" tabindex="-1"><a class="header-anchor" href="#promise" aria-hidden="true">#</a> promise</h1><p>三个状态</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>pending<span class="token operator">:</span>进行中\nfulfilled<span class="token operator">:</span>成功\nrejected<span class="token operator">:</span>失败\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">getPromise</span><span class="token punctuation">(</span><span class="token parameter">fileName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n      <span class="token comment">//读文件</span>\n      fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./etc/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.txt</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token comment">//读文件没有出错(异步成功)</span>\n          <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n          <span class="token comment">//失败</span>\n          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">//需求: 要先读a, 读完a后读b, 读完b后读c.</span>\n<span class="token function">getPromise</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">//继续读b</span>\n    <span class="token keyword">return</span> <span class="token function">getPromise</span><span class="token punctuation">(</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">//继续读c</span>\n    <span class="token keyword">return</span> <span class="token function">getPromise</span><span class="token punctuation">(</span><span class="token string">&#39;c&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token comment">//catch方法用来捕获错误信息的</span>\n      \n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n\npromise 是一个构造函数\n<span class="token comment">//必须传入一个回调函数,两个参数resolve,reject</span>\n<span class="token comment">//把需要异步的代码放到这个构造函数里</span>\n<span class="token comment">//没有错执行resolve</span>\n<span class="token comment">//错执行reject</span>\n<span class="token comment">//一旦创建即执行</span>\n<span class="token keyword">let</span> pm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        \t<span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>\n        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>\n            <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>  \n\n<span class="token comment">// </span>\npm<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n\t\t\t\t\t\t<span class="token comment">//里面调用数据传入resolve(data)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    \n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><p>catch</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>用于捕获错误信息\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="all方法" tabindex="-1"><a class="header-anchor" href="#all方法" aria-hidden="true">#</a> all方法</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">/</span>读a<span class="token operator">/</span>b<span class="token operator">/</span>c文件的promise\n<span class="token keyword">let</span> pa <span class="token operator">=</span> <span class="token function">getPromise</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> pb <span class="token operator">=</span> <span class="token function">getPromise</span><span class="token punctuation">(</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> pc <span class="token operator">=</span> <span class="token function">getPromise</span><span class="token punctuation">(</span><span class="token string">&#39;c&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 把这三个promise对象,搞成一个promise对象.</span>\n<span class="token keyword">let</span> pAll <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pa<span class="token punctuation">,</span>pb<span class="token punctuation">,</span>pc<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 三个promise都异步成功后,才去执行pAll.then的第一个参数函数.</span>\n<span class="token comment">// 只要有一个失败了,就去执行catch里面的函数.</span>\npAll<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="race方法" tabindex="-1"><a class="header-anchor" href="#race方法" aria-hidden="true">#</a> race方法</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>与all类似\n只需一个成功就执行\n\n\n<span class="token comment">// 三个promise只需要有一个异步请求成功了,就会去执行p.then的第一个参数函数.</span>\n<span class="token comment">// 都失败了,就去执行catch里面的函数.</span>\n<span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pa<span class="token punctuation">,</span> pb<span class="token punctuation">,</span> pc<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\np<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h1 id="数据库" tabindex="-1"><a class="header-anchor" href="#数据库" aria-hidden="true">#</a> 数据库</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">--</span> <span class="token number">1.</span>查询\nselect <span class="token operator">*</span> from heroinfo\n\n\n<span class="token operator">--</span> <span class="token number">2.</span>新增\ninsert into <span class="token function">heroinfo</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>skill<span class="token punctuation">,</span>icon<span class="token punctuation">)</span> <span class="token function">values</span><span class="token punctuation">(</span><span class="token string">&#39;孙悟空&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;金箍棒&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;3.jpg&#39;</span> <span class="token punctuation">)</span>\n\n\n<span class="token operator">--</span><span class="token number">3.</span>删除\n<span class="token keyword">delete</span> from heroinfo where id<span class="token operator">=</span><span class="token number">3</span>\n<span class="token keyword">delete</span> from heroinfo where id<span class="token operator">&gt;</span><span class="token number">1</span> and id<span class="token operator">&lt;=</span><span class="token number">4</span>\n\n\n<span class="token operator">--</span><span class="token number">4.</span>修改\nupdate heroinfo <span class="token keyword">set</span> skill <span class="token operator">=</span> <span class="token string">&#39;七十二变&#39;</span> where id<span class="token operator">=</span><span class="token number">5</span>\nupdate heroinfo <span class="token keyword">set</span> skill <span class="token operator">=</span> <span class="token string">&#39;77变&#39;</span> <span class="token punctuation">,</span>icon<span class="token operator">=</span> <span class="token string">&#39;7.jpg&#39;</span> where id <span class="token operator">=</span> <span class="token number">5</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql" aria-hidden="true">#</a> mysql</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mysql&#39;</span><span class="token punctuation">)</span>\n<span class="token keyword">var</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token comment">//创建连接</span>\n\thost<span class="token operator">:</span><span class="token string">&#39;127.0.0.1&#39;</span><span class="token punctuation">,</span>\n    port<span class="token operator">:</span><span class="token number">3306</span><span class="token punctuation">,</span><span class="token comment">//默认3306,可不写</span>\n\tuser<span class="token operator">:</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span>\n\tpassword<span class="token operator">:</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span>\n\tdatabase<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>数据库名\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n    \nconnection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//连接</span>\n\n\nconnection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">&#39;数据库操作语句&#39;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>res<span class="token punctuation">,</span>fields</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    \n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\nconnection<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//关闭连接</span>\n\n\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>返回\nselect的返回<span class="token operator">:</span>\n<span class="token punctuation">[</span> RowDataPacket <span class="token punctuation">{</span> Id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&#39;pppp&#39;</span><span class="token punctuation">,</span> skill<span class="token operator">:</span> <span class="token string">&#39;sss&#39;</span><span class="token punctuation">,</span> icon<span class="token operator">:</span> <span class="token string">&#39;sss&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  RowDataPacket <span class="token punctuation">{</span> Id<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&#39;pppp&#39;</span><span class="token punctuation">,</span> skill<span class="token operator">:</span> <span class="token string">&#39;kk&#39;</span><span class="token punctuation">,</span> icon<span class="token operator">:</span> <span class="token string">&#39;kk&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  RowDataPacket <span class="token punctuation">{</span> Id<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&#39;pppp&#39;</span><span class="token punctuation">,</span> skill<span class="token operator">:</span> <span class="token string">&#39;kuku&#39;</span><span class="token punctuation">,</span> icon<span class="token operator">:</span> <span class="token string">&#39;kk&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  RowDataPacket <span class="token punctuation">{</span> Id<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&#39;pppp&#39;</span><span class="token punctuation">,</span> skill<span class="token operator">:</span> <span class="token string">&#39;kk&#39;</span><span class="token punctuation">,</span> icon<span class="token operator">:</span> <span class="token string">&#39;kk&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span>\n  \ninsert<span class="token operator">:</span>的返回\n\tOkPacket<span class="token punctuation">{</span>\n      fieldCount<span class="token operator">:</span><span class="token number">0</span>\n      affectedRows<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">//受影响行数,新增,修改,删除</span>\n      insertId<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\t<span class="token comment">//新增操作会 返回新增行id</span>\n      serverStatus<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token comment">//服务器状态</span>\n      warningCount<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n      message<span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>\n      protocol41<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      changedRows<span class="token operator">:</span> <span class="token number">0</span>\n    <span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h1 id="获取异步值方法" tabindex="-1"><a class="header-anchor" href="#获取异步值方法" aria-hidden="true">#</a> 获取异步值方法</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/*\n * @Description: In User Settings Edit\n * @Author: your name\n * @Date: 2019-08-28 19:35:16\n * @LastEditTime: 2019-08-28 19:35:25\n * @LastEditors: Please set LastEditors\n */</span>\n<span class="token comment">//1.调函数</span>\n<span class="token keyword">function</span> <span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        r <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n        <span class="token function">cb</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">alert</span><span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token function">getSomething</span><span class="token punctuation">(</span>compute<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n\n<span class="token comment">//2.promise</span>\n<span class="token comment">//专门解决由于回调函数引起的问题</span>\n<span class="token keyword">function</span> <span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            r <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n            <span class="token function">resolve</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">alert</span><span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>compute<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">//3.generator</span>\n<span class="token comment">//有中断函数执行的能力</span>\n<span class="token keyword">function</span> <span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        r <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n        it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token parameter">it</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">alert</span><span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">var</span> it <span class="token operator">=</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nit<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">//4.promise + generator</span>\n<span class="token comment">//promise加generator，才是异步的完美方式</span>\n<span class="token keyword">function</span> <span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            r <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n            <span class="token function">resolve</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">alert</span><span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">var</span> it <span class="token operator">=</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nit<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n\n<span class="token comment">//5.async</span>\n<span class="token comment">//终极方案:async。</span>\n<span class="token keyword">function</span> <span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            r <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n            <span class="token function">resolve</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">alert</span><span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br></div></div><h1 id="案例" tabindex="-1"><a class="header-anchor" href="#案例" aria-hidden="true">#</a> 案例</h1><h3 id="_1-http-简单文件服务器" tabindex="-1"><a class="header-anchor" href="#_1-http-简单文件服务器" aria-hidden="true">#</a> 1.http-简单文件服务器</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> mime <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mime&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>\n<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> serverobj <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> urlstr <span class="token operator">=</span> request<span class="token punctuation">.</span>url<span class="token punctuation">;</span> <span class="token comment">//获取请求/后的链接</span>\n    \n    <span class="token comment">//根据链接 获取mime值 ,</span>\n    <span class="token keyword">let</span> mimeval <span class="token operator">=</span> mime<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span>urlstr<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    \n    <span class="token comment">//设置response headers中的 Content-Type</span>\n    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> mimeval<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> filepath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> urlstr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取地址</span>\n    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>\n            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;请求失败&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\nserverobj<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3747</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;success&#39;</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="_2-重定向" tabindex="-1"><a class="header-anchor" href="#_2-重定向" aria-hidden="true">#</a> 2.重定向</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> mime <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mime&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    <span class="token comment">// 如果 浏览器请求的 是页面 9，就发送 302 给 浏览器，告诉他 跳转到 2.html</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;9.html&#39;</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        \n    <span class="token comment">// 向 响应报文 头 中 添加 location ，告诉浏览器 要跳转的目标</span>\n        response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;location&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;2.html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        \n    <span class="token comment">// 向响应报文头中 设置 状态码为 302</span>\n        response<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">302</span><span class="token punctuation">,</span><span class="token string">&#39;move&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        \n    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;10.html&#39;</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">let</span> mimeval <span class="token operator">=</span> mime<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//根据获取的url尾部,获取Content-type</span>\n        response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-type&#39;</span><span class="token punctuation">,</span>mimeval<span class="token operator">+</span><span class="token string">&quot;;charset=utf-8&quot;</span><span class="token punctuation">)</span>\n        response<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;script&gt;alert(&quot;要跳转了&quot;); window.location = &quot;2.html&quot;;&lt;/script&gt;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n       \n    <span class="token punctuation">}</span>\n    response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\nserver<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3747</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;启动成功&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;启动失败&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="_3-获取get数据" tabindex="-1"><a class="header-anchor" href="#_3-获取get数据" aria-hidden="true">#</a> 3.获取get数据</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>\n\n<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>\n  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>\n  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&#39;UTF-8&#39;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>\n\n<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>\n  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 表单 Get 方式提交数据  <span class="token operator">--</span><span class="token operator">&gt;</span>\n  <span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">&quot;http://192.168.14.134:3747/2.html&quot;</span> method<span class="token operator">=</span><span class="token string">&quot;GET&quot;</span><span class="token operator">&gt;</span>\n    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;txtName&quot;</span><span class="token operator">&gt;</span>\n    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;txtPwd&quot;</span><span class="token operator">&gt;</span>\n    <span class="token operator">&lt;</span>br<span class="token operator">&gt;</span>\n    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;提交&quot;</span><span class="token operator">&gt;</span>\n  <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>\n\n<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>\n\n<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> serverobj <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    <span class="token comment">//a. 获取 浏览器 用 get 方式 传来的 数据</span>\n    <span class="token keyword">let</span> urlstr <span class="token operator">=</span> request<span class="token punctuation">.</span>url<span class="token punctuation">;</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>urlstr<span class="token punctuation">)</span>\n     <span class="token comment">//b. 使用 url.parse 方法，将 请求的 路径中的 get 参数 转成 对象，存入 url对象.query属性中</span>\n    <span class="token keyword">let</span> urlobj <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>urlstr<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>urlobj<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\nserverobj<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3747</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;success&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        \n    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39; failures&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="_4-path模块生成路径" tabindex="-1"><a class="header-anchor" href="#_4-path模块生成路径" aria-hidden="true">#</a> 4.path模块生成路径</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">//文件夹路径+文件路径 拼接</span>\n<span class="token keyword">let</span> filePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&#39;文件路径&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nfs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span>err <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>\n        cosole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>messge<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_5-数据库操作封装" tabindex="-1"><a class="header-anchor" href="#_5-数据库操作封装" aria-hidden="true">#</a> 5.数据库操作封装</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mysql&#39;</span><span class="token punctuation">)</span>\n<span class="token keyword">const</span> connInfo<span class="token operator">=</span><span class="token punctuation">{</span>\n    host<span class="token operator">:</span><span class="token string">&#39;127.0.0.1&#39;</span><span class="token punctuation">,</span>\n    database<span class="token operator">:</span><span class="token string">&#39;新数据库2&#39;</span><span class="token punctuation">,</span>\n    user<span class="token operator">:</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span>\n    password<span class="token operator">:</span><span class="token string">&#39;root&#39;</span>\n<span class="token punctuation">}</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n    <span class="token function-variable function">getHero</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">let</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>connInfo<span class="token punctuation">)</span>\n        connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">&#39;select * from hero&#39;</span><span class="token punctuation">,</span>fn<span class="token punctuation">)</span>\n        connection<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function-variable function">addHero</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>name<span class="token punctuation">,</span>skill<span class="token punctuation">,</span>icon<span class="token punctuation">}</span><span class="token punctuation">,</span>fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">let</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>connInfo<span class="token punctuation">)</span>\n        connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into hero(name,skill,icon) value(&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;,&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>skill<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;,&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>icon<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>fn<span class="token punctuation">)</span>\n        connection<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function-variable function">deleteHero</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span>fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">let</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>connInfo<span class="token punctuation">)</span>\n        connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">delete from hero where id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>fn<span class="token punctuation">)</span>\n        connection<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function-variable function">updateHero</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>name<span class="token punctuation">,</span>skill<span class="token punctuation">,</span>icon<span class="token punctuation">,</span>id<span class="token punctuation">}</span><span class="token punctuation">,</span>fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">let</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>connInfo<span class="token punctuation">)</span>\n        connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">update hero set name = &#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39; ,skill = &#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>skill<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;,icon = &#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>icon<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39; where id = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>fn<span class="token punctuation">)</span>\n        connection<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h1 id="es6" tabindex="-1"><a class="header-anchor" href="#es6" aria-hidden="true">#</a> ES6</h1><h2 id="let-与-const" tabindex="-1"><a class="header-anchor" href="#let-与-const" aria-hidden="true">#</a> let 与 const</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span>\n\t无法变量提升\n\t无法重复声明\n\t可以重新赋值\n\t有块级作用域\n\t\n<span class="token keyword">const</span>\n\t<span class="token number">1.</span>无法变量提升\n \\<span class="token operator">*</span> <span class="token number">2.</span>无法重复声明\n \\<span class="token operator">*</span> <span class="token number">3.</span>无法重新赋值\n \\<span class="token operator">*</span> <span class="token number">4.</span>有块级作用域\n \\<span class="token operator">*</span> <span class="token number">5.</span>必须声明时就要赋值\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="解构" tabindex="-1"><a class="header-anchor" href="#解构" aria-hidden="true">#</a> 解构</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token constant">ES6</span> 允许按照一定模式，从数组和对象中提取值，对变量进行赋值，这被称为解构（Destructuring）。\n这种写法属于“模式匹配”\n<span class="token keyword">let</span> <span class="token punctuation">[</span>foo<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>bar<span class="token punctuation">]</span><span class="token punctuation">,</span> baz<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\nfoo <span class="token comment">// 1</span>\nbar <span class="token comment">// 2</span>\nbaz <span class="token comment">// 3</span>\n\n<span class="token number">1.</span>解构不成功返回 <span class="token keyword">undefined</span>\n<span class="token number">2.</span>不完全解构\n\t<span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\t\tx <span class="token comment">// 1</span>\n\t\ty <span class="token comment">// 2</span>\n\t<span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> <span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\t\ta <span class="token comment">// 1</span>\n\t\tb <span class="token comment">// 2</span>\n\t\td <span class="token comment">// 4</span>\n<span class="token number">3.</span>如果等号的右边不是数组<span class="token operator">/</span><span class="token function">对象</span><span class="token punctuation">(</span>不可遍历的结构 <span class="token operator">/</span>Iterator 接口<span class="token punctuation">)</span><span class="token punctuation">,</span>会报错<span class="token punctuation">;</span>\n\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="对象解构赋值" tabindex="-1"><a class="header-anchor" href="#对象解构赋值" aria-hidden="true">#</a> 对象解构赋值</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>而对象的属性没有次序，变量必须与属性同名，\n<span class="token keyword">let</span> <span class="token punctuation">{</span> bar<span class="token punctuation">,</span> foo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">&#39;aaa&#39;</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token string">&#39;bbb&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\nfoo <span class="token comment">// &quot;aaa&quot;</span>\nbar <span class="token comment">// &quot;bbb&quot;</span>\n\n<span class="token comment">// 例一</span>\n<span class="token keyword">let</span> <span class="token punctuation">{</span> log<span class="token punctuation">,</span> sin<span class="token punctuation">,</span> cos <span class="token punctuation">}</span> <span class="token operator">=</span> Math<span class="token punctuation">;</span>\n上面代码的例一将Math对象的对数、正弦、余弦三个方法，赋值到对应的变量上\n<span class="token comment">// 例二</span>\n<span class="token keyword">const</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token operator">=</span> console<span class="token punctuation">;</span>\n<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span> <span class="token comment">// hello</span>\n例二将console<span class="token punctuation">.</span>log赋值到log变量\n\n<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> obj<span class="token punctuation">.</span>prop<span class="token punctuation">,</span> bar<span class="token operator">:</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nobj <span class="token comment">// {prop:123}</span>\narr <span class="token comment">// [true]</span>\n\n<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>默认赋值<span class="token operator">--</span><span class="token operator">-</span>做边有值则不覆盖<span class="token punctuation">,</span>无则赋值\n<span class="token keyword">var</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\nx <span class="token comment">// 3</span>\n\n<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\nx <span class="token comment">// 1</span>\ny <span class="token comment">// 5</span>\n\n<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\ny <span class="token comment">// 3</span>\n\n<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\ny <span class="token comment">// 5</span>\n\n<span class="token keyword">var</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\nx <span class="token comment">// 3</span>\n\n<span class="token keyword">var</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\nx <span class="token comment">// null</span>\n\n注意点<span class="token operator">:</span>\n<span class="token comment">// 正确的写法  //声明语句不能用()</span>\n<span class="token keyword">let</span> x<span class="token punctuation">;</span>\n<span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 错误的写法</span>\n<span class="token keyword">let</span> x<span class="token punctuation">;</span>\n<span class="token punctuation">{</span>x<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token comment">// SyntaxError: syntax error</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h3 id="字符串解构" tabindex="-1"><a class="header-anchor" href="#字符串解构" aria-hidden="true">#</a> 字符串解构</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>字符串被转换成了一个类似数组的对象。\n<span class="token keyword">const</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">;</span>\na <span class="token comment">// &quot;h&quot;</span>\nb <span class="token comment">// &quot;e&quot;</span>\nc <span class="token comment">// &quot;l&quot;</span>\nd <span class="token comment">// &quot;l&quot;</span>\ne <span class="token comment">// &quot;o&quot;</span>\n\n类似数组的对象都有一个length属性，因此还可以对这个属性解构赋值。\n<span class="token keyword">let</span> <span class="token punctuation">{</span>length <span class="token operator">:</span> len<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">;</span>\nlen <span class="token comment">// 5</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="函数参数解构赋值" tabindex="-1"><a class="header-anchor" href="#函数参数解构赋值" aria-hidden="true">#</a> 函数参数解构赋值</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 8]</span>\n<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 0]</span>\n<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 0]</span>\n<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 0]</span>\n\n<span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 8]</span>\n<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, undefined]</span>\n<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [undefined, undefined]</span>\n<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 0]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="解构用途" tabindex="-1"><a class="header-anchor" href="#解构用途" aria-hidden="true">#</a> 解构用途</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>es6<span class="token punctuation">.</span>ruanyifeng<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token operator">?</span>search<span class="token operator">=</span><span class="token operator">%</span><span class="token constant">E3</span><span class="token operator">%</span><span class="token number">80</span><span class="token operator">%</span><span class="token number">8</span>AGenerator<span class="token operator">+</span><span class="token operator">%</span><span class="token constant">E5</span><span class="token operator">%</span><span class="token number">87</span><span class="token operator">%</span><span class="token constant">BD</span><span class="token operator">%</span><span class="token constant">E6</span><span class="token operator">%</span><span class="token number">95</span><span class="token operator">%</span><span class="token constant">B0</span><span class="token operator">%</span><span class="token constant">E3</span><span class="token operator">%</span><span class="token number">80</span><span class="token operator">%</span><span class="token number">8</span>B<span class="token operator">&amp;</span>x<span class="token operator">=</span><span class="token number">6</span><span class="token operator">&amp;</span>y<span class="token operator">=</span><span class="token number">3</span>#docs<span class="token operator">/</span>destructuring\n\n<span class="token number">1.</span>变量交换值<span class="token operator">:</span>\n\t<span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>y<span class="token punctuation">,</span> x<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token number">2.</span><span class="token function-variable function">函数返回多个值</span><span class="token operator">:</span>\n\t<span class="token keyword">function</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  \t\t<span class="token keyword">return</span> <span class="token punctuation">{</span>\n    \t\tfoo<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n    \t\tbar<span class="token operator">:</span> <span class="token number">2</span>\n  \t\t<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\t<span class="token punctuation">}</span>\n\t<span class="token keyword">let</span> <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token number">3.</span><span class="token function-variable function">函数参数的定义</span><span class="token operator">:</span>\n\t<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>\n\t<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">{</span>z<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token number">4.</span>提取<span class="token constant">JSON</span>数据<span class="token operator">:</span>\n\t<span class="token keyword">let</span> jsonData <span class="token operator">=</span> <span class="token punctuation">{</span>\n    \tid<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>\n    \tstatus<span class="token operator">:</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">,</span>\n    \tdata<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">867</span><span class="token punctuation">,</span> <span class="token number">5309</span><span class="token punctuation">]</span>\n  \t<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\t<span class="token keyword">let</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> status<span class="token punctuation">,</span> data<span class="token operator">:</span> number <span class="token punctuation">}</span> <span class="token operator">=</span> jsonData<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="箭头函数" tabindex="-1"><a class="header-anchor" href="#箭头函数" aria-hidden="true">#</a> 箭头函数</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">;</span>\n\n<span class="token comment">// 等同于</span>\n<span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> v<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n\n<span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>\n<span class="token comment">// 等同于</span>\n<span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span> <span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="展开运算符" tabindex="-1"><a class="header-anchor" href="#展开运算符" aria-hidden="true">#</a> 展开运算符</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> chinaPerson <span class="token operator">=</span> <span class="token punctuation">{</span>\n  skin<span class="token operator">:</span> <span class="token string">&#39;yellow&#39;</span><span class="token punctuation">,</span>\n  hair<span class="token operator">:</span> <span class="token string">&#39;black&#39;</span><span class="token punctuation">,</span>\n  sayHi<span class="token operator">:</span> <span class="token string">&#39;吃了没&#39;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">let</span> zhubo <span class="token operator">=</span> <span class="token punctuation">{</span>\n  skill<span class="token operator">:</span> <span class="token string">&#39;唱，跳，rap&#39;</span><span class="token punctuation">,</span>\n  habbit<span class="token operator">:</span> <span class="token string">&#39;打篮球&#39;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">let</span> newObj <span class="token operator">=</span><span class="token punctuation">{</span>\n  <span class="token operator">...</span>chinaPerson<span class="token punctuation">,</span> <span class="token comment">// 将 chinaPerson 的成员 都添加到此</span>\n  <span class="token operator">...</span>zhubo <span class="token comment">// 将 zhubo 的成员 都添加到此</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="模板字符串" tabindex="-1"><a class="header-anchor" href="#模板字符串" aria-hidden="true">#</a> 模板字符串</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>可以挖坑 $<span class="token punctuation">{</span>表达式<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h1 id="es6-简要" tabindex="-1"><a class="header-anchor" href="#es6-简要" aria-hidden="true">#</a> ES6 简要</h1><h2 id="_01-es6简介" tabindex="-1"><a class="header-anchor" href="#_01-es6简介" aria-hidden="true">#</a> 01. ES6简介</h2><h3 id="_1-1-什么是es6" tabindex="-1"><a class="header-anchor" href="#_1-1-什么是es6" aria-hidden="true">#</a> 1.1 什么是ES6</h3><p>​ ES6其实就是在ES5的基础之上新增了一些语法和提供多了一些api, 使用ES6新增的语法和api, 我们可以快速实现一些功能，而不必使用ES5中写很多代码的方式来实现。比如我要判断1个字符串是否以指定的字符串开始，在ES6中，直接为字符串对象新增了1个方法<code>startsWtih</code>就可以轻松的实现这个功能。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;heima good&quot;</span><span class="token punctuation">;</span> \n<span class="token keyword">var</span> res <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;hei&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//判断字符串str是否以hei开头</span>\n<span class="token comment">//res就是1个bool值，代表str是否以&quot;hei&quot;开头</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>​ ES6就是这么高效，为JavaScripter提供了快速高效的编码方式.</p><h3 id="_1-2-es6的兼容性" tabindex="-1"><a class="header-anchor" href="#_1-2-es6的兼容性" aria-hidden="true">#</a> 1.2 ES6的兼容性</h3><p>​ ES6标准于2015年6月正式发布, 经过四年的发展，PC桌面端的主流浏览器最新版本都对ES6实现了最大化的兼容，移动端浏览器基本上实现了对ES6的兼容，NodeJS对ES6绝大部分语法进行了实现。</p>',112),e=(0,p.Uk)("​ ES6兼容情况一览表： "),o={href:"http://kangax.github.io/compat-table/es6/",target:"_blank",rel:"noopener noreferrer"},c=(0,p.Uk)("传送门"),l=(0,p.uE)('<p>​ 对于少部分语法不兼容的情况(主要是PC桌面端浏览器), 我们可以使用编译器(如Babel)将我们写的ES6代码转换为ES5的代码，以便让低版本的浏览器可以兼容。具体如何使用Babel，我们将在后续的章节为大家介绍。</p><h2 id="_02-let与const" tabindex="-1"><a class="header-anchor" href="#_02-let与const" aria-hidden="true">#</a> 02. let与const</h2><h3 id="_2-1-他们是什么" tabindex="-1"><a class="header-anchor" href="#_2-1-他们是什么" aria-hidden="true">#</a> 2.1 他们是什么？</h3><p>​ <code>let</code>与<code>const</code>是ES6新增的两个关键字，他们的作用和<code>var</code>的作用一样，是用来声明变量的</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token string">&quot;i love heima&quot;</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-2-let与const的区别" tabindex="-1"><a class="header-anchor" href="#_2-2-let与const的区别" aria-hidden="true">#</a> 2.2 let与const的区别</h3><p>​ 使用<code>let</code>声明的变量，后续可以重新为其赋值；使用<code>const</code>声明的变量，要求在声明的同时就进行初始化，但是后续无法再为这个变量进行重新赋值。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>\na <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> b<span class="token punctuation">;</span>\nb <span class="token operator">=</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>\nc <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">//错误，c是const声明的，变量不能再重新赋值</span>\n<span class="token keyword">const</span> d<span class="token punctuation">;</span> <span class="token comment">//错误，使用const声明的变量，必须在声明的同时就初始化.</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>特别注意</strong>，<code>const</code>变量指向1个对象的时候，这个变量的值不能变，但是这个变量指向的对象可以修改.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>\n    name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>\n    age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>\n    gender<span class="token operator">:</span> <span class="token string">&quot;male&quot;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\nperson<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;rose&quot;</span><span class="token punctuation">;</span> <span class="token comment">//可以，并没有修改person变量的值，修改的是person指向的对象的属性的值.</span>\nperson <span class="token operator">=</span> <span class="token punctuation">{</span>\n    name<span class="token operator">:</span> <span class="token string">&quot;rose&quot;</span><span class="token punctuation">,</span>\n    age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>\n    gender<span class="token operator">:</span> <span class="token string">&quot;female&quot;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//错误，person变量是被const修饰的，不能再为其赋值.</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_2-3-与var的区别" tabindex="-1"><a class="header-anchor" href="#_2-3-与var的区别" aria-hidden="true">#</a> 2.3 与var的区别</h3><p>使用<code>let</code>和<code>const</code>声明的变量不存在变量提升，有自己的作用域 - 其所在的大括弧中。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//报错，提示变量c未定义</span>\n    <span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>\n    <span class="token comment">//变量b、c只能在声明b、c变量中的大括弧中访问。 </span>\n    <span class="token comment">//并且也不存在变量提升</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//可以访问</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//可以访问</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//可以访问</span>\n<span class="token punctuation">}</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//可以访问</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//不可以访问</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//不可以访问`</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_2-4-使用建议" tabindex="-1"><a class="header-anchor" href="#_2-4-使用建议" aria-hidden="true">#</a> 2.4 使用建议</h3><ul><li>能使用const就不要使用let</li><li>能使用let就不要使用var</li></ul><p>​ 其实大多数情况下，我们声明的变量后续都不会再重新赋值，所以这种情况，建议使用<code>const</code>；如果变量的值后续需要更改，可以使用<code>let</code>； <code>var</code>关键字请彻底废弃。</p><h2 id="_03-箭头函数" tabindex="-1"><a class="header-anchor" href="#_03-箭头函数" aria-hidden="true">#</a> 03. 箭头函数</h2><p>​ 箭头函数是我们之前学习的函数的一种简写方式。</p><h3 id="_3-1-箭头函数的书写规则" tabindex="-1"><a class="header-anchor" href="#_3-1-箭头函数的书写规则" aria-hidden="true">#</a> 3.1 箭头函数的书写规则</h3><p>​ 将普通函数的<code>function</code>关键字删掉， 在小括弧与大括弧中间加上1个箭头<code>=&gt;</code>，用法与普通函数一样。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token keyword">const</span> result <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>\n    <span class="token keyword">return</span> result<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> result <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>\n    <span class="token keyword">return</span> result<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>箭头函数的作用： 让我们声明函数的时候，使用更少的代码，看起来更简洁。</p><h3 id="_3-2-更简洁的写法" tabindex="-1"><a class="header-anchor" href="#_3-2-更简洁的写法" aria-hidden="true">#</a> 3.2 更简洁的写法</h3><ul><li>a. 如果参数只有1个，那么包围参数的小括弧可以省略</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isEven</span> <span class="token operator">=</span> <span class="token parameter">num</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token boolean">false</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>b. 如果函数体只有一句代码，那么包围函数体的大括弧可以省略,并且这句代码的结果会自动作为返回值返回</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isEven</span> <span class="token operator">=</span> <span class="token parameter">num</span> <span class="token operator">=&gt;</span> num <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">isEven</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-3-箭头函数的使用场景" tabindex="-1"><a class="header-anchor" href="#_3-3-箭头函数的使用场景" aria-hidden="true">#</a> 3.3 箭头函数的使用场景</h3><ul><li>箭头函数本身是1个匿名函数，所以如果你要二次使用，必须得有个变量保存起来.</li><li>箭头函数在回调函数中被经常使用到，代码会显得更简洁。</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-4-箭头函数使用注意" tabindex="-1"><a class="header-anchor" href="#_3-4-箭头函数使用注意" aria-hidden="true">#</a> 3.4 箭头函数使用注意</h3><ul><li>函数体内的<code>this</code>对象，就是定义时所在的对象，而不是使用时所在的对象。</li><li>不可以使用<code>arguments</code>对象，该对象在函数体内不存在。如果要用，可以用 rest 参数代替。</li></ul><h2 id="_04-字符串" tabindex="-1"><a class="header-anchor" href="#_04-字符串" aria-hidden="true">#</a> 04. 字符串</h2><h3 id="_4-1-模板字符串" tabindex="-1"><a class="header-anchor" href="#_4-1-模板字符串" aria-hidden="true">#</a> 4.1 模板字符串</h3><p>​ 声明字符串我们可以使用单引号和双引号来表示，在ES6中新增了一种声明方式，使用1对撇号来表示。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">大家好，\n我是小明\n\\n哈哈，你好啊\n这是1个模板字符串哦\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>模板字符串，支持换行，等操作，撇号中的内容会被原样识别。</li><li>模板字符串还支持变量替换</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> name1 <span class="token operator">=</span> <span class="token string">&quot;杜子腾&quot;</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> name2 <span class="token operator">=</span> <span class="token string">&quot;秦寿生&quot;</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">孔子东游，见两小儿辩斗，问其故。\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name1<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">曰：“我以日始出时去人近，而日中时远也。”\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name2<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">以日初出远，而日中时近也。\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name1<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">曰：“日初出大如车盖，及日中则如盘盂，此不为远者小而近者大乎？”\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name2<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">曰：“日初出沧沧凉凉，及其日中如探汤，此不为近者热而远者凉乎？”\n孔子不能决也。\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name1<span class="token operator">+</span><span class="token string">&quot;和&quot;</span><span class="token operator">+</span>name2<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">笑曰：“孰为汝多知乎？”\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_4-2-字符串新增方法" tabindex="-1"><a class="header-anchor" href="#_4-2-字符串新增方法" aria-hidden="true">#</a> 4.2 字符串新增方法</h3><ul><li><code>includes()</code>方法 是否包含子串</li><li><code>startsWith()</code>方法 以指定的串开始</li><li><code>endsWith()</code>方法 以指定的串结尾</li><li><code>repeat()</code>方法 将字符串重复</li><li><code>padStart()</code>方法 头部补全</li><li><code>padEnd()</code>方法 尾部补全</li></ul><h2 id="_05-数值number" tabindex="-1"><a class="header-anchor" href="#_05-数值number" aria-hidden="true">#</a> 05. 数值Number</h2><blockquote><p>ES6为Number新增了一些方法，方便我们更加方便操作Number数据.</p></blockquote><ul><li><code>Number.isFinite()</code> 用来检查一个数值是否为有限的（finite），即不是<code>Infinity</code></li><li><code>Number.isNaN()</code> 用来检查一个值是否为<code>NaN</code></li><li>es6将全局方法<code>parseInt()</code>和<code>parseFloat()</code>，移植到<code>Number</code>对象上面，行为完全保持不变</li><li><code>Number.isInteger()</code> 用来判断一个数值是否为整数。</li></ul><h2 id="_06-math类" tabindex="-1"><a class="header-anchor" href="#_06-math类" aria-hidden="true">#</a> 06. Math类</h2>',44),u=(0,p.Uk)("ES6对Math对象新增了很多数学方法. "),r={href:"http://es6.ruanyifeng.com/#docs/number#Math-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%A9%E5%B1%95",target:"_blank",rel:"noopener noreferrer"},i=(0,p.Uk)("传送门"),k=(0,p.uE)('<p>并且新增了1个算术运算符 - 指数运算符 （ ** ）</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">**</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token comment">//2的3次方.</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_07-函数" tabindex="-1"><a class="header-anchor" href="#_07-函数" aria-hidden="true">#</a> 07. 函数</h2><h3 id="_7-1-参数默认值" tabindex="-1"><a class="header-anchor" href="#_7-1-参数默认值" aria-hidden="true">#</a> 7.1 参数默认值</h3><p>​ 在声明函数的时候，允许对函数的参数赋一个默认值， 当调用函数时，如果不为指定默认值的参数传值，那么在函数执行的时候，参数的值就是默认值</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">20</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> res <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//在调用函数的时候，只为第1个参数传值，而没有为第2个参数传值。那么第2个参数的值就是其默认值20</span>\n<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果两个参数都传了值，那么参数的值就是传入的值。</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>​ 需要注意的是， 如果函数的参数带了默认值，那么带了默认值的参数必须写在参数列表的最后</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//报错，带默认值的参数必须放在参数列表的最后.</span>\n    \n<span class="token punctuation">}</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>​ 这样，别人在调用我们写的函数的时候，一眼就能看出哪些参数是必传参数，哪些参数是可选参数。</p><h3 id="_7-2-参数是1个对象的时候" tabindex="-1"><a class="header-anchor" href="#_7-2-参数是1个对象的时候" aria-hidden="true">#</a> 7.2 参数是1个对象的时候</h3><p>​ 当1个函数的参数是1个对象的时候，按照我们之前的写法，调用者很难知道这个对象的属性有哪些。比如，jQuery的ajax方法，这个方法我们都知道要传入1个对象，但是这个对象要准备哪些属性呢？ 除了看文档，真的没有别的方法。在ES6中，为我们提供了一种写法，让调用者看到我们函数的形参就知道要传入哪些属性，代码演示如下</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//参数直接使用1个大括弧围起来，把属性写在其中. 这就表示参数是1个对象，这个对象中有这么些属性</span>\n<span class="token keyword">const</span> <span class="token function-variable function">ajax</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>url<span class="token punctuation">,</span> method<span class="token punctuation">,</span> data<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span> \n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> method<span class="token punctuation">,</span> data<span class="token punctuation">)</span>      \n<span class="token punctuation">}</span>\n\n<span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    url<span class="token operator">:</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span>\n    method<span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>\n    data<span class="token operator">:</span> <span class="token punctuation">{</span>\n        name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>\n        age<span class="token operator">:</span> <span class="token number">18</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_7-3-rest参数-可变参数" tabindex="-1"><a class="header-anchor" href="#_7-3-rest参数-可变参数" aria-hidden="true">#</a> 7.3 rest参数(可变参数)</h3><p>​ 当我们需要某1个函数可以接收任意多个参数的时候，我们之前的做法要么是使用arguments，要么是使用1个数组，在ES6中，借鉴了其它语言中非常流行的一种做法，那就是rest参数.</p><p>​ 当形参前面加上<code>...</code> 三个点， 就表示这是1个rest参数，这是1个数组，它可以接收多余的实参到这个数组中。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//args就是1个rest参数，它是1个数组，用来存储传入的额外参数.</span>\n    <span class="token keyword">let</span> sum <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>\n    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token keyword">in</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        sum <span class="token operator">+=</span> args<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//1和2分别传给了参数a和b, 后面的所有参数都传给了args数组.</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>​ <strong>需要注意的是，rest参数只能放在参数列表的最后，并且1个函数最多只能有1个rest参数</strong></p><h3 id="_7-4-函数参数的尾逗号" tabindex="-1"><a class="header-anchor" href="#_7-4-函数参数的尾逗号" aria-hidden="true">#</a> 7.4 函数参数的尾逗号</h3><p>​ 在ES6中，允许在参数列表的最后也加上1个逗号，用来让我们的代码变的可读性更高。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_08-数组" tabindex="-1"><a class="header-anchor" href="#_08-数组" aria-hidden="true">#</a> 08. 数组</h2><h3 id="_8-1-扩展运算符" tabindex="-1"><a class="header-anchor" href="#_8-1-扩展运算符" aria-hidden="true">#</a> 8.1 扩展运算符</h3><p>​ 其实叫做<code>展开运算符</code>更容易理解一些，它可以将1个数组中的元素展开, 一般用在函数的传参中。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//将数组arr展开成单独的10,20,30，传给add函数</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_8-2-常用扩展方法" tabindex="-1"><a class="header-anchor" href="#_8-2-常用扩展方法" aria-hidden="true">#</a> 8.2 常用扩展方法</h3>',25),b=(0,p._)("li",null,[(0,p._)("p",null,[(0,p._)("code",null,"includes()"),(0,p.Uk)("， 判断数组中是否包含指定的元素")])],-1),m=(0,p._)("p",null,[(0,p._)("code",null,"flat()"),(0,p.Uk)(", 当数组中包含1个数组时，可以将里面的数组拉平，变成1个一维数组。参数代表拉平的层数。"),(0,p._)("code",null,"Infinity")],-1),d=(0,p.Uk)("其它方法扩展。 "),g={href:"http://es6.ruanyifeng.com/#docs/array",target:"_blank",rel:"noopener noreferrer"},h=(0,p.Uk)("传送门"),f=(0,p.uE)('<h2 id="_09-对象" tabindex="-1"><a class="header-anchor" href="#_09-对象" aria-hidden="true">#</a> 09. 对象</h2><h3 id="_9-1-属性简洁表示法" tabindex="-1"><a class="header-anchor" href="#_9-1-属性简洁表示法" aria-hidden="true">#</a> 9.1 属性简洁表示法</h3><p>​ 声明对象的时候，如果属性名和属性值都是一样的变量，可以使用简写的形式，代码演示如下。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token constant">ES5</span>写法<span class="token operator">:</span>\n<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> gender <span class="token operator">=</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">;</span>\n\n<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>\n    name<span class="token operator">:</span> name<span class="token punctuation">,</span>\n    age<span class="token operator">:</span> age<span class="token punctuation">,</span>\n    gender<span class="token operator">:</span> gender<span class="token punctuation">,</span>\n    <span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;你好，hi...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token constant">ES6</span>简写形式\n<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> gender <span class="token operator">=</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>\n    name<span class="token punctuation">,</span>\n    age<span class="token punctuation">,</span>\n    gender<span class="token punctuation">,</span> <span class="token comment">//如果属性名，和属性的值使用的是同1个变量，可以这样简写</span>\n    <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;你好，hi...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token comment">//对象方法也可以简写.</span>\n<span class="token punctuation">}</span>\n\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="_9-2-属性名表达式" tabindex="-1"><a class="header-anchor" href="#_9-2-属性名表达式" aria-hidden="true">#</a> 9.2 属性名表达式</h3><p>在ES5中，要为对象新增1个属性，可以使用这样的代码</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span>\n    name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>\n    age<span class="token operator">:</span> <span class="token number">18</span>\n<span class="token punctuation">}</span>\np1<span class="token punctuation">.</span>gender <span class="token operator">=</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">;</span>\np1<span class="token punctuation">[</span><span class="token string">&quot;weight&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">140</span><span class="token punctuation">;</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>在ES6中，为对象新增属性，属性可以使用表达式，像下面这样</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span>\n    name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>\n    age<span class="token operator">:</span> <span class="token number">18</span>\n<span class="token punctuation">}</span>\np1<span class="token punctuation">[</span><span class="token string">&quot;gen&quot;</span><span class="token operator">+</span><span class="token string">&quot;der&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">;</span>\np1<span class="token punctuation">[</span><span class="token string">&quot;wei&quot;</span><span class="token operator">+</span><span class="token string">&quot;ght&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">140</span><span class="token punctuation">;</span>\np1<span class="token punctuation">[</span><span class="token string">&quot;say&quot;</span><span class="token operator">+</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hi....&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>最终对象是这样的，属性名可以使用拼接。</p><h3 id="_9-3-属性的可枚举" tabindex="-1"><a class="header-anchor" href="#_9-3-属性的可枚举" aria-hidden="true">#</a> 9.3 属性的可枚举</h3><h4 id="引入" tabindex="-1"><a class="header-anchor" href="#引入" aria-hidden="true">#</a> 引入</h4><p>​ <code>for in</code>可以遍历对象的属性包括方法</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span>\n    name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>\n    age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>\n    <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hi...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> p1<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>结果如下</p><p>但是，你有没有想过一个问题，p1对象中只有这些成员吗？还有从父类继承过来的<code>toString</code>方法没有被遍历出来，是继承的属性不能被遍历吗？ 用代码证实一下</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Animal</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token operator">||</span> <span class="token string">&#39;Animal&#39;</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sleep</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&#39;正在睡觉！&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">food</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&#39;正在吃：&#39;</span> <span class="token operator">+</span> food<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&quot;哺乳动物&quot;</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n\n<span class="token punctuation">}</span>\n<span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;cat&quot;</span>\n\n<span class="token keyword">var</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> c1<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c1<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token comment">//证实父类的属性可以被遍历.</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>证实父类的属性可以被遍历</p><p>那究竟什么样的属性才可以被遍历呢？</p><h4 id="属性描述对象" tabindex="-1"><a class="header-anchor" href="#属性描述对象" aria-hidden="true">#</a> 属性描述对象</h4><blockquote><p>对象的每一个属性，其实都有1个描述对象，这个描述对象来保存这个属性的描述信息(是否能被遍历，是否可读，默认值...)。 使用 *Object.getOwnPropertyDescriptor()*方法可以获取对象的属性的描述方法.</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span>\n    name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>\n    age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>\n    <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hi...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">const</span> desc <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取p1对象的name属性的描述对象</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>属性描述对象描述这个属性的信息如下。</p><p>​ 只有当属性的描述对象的<code>enumerable</code>值为<code>true</code>的时候，这个属性才会被允许遍历。</p><p>​ 那属性的描述对象的<code>enumerable</code>值什么时候才有可能为<code>false</code>呢?</p><p>​ 当我们使用<code>Object.getOwnPropertyDescriptor()</code> 为对象定义属性的时候，可以指定描述对象的<code>enumerable</code>的值</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span>\n    name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>\n    age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>\n    <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hi...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token comment">//参数1  要设定属性的对象</span>\n<span class="token comment">//参数2  要设定的属性的名</span>\n<span class="token comment">//参数3  描述对象</span>\nObject<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> <span class="token string">&quot;gender&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n    enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    value<span class="token operator">:</span> <span class="token string">&quot;男&quot;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>​ 此时，新增的属性就不能被<code>for in</code>遍历了.</p><h4 id="属性遍历" tabindex="-1"><a class="header-anchor" href="#属性遍历" aria-hidden="true">#</a> 属性遍历</h4><h5 id="for-in-遍历对象" tabindex="-1"><a class="header-anchor" href="#for-in-遍历对象" aria-hidden="true">#</a> <code>for in</code> 遍历对象</h5><p>​ 循环遍历对象自身的和继承的可枚举属性</p><h5 id="object-keys-obj" tabindex="-1"><a class="header-anchor" href="#object-keys-obj" aria-hidden="true">#</a> <code>Object.keys(obj)</code></h5><p>​ 返回一个数组，包括对象自身的（不含继承的）所有可枚举属性的键名。</p><h5 id="object-getownpropertynames-obj" tabindex="-1"><a class="header-anchor" href="#object-getownpropertynames-obj" aria-hidden="true">#</a> <code>Object.getOwnPropertyNames(obj)</code></h5><p>​ 返回一个数组，包含对象自身的所有属性（包括不可枚举属性）的键名。</p><h2 id="_10-set" tabindex="-1"><a class="header-anchor" href="#_10-set" aria-hidden="true">#</a> 10. set</h2><blockquote><p>Set是1个类似于数组的数据结构，与数组不同的是，Set中的数据不允许重复，当向Set中添加1个已经存在的数据时，不会成功。</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nset<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nset<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nset<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nset<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//不会添加成功，但是不会报错</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>常用方法</p><ul><li><code>size</code>属性返回set中数据的个数</li><li><code>add()</code></li><li><code>delete()</code></li><li><code>has()</code></li><li><code>clear()</code></li></ul><p>遍历操作</p><ul><li><code>keys()</code></li><li><code>values()</code></li><li><code>entries()</code></li><li><code>forEach()</code></li></ul><h3 id="weakset" tabindex="-1"><a class="header-anchor" href="#weakset" aria-hidden="true">#</a> WeakSet</h3><blockquote><p>WeakSet和Set一样，都是存储不可重复的数据，与Set的区别有两点</p><ol><li>WeakSet中只能存储对象.</li><li>WeakSet中存储的对象都是弱引用，当外部没有变量指向对象的时候，即使被WeakSet所引用，对象也会被回收。</li></ol></blockquote><h2 id="_11-map" tabindex="-1"><a class="header-anchor" href="#_11-map" aria-hidden="true">#</a> 11. Map</h2><blockquote><p>键值对存储数据，和js中的对象类似，不同的是，js对象中的键只能是字符串，而map中的键可以是任意类型.</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span> <span class="token punctuation">}</span>\n<span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;rose&quot;</span> <span class="token punctuation">}</span>\nmap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//以p1为键，将p2存储到Map对象中.</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="常用方法" tabindex="-1"><a class="header-anchor" href="#常用方法" aria-hidden="true">#</a> 常用方法</h3><ul><li><code>size</code>属性 获取Map中键值对的个数</li><li><code>set(key, value)</code> 添加键值对， <code>key</code>和<code>value</code>可以是任意的类型. 该方法返回当前Map对象.</li><li><code>get()</code>根据键获取键对应的值、</li><li><code>has(key)</code></li><li><code>delete(key)</code></li><li><code>clear()</code></li><li><code>keys()</code></li><li><code>values()</code></li><li><code>entries()</code></li><li><code>foreach()</code></li></ul><h3 id="weakmap" tabindex="-1"><a class="header-anchor" href="#weakmap" aria-hidden="true">#</a> WeakMap</h3><blockquote><p>与Map类似，WeakMap也是用来存储键值对的集合，与Map的区别有两点</p><ol><li>WeakMap只接受对象作为键名(null除外)</li><li>其次，<code>WeakMap</code>的键名所指向的对象，不计入垃圾回收机制。</li></ol></blockquote><h2 id="_12-迭代器" tabindex="-1"><a class="header-anchor" href="#_12-迭代器" aria-hidden="true">#</a> 12. 迭代器</h2><p>在ES6中新增了一种遍历方式叫做<code>for...of</code>，可以使用它来遍历数组、Map、Set等.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> arr<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> set<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nmap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nmap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nmap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;gender&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> map<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>能否使用<code>for...of</code>循环遍历我们自己写的对象吗？</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span>\n    name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>\n    age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>\n    gender<span class="token operator">:</span> <span class="token string">&quot;男&quot;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> p1<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span> <span class="token comment">//报错 无法使用for of遍历p1对象.</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_12-1-for-of的原理" tabindex="-1"><a class="header-anchor" href="#_12-1-for-of的原理" aria-hidden="true">#</a> 12.1 for...of的原理</h3><p>​ 在使用<code>for..of</code>遍历1个对象的时候，先调用这个对象的<code>Symbol.iterator</code>方法，这个方法返回1个<code>迭代器</code>。每遍历一次，就会调用<code>迭代器</code>对象的<code>next</code>方法，这个方法会返回1个对象，这个对象包含两个属性，一个是<code>value</code>,指定本次遍历得到的结果，还有一个属性是<code>done</code>，bool值，代表遍历是否结束，每调用一次<code>next</code>方法， 就返回下1个被遍历的值，直到最后一个元素。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">//1.调用set对象的遍历器方法，返回1个迭代器对象.  </span>\n<span class="token keyword">const</span> iterator <span class="token operator">=</span> <span class="token keyword">set</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">//iterator就是这个迭代器对象.</span>\n<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token keyword">let</span> item <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>done<span class="token punctuation">)</span><span class="token punctuation">{</span>\n\t\t<span class="token keyword">break</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_12-2-实现自己的迭代器" tabindex="-1"><a class="header-anchor" href="#_12-2-实现自己的迭代器" aria-hidden="true">#</a> 12.2 实现自己的迭代器</h3><p>知道了<code>for...of</code>的原理后， 如果我们希望我们自己的对象也能被<code>for...of</code>遍历，那么就可以这么做</p><ul><li>为对象添加1个<code>[Symbol.iterator]</code>方法。</li><li>这个方法返回1个对象</li><li>这个对象需要有1个next方法</li><li>这个next方法返回1个对象，对象包含<code>vulue</code>属性，表示本次遍历的值，包含1个<code>done</code>属性，表示本次遍历结束后是否还有数据。 然后保证下次调用next方法的时候 返回的是下1个数据.</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> hmSet <span class="token operator">=</span> <span class="token punctuation">{</span>\n    data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">const</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>\n        <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> <span class="token punctuation">{</span>\n            <span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n                <span class="token keyword">return</span> <span class="token punctuation">{</span>\n                    value<span class="token operator">:</span> that<span class="token punctuation">.</span>data<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n                    done<span class="token operator">:</span> index <span class="token operator">==</span> that<span class="token punctuation">.</span>data<span class="token punctuation">.</span>lenght <span class="token operator">+</span> <span class="token number">1</span>\n                <span class="token punctuation">}</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> hmSet<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="_12-3-原生实现了迭代器的对象" tabindex="-1"><a class="header-anchor" href="#_12-3-原生实现了迭代器的对象" aria-hidden="true">#</a> 12.3 原生实现了迭代器的对象</h3><ul><li>Array</li><li>Map</li><li>Set</li><li>String</li><li>TypedArray</li><li>函数的 arguments 对象</li><li>NodeList 对象</li></ul><p>也就是说，这些对象是可以直接用<code>for...of</code>来遍历的。</p>',66),v={},y=(0,a(3744).Z)(v,[["render",function(n,s){const a=(0,p.up)("OutboundLink");return(0,p.wg)(),(0,p.iD)(p.HY,null,[t,(0,p._)("p",null,[e,(0,p._)("a",o,[c,(0,p.Wm)(a)])]),l,(0,p._)("p",null,[u,(0,p._)("a",r,[i,(0,p.Wm)(a)])]),k,(0,p._)("ul",null,[b,(0,p._)("li",null,[m,(0,p._)("p",null,[d,(0,p._)("a",g,[h,(0,p.Wm)(a)])])])]),f],64)}]])},3744:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,p]of s)a[n]=p;return a}}}]);