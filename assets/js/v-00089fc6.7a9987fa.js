"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5756],{9710:(n,s,a)=>{a.r(s),a.d(s,{data:()=>p});const p={key:"v-00089fc6",path:"/project/webpack5%E5%A4%9A%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA.html",title:"webpack5+vue",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"一、开发环境配置-dev",slug:"一、开发环境配置-dev",children:[]},{level:2,title:"二、生产环境配置-prod",slug:"二、生产环境配置-prod",children:[{level:3,title:"1.基础配置",slug:"_1-基础配置",children:[{level:4,title:"1.1命令行",slug:"_1-1命令行",children:[]},{level:4,title:"1.2 webpack.prod.conf.js",slug:"_1-2-webpack-prod-conf-js",children:[]}]},{level:3,title:"2.打包优化",slug:"_2-打包优化",children:[{level:4,title:"2.1 自带优化",slug:"_2-1-自带优化",children:[]},{level:4,title:"2.2 CSS",slug:"_2-2-css",children:[{level:5,title:"css补全",slug:"css补全",children:[]},{level:5,title:"css分块",slug:"css分块",children:[]},{level:5,title:"css压缩",slug:"css压缩",children:[]}]},{level:4,title:"2.3 js分割SplitChunksPlugin",slug:"_2-3-js分割splitchunksplugin",children:[]},{level:4,title:"2.4 持久缓存优化",slug:"_2-4-持久缓存优化",children:[{level:5,title:"1、 hash、chunkhash、contenthash区别",slug:"_1、-hash、chunkhash、contenthash区别",children:[]},{level:5,title:"2、 HashedModuleIdsPlugin 和 NamedChunksPlugin 区别",slug:"_2、-hashedmoduleidsplugin-和-namedchunksplugin-区别",children:[]},{level:5,title:"3、runtimeChunk",slug:"_3、runtimechunk",children:[]}]}]}]},{level:2,title:"三、babel7 配置",slug:"三、babel7-配置",children:[{level:3,title:"1. babel/preset-env",slug:"_1-babel-preset-env",children:[]},{level:3,title:"2.core-js@3",slug:"_2-core-js-3",children:[]},{level:3,title:"3.babel/plugin-transform-runtime",slug:"_3-babel-plugin-transform-runtime",children:[]},{level:3,title:"4.@babel/runtime",slug:"_4-babel-runtime",children:[]},{level:3,title:"5.webpack配置babel",slug:"_5-webpack配置babel",children:[]}]},{level:2,title:"插件说明:",slug:"插件说明",children:[{level:3,title:"html",slug:"html",children:[]},{level:3,title:"cross-env",slug:"cross-env",children:[]},{level:3,title:"webpack.definePlugin",slug:"webpack-defineplugin",children:[]}]},{level:2,title:"loader说明:",slug:"loader说明",children:[{level:3,title:"file-loader 和url-loader",slug:"file-loader-和url-loader",children:[]},{level:3,title:"vue-loader",slug:"vue-loader",children:[]},{level:3,title:"webpack-dev-server",slug:"webpack-dev-server",children:[]}]},{level:2,title:"打包分析",slug:"打包分析",children:[{level:3,title:"打包时间分析",slug:"打包时间分析",children:[]},{level:3,title:"打包分析",slug:"打包分析-1",children:[]}]}],filePathRelative:"project/webpack5多项目构建.md",git:{updatedTime:1643448789e3}}},6369:(n,s,a)=>{a.r(s),a.d(s,{default:()=>k});var p=a(6252),t=a(3757),e=a(4822),o=a(118),c=a(1167),l=a(3065),u=a(1926);const r=(0,p.uE)('<h1 id="webpack5-vue" tabindex="-1"><a class="header-anchor" href="#webpack5-vue" aria-hidden="true">#</a> webpack5+vue</h1><p>https://webpack.js.org/</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>https<span class="token operator">:</span><span class="token comment">//github.com/WALL-E-WEB/webpack-multi-project</span>\n \n已经升级到webpack5.<span class="token number">0</span>；\n环境<span class="token operator">:</span>\n<span class="token property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.26.0&quot;</span><span class="token punctuation">,</span>\t<span class="token comment">// https://webpack.js.org</span>\n<span class="token property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.5.0&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 相较于3 命令行声明方式修改</span>\n<span class="token property">&quot;webpack-dev-server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.11.2&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 命令行改为 webpack serve</span>\nnode v14.<span class="token number">5.0</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>package.json:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;dev:app1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env FILE_NAME=app1  webpack serve --node-env development --config build/webpack.dev.conf.js&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;dev:app2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env FILE_NAME=app2 webpack serve --env.NODE_ENV=development --config build/webpack.dev.conf.js&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;build:app1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env FILE_NAME=app1 webpack --node-env production --config build/webpack.prod.conf.js --progress&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;build:app2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env FILE_NAME=app2 webpack --env.NODE_ENV=production --config build/webpack.prod.conf.js&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;test:unit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jest&quot;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>多应用思路:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1.</span>通过命令行 声明 指定打包的文件名变量 和 环境<span class="token punctuation">;</span>\n<span class="token number">2.</span>根据文件名变量 指定打包哪一个应用 和 输出文件的文件夹名称<span class="token punctuation">;</span>\n<span class="token number">3.</span>根据环境变量 指定http请求的基地址<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>项目地址：</p><p>Webpack4：https://github.com/WALL-E-WEB/webpack-multi-project</p><p>Webpack5：https://gitee.com/wangchangran/webpack5-multiple</p><h2 id="一、开发环境配置-dev" tabindex="-1"><a class="header-anchor" href="#一、开发环境配置-dev" aria-hidden="true">#</a> 一、开发环境配置-dev</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>√ 跨域<span class="token punctuation">;</span>\n√ 路径别名@<span class="token punctuation">;</span>\n√ 多页面应用<span class="token punctuation">;</span>\n√ 持久缓存contenthash；\n√ babel7 配置；\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> VueLoaderPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;vue-loader/lib/plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 请求后端的地址</span>\n<span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">../src/apply/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/api/config.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nmodule<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n\tconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t<span class="token keyword">return</span> <span class="token punctuation">{</span>\n\t\tmode<span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>\n\t\t<span class="token comment">//是否显示源码</span>\n\t\tdevtool<span class="token operator">:</span> <span class="token string">&quot;inline-source-map&quot;</span><span class="token punctuation">,</span>\n\t\tdevServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\thost<span class="token operator">:</span> <span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span>\n\t\t\thot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n\t\t\t<span class="token comment">// compress:true,</span>\n\t\t\t<span class="token comment">//不显示页面顶部的 app ready 标栏</span>\n\t\t\tinline<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n\t\t\topen<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n\t\t\t<span class="token comment">//编译错误时覆盖全屏 显示错误</span>\n\t\t\toverlay<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n\t\t\tport<span class="token operator">:</span> <span class="token number">81</span><span class="token punctuation">,</span>\n\t\t\tproxy<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t\t<span class="token string">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t\t\ttarget<span class="token operator">:</span> url<span class="token punctuation">,</span>\n\t\t\t\t\tpathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;^/api&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                    <span class="token comment">// axios 的 baseurl 设置为&#39;/api&#39;</span>\n\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\n\t\t<span class="token comment">// stats: {</span>\n\t\t<span class="token comment">// \t// One of the two if I remember right</span>\n\t\t<span class="token comment">// \tentrypoints: false,</span>\n\t\t<span class="token comment">// \tchildren: false,</span>\n\t\t<span class="token comment">// \tcolors: true</span>\n\t\t<span class="token comment">// },</span>\n\t\t<span class="token comment">//显示信息</span>\n\t\tstats<span class="token operator">:</span><span class="token string">&#39;errors-only&#39;</span><span class="token punctuation">,</span>\n\t\tentry<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./src/apply/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/main.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>\n\t\toutput<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\tfilename<span class="token operator">:</span> <span class="token string">&quot;[name].js&quot;</span><span class="token punctuation">,</span>\n\t\t\t<span class="token comment">// path: path.resolve(__dirname, &quot;../dist&quot;, `./${process.env.FILE_NAME}`),</span>\n\t\t\tpublicPath<span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\tmodule<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\trules<span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\ttest<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\t\t\t\t\tloader<span class="token operator">:</span> <span class="token string">&quot;vue-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\ttest<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\t\t\t\t\tuse<span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t\t\t\t\t<span class="token string">&quot;vue-style-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\t\t\tloader<span class="token operator">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\t\t\toptions<span class="token operator">:</span> <span class="token punctuation">{</span> importLoaders<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t\t\t<span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\ttest<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\t\t\t\t\tloader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token function-variable function">exclude</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>\n\t\t\t\t\t\t<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.vue\\.js</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\ttest<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(png|jpe?g|gif|svg)(\\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\t\t\t\t\tloader<span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\toptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t\t\t\tlimit<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>\n\t\t\t\t\t\tname<span class="token operator">:</span> <span class="token string">&quot;static/img/[name].[hash:7].[ext]&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\t\t<span class="token comment">// 版本</span>\n\t\t\t\t\t\tesModule<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\ttest<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(mp4|webm|ogg|mp3|wav|flac|aac)(\\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\t\t\t\t\tloader<span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\toptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t\t\t\tlimit<span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>\n\t\t\t\t\t\tname<span class="token operator">:</span> <span class="token string">&quot;static/media/[name].[hash:7].[ext]&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\ttest<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(woff2?|eot|ttf|otf)(\\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\t\t\t\t\tloader<span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\toptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t\t\t\tlimit<span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>\n\t\t\t\t\t\tname<span class="token operator">:</span> <span class="token string">&quot;static/fonts/[name].[hash:7].[ext]&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\tplugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t\t<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t<span class="token keyword">new</span> <span class="token class-name">VueLoaderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n\t\t\t\t<span class="token string">&quot;process.env.FILE_NAME&quot;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token string">&quot;process.env.NODE_ENV&quot;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n\t\t\t\tfilename<span class="token operator">:</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span>\n\t\t\t\ttemplate<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>\n\t\t\t\t\t__dirname<span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">../src/apply/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.html</span><span class="token template-punctuation string">`</span></span>\n\t\t\t\t<span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t<span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\tresolve<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\talias<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t\t<span class="token comment">//配置别名</span>\n\t\t\t\t<span class="token string">&quot;@&quot;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t<span class="token comment">//配置拓展文件 /src/router  === /src/router/index.js</span>\n\t\t\textensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.vue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.json&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br></div></div><h2 id="二、生产环境配置-prod" tabindex="-1"><a class="header-anchor" href="#二、生产环境配置-prod" aria-hidden="true">#</a> 二、生产环境配置-prod</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>√ css分包 压缩 补全<span class="token punctuation">;</span>\n√ js 分包 chunk<span class="token punctuation">;</span>\n√ gzip<span class="token punctuation">;</span>\n√ 持久缓存<span class="token punctuation">;</span>\n√ 打包分析<span class="token punctuation">;</span>\n√ 打包时间<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_1-基础配置" tabindex="-1"><a class="header-anchor" href="#_1-基础配置" aria-hidden="true">#</a> 1.基础配置</h3><h4 id="_1-1命令行" tabindex="-1"><a class="header-anchor" href="#_1-1命令行" aria-hidden="true">#</a> 1.1命令行</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">package</span><span class="token punctuation">.</span>json\n\n<span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token string">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;build:app1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env FILE_NAME=app1 webpack --env.NODE_ENV=production --config build/webpack.prod.conf.js&quot;</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;build:app2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env FILE_NAME=app2 webpack --env.NODE_ENV=production --config build/webpack.prod.conf.js&quot;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>cross-env 指定变量</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//现在已经可以不需要这样声明打包的文件名了</span>\ncross<span class="token operator">-</span>env <span class="token constant">FILE_NAME</span><span class="token operator">=</span>app1  \n\n声明变量<span class="token constant">FILE_NAME</span><span class="token operator">=</span>app1 指定文件名\n\n下载<span class="token operator">:</span>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev cross<span class="token operator">-</span>env\n\nnpm run build<span class="token operator">:</span>app1 时打包app1应用\nnpm run build<span class="token operator">:</span>app2 时打包app2应用\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>--env.NODE_ENV=production</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>webpack<span class="token punctuation">.</span>js<span class="token punctuation">.</span>org<span class="token operator">/</span>guides<span class="token operator">/</span>environment<span class="token operator">-</span>variables<span class="token operator">/</span>#root\n指定环境名\n配置文件中使用<span class="token keyword">function</span> 写法可获得该参数\n<span class="token keyword">const</span> <span class="token function-variable function">config</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span> <span class="token comment">//production</span>\n<span class="token punctuation">}</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span>config<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>--config build/webpack.prod.conf.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>指定配置文件\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>设置全局变量名</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token function-variable function">config</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n<span class="token keyword">return</span><span class="token punctuation">{</span>\n plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n\t<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token comment">//获取COSS-env 设置的变量方式</span>\n\t<span class="token string">&quot;process.env.FILE_NAME&quot;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token comment">//该变量用于应用中api&gt;config.sj中判断不同环境的请求地址</span>\n\t<span class="token string">&quot;process.env.NODE_ENV&quot;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span>\n\t<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n <span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_1-2-webpack-prod-conf-js" tabindex="-1"><a class="header-anchor" href="#_1-2-webpack-prod-conf-js" aria-hidden="true">#</a> 1.2 webpack.prod.conf.js</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">//---------------------vue-loader------------------------------</span>\n<span class="token keyword">const</span> VueLoaderPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;vue-loader/lib/plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">//---------------------打包分析------------------------------</span>\n<span class="token keyword">const</span> BundleAnalyzerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-bundle-analyzer&quot;</span><span class="token punctuation">)</span>\n\t<span class="token punctuation">.</span>BundleAnalyzerPlugin<span class="token punctuation">;</span>\n\n<span class="token comment">//-------------build清除dist目录---------------------------------------</span>\n<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">//-------------css分块---------------------------------------</span>\n<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// -------------css压缩----------------------------------------------</span>\n<span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;terser-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> OptimizeCSSAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;optimize-css-assets-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// --------------打包时间--------------------------------------------</span>\n<span class="token keyword">const</span> SpeedMeasurePlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;speed-measure-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> smp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpeedMeasurePlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// --------------------gzip压缩--------------------</span>\n<span class="token keyword">const</span> CompressionPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;compression-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">config</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n\tconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{NODE_ENV: &#39;production&#39;}</span>\n\tconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//app1</span>\n\t<span class="token keyword">return</span> <span class="token punctuation">{</span>\n\t\tentry<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./src/apply/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/main.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>\n\t\toutput<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\tpath<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../dist&quot;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\tfilename<span class="token operator">:</span> <span class="token string">&quot;static/js/[name].[contenthash].js&quot;</span><span class="token punctuation">,</span>\n\t\t\tpublicPath<span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>\n\t\t\t<span class="token comment">//懒加载模块 或 分块模块 的 输出路径 以及命名 不写则默认filename路径 name为vendors</span>\n\t\t\tchunkFilename<span class="token operator">:</span> <span class="token string">&quot;static/js/[name].[contenthash].js&quot;</span><span class="token punctuation">,</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\tmode<span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>\n\t\tmodule<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\trules<span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\ttest<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\t\t\t\t\tloader<span class="token operator">:</span> <span class="token string">&quot;vue-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\ttest<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\t\t\t\t\tuse<span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t\t\t\t\tMiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>\n\t\t\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\t\t\tloader<span class="token operator">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\t\t\toptions<span class="token operator">:</span> <span class="token punctuation">{</span> importLoaders<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t\t\t<span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\ttest<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token comment">// loader: &quot;babel-loader&quot;,</span>\n\t\t\t\t\tuse<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token comment">// exclude: (file) =&gt;</span>\n\t\t\t\t\t<span class="token comment">// \t/node_modules/.test(file) &amp;&amp; !/\\.vue\\.js/.test(file),</span>\n\t\t\t\t\tinclude<span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\ttest<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(png|jpe?g|gif|svg)(\\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\t\t\t\t\tloader<span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\toptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t\t\t\tlimit<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>\n\t\t\t\t\t\tname<span class="token operator">:</span> <span class="token string">&quot;static/img/[name].[hash:7].[ext]&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\t\t<span class="token comment">// 版本</span>\n\t\t\t\t\t\tesModule<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\ttest<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(mp4|webm|ogg|mp3|wav|flac|aac)(\\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\t\t\t\t\tloader<span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\toptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t\t\t\tlimit<span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>\n\t\t\t\t\t\tname<span class="token operator">:</span> <span class="token string">&quot;static/media/[name].[hash:7].[ext]&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\ttest<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(woff2?|eot|ttf|otf)(\\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\t\t\t\t\tloader<span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\toptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t\t\t\tlimit<span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>\n\t\t\t\t\t\tname<span class="token operator">:</span> <span class="token string">&quot;static/fonts/[name].[hash:7].[ext]&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\tplugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t\t<span class="token comment">//开启gzip压缩</span>\n\t\t\t<span class="token comment">// new CompressionPlugin({</span>\n\t\t\t<span class="token comment">// \talgorithm: &quot;gzip&quot;,</span>\n\t\t\t<span class="token comment">// \ttest: /\\.js$|\\.css$/,</span>\n\t\t\t<span class="token comment">// }),</span>\n\t\t\t<span class="token comment">//打包分析</span>\n\t\t\t<span class="token comment">// new BundleAnalyzerPlugin(),</span>\n\t\t\t<span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t<span class="token keyword">new</span> <span class="token class-name">VueLoaderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t<span class="token comment">//设置js全局变量</span>\n\t\t\t<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n\t\t\t\t<span class="token string">&quot;process.env.NODE_ENV&quot;</span><span class="token operator">:</span> env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token string">&quot;process.env.FILE_NAME&quot;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t<span class="token comment">//html文件</span>\n\t\t\t<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n\t\t\t\ttitle<span class="token operator">:</span> <span class="token string">&quot;瓦力&quot;</span><span class="token punctuation">,</span>\n\t\t\t\tfilename<span class="token operator">:</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span>\n\t\t\t\ttemplate<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>\n\t\t\t\t\t__dirname<span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">../src/apply/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.html</span><span class="token template-punctuation string">`</span></span>\n\t\t\t\t<span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t<span class="token comment">//css分块</span>\n\t\t\t<span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n\t\t\t\tfilename<span class="token operator">:</span> <span class="token string">&quot;static/css/[name].[contenthash].css&quot;</span><span class="token punctuation">,</span>\n\t\t\t\tchunkFilename<span class="token operator">:</span> <span class="token string">&quot;static/css/[name].[contenthash].css&quot;</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t<span class="token comment">//以路经为id</span>\n\t\t\t<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HashedModuleIdsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n\t\t\t\tcontext<span class="token operator">:</span> __dirname<span class="token punctuation">,</span>\n\t\t\t\thashDigestLength<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\n\t\t\t<span class="token comment">//设定chunk name</span>\n\t\t\t<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NamedChunksPlugin</span><span class="token punctuation">(</span>\n\t\t\t\t<span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>\n\t\t\t\t\tchunk<span class="token punctuation">.</span>name <span class="token operator">||</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>chunk<span class="token punctuation">.</span>modulesIterable<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;_&quot;</span><span class="token punctuation">)</span>\n\t\t\t<span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t<span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\tresolve<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\talias<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t\t<span class="token comment">//配置别名</span>\n\t\t\t\t<span class="token string">&quot;@&quot;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t<span class="token comment">//配置拓展文件 /src/router  === /src/router/index.js</span>\n\t\t\textensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.vue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.json&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\toptimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\tsplitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t\tchunks<span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>\n\t\t\t\tautomaticNameDelimiter<span class="token operator">:</span> <span class="token string">&quot;~&quot;</span><span class="token punctuation">,</span>\n\t\t\t\tminSize<span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>\n\t\t\t\tcacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t\t\tvue<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t\t\t\ttest<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\\\/]node_modules[\\\\/]vue[\\\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\t\t\t\t\t\tname<span class="token operator">:</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\t\tchunks<span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\tminimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n\t\t\t<span class="token comment">// css压缩</span>\n\t\t\tminimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t\t\t<span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n\t\t\t\t\tcache<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n\t\t\t\t\tparallel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token comment">// 不生成txt文档</span>\n\t\t\t\t\textractComments<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token comment">// terserOptions: {</span>\n\t\t\t\t\t<span class="token comment">// \toutput: {</span>\n\t\t\t\t\t<span class="token comment">// \t\tcomments: false,</span>\n\t\t\t\t\t<span class="token comment">// \t},</span>\n\t\t\t\t\t<span class="token comment">// },</span>\n\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token keyword">new</span> <span class="token class-name">OptimizeCSSAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\t\t<span class="token comment">// 将包含chunks映射关系单独提出出来,避免main.js hash变动</span>\n\t\t\truntimeChunk<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t\t<span class="token function-variable function">name</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">entrypoint</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">runtime~</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entrypoint<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token comment">// module.exports = config;</span>\n\n<span class="token comment">// 打包时间分析</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> smp<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br></div></div><h3 id="_2-打包优化" tabindex="-1"><a class="header-anchor" href="#_2-打包优化" aria-hidden="true">#</a> 2.打包优化</h3><h4 id="_2-1-自带优化" tabindex="-1"><a class="header-anchor" href="#_2-1-自带优化" aria-hidden="true">#</a> 2.1 自带优化</h4><p>mode为production模式时自带优化</p><ul><li>tree shaking：打包时移除未引用的代码(dead-code)；</li><li>scope hoisting： 打散的模块合并到一个函数中去；</li><li>对代码进行压缩、混淆；</li><li></li></ul><h4 id="_2-2-css" tabindex="-1"><a class="header-anchor" href="#_2-2-css" aria-hidden="true">#</a> 2.2 CSS</h4><h5 id="css补全" tabindex="-1"><a class="header-anchor" href="#css补全" aria-hidden="true">#</a> css补全</h5><p>postcss-loader 和autoprefixer</p><p>安装:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm i <span class="token operator">-</span><span class="token constant">D</span> postcss<span class="token operator">-</span>loader autoprefixer\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>config</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>\n\t\t\t\ttest<span class="token operator">:</span> /\\.css$/<span class="token punctuation">,</span>\n\t\t\t\tuse<span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t\t\t\t&#39;vue-style-loader&#39;<span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\t  loader<span class="token operator">:</span> &#39;css-loader&#39;<span class="token punctuation">,</span>\n\t\t\t\t\t  options<span class="token operator">:</span> <span class="token punctuation">{</span> importLoaders<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>\n\t\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t\t&#39;postcss-loader&#39;\n\t\t\t\t<span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>更目录postcss.config.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n\tplugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;autoprefixer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n\t\t\toverrideBrowserslist<span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t\t\t<span class="token string">&quot;Android 4.1&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token string">&quot;iOS 7.1&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token string">&quot;Chrome &gt; 31&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token string">&quot;ff &gt; 31&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token string">&quot;ie &gt;= 8&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token string">&quot;last 3 iOS versions&quot;</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">]</span><span class="token punctuation">,</span>grid<span class="token operator">:</span><span class="token boolean">true</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t<span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h5 id="css分块" tabindex="-1"><a class="header-anchor" href="#css分块" aria-hidden="true">#</a> css分块</h5><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm i <span class="token operator">-</span><span class="token constant">D</span> mini<span class="token operator">-</span>css<span class="token operator">-</span>extract<span class="token operator">-</span>plugin`\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li><p>使用:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\trules<span class="token operator">:</span> <span class="token punctuation">[</span>\n            <span class="token punctuation">{</span>\n\t\t\t\ttest<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\t\t\t\tuse<span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t\t\t\t<span class="token constant">ENV</span><span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">==</span> <span class="token string">&quot;production&quot;</span>\n                 \n\t\t\t\t\t\t<span class="token operator">?</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader\n\t\t\t\t\t\t<span class="token operator">:</span> <span class="token string">&quot;vue-style-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\t\tloader<span class="token operator">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\t\toptions<span class="token operator">:</span> <span class="token punctuation">{</span> importLoaders<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t\t<span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\nplugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t<span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n            filename<span class="token operator">:</span> <span class="token string">&quot;static/css/[name].[hash].css&quot;</span><span class="token punctuation">,</span>\n            chunkFilename<span class="token operator">:</span><span class="token string">&quot;[id].css&quot;</span><span class="token punctuation">,</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\t<span class="token punctuation">]</span><span class="token punctuation">,</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></li><li><p>使用前后区别:</p><p><img src="'+t+'" alt="image-20200422150952677"></p></li></ul><h5 id="css压缩" tabindex="-1"><a class="header-anchor" href="#css压缩" aria-hidden="true">#</a> css压缩</h5><ul><li><p>官方文档地址:<code>https://webpack.js.org/plugins/mini-css-extract-plugin/#minimizing-for-production</code></p></li><li><p>依靠两个插件:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//将css压缩 并优化</span>\nnpm install <span class="token operator">--</span>save<span class="token operator">-</span>dev optimize<span class="token operator">-</span>css<span class="token operator">-</span>assets<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin\n\n\nnpm install terser<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin <span class="token operator">--</span>save<span class="token operator">-</span>dev\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>porduction\n<span class="token comment">//css分块插件 index.html中head标签中的style样式 改为 &lt;link&gt;标签导入</span>\n<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mini-css-extract-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;terser-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> OptimizeCSSAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;optimize-css-assets-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> \t<span class="token class-name">OptimizeCSSAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      filename<span class="token operator">:</span> <span class="token string">&#39;[name].[contenthash].css&#39;</span><span class="token punctuation">,</span>\n      chunkFilename<span class="token operator">:</span> <span class="token string">&#39;[id].[contenthash].css&#39;</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n\t\t\ttest<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\t\t\tuse<span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t\t\tMiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\tloader<span class="token operator">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t\t\toptions<span class="token operator">:</span> <span class="token punctuation">{</span> importLoaders<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t\t\t<span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div></li></ul><h4 id="_2-3-js分割splitchunksplugin" tabindex="-1"><a class="header-anchor" href="#_2-3-js分割splitchunksplugin" aria-hidden="true">#</a> 2.3 js分割<code>SplitChunksPlugin</code></h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>\n      chunks<span class="token operator">:</span> <span class="token string">&#39;async&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 只对异步加载的模块进行拆分，可选值还有all | initial</span>\n      minSize<span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span> <span class="token comment">// 模块最少大于30KB才拆分</span>\n      maxSize<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token comment">// 模块大小无上限，只要大于30KB都拆分</span>\n      minChunks<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 模块最少引用一次才会被拆分</span>\n      maxAsyncRequests<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">// 异步加载时同时发送的请求数量最大不能超过5,超过5的部分不拆分</span>\n      maxInitialRequests<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// 页面初始化时同时发送的请求数量最大不能超过3,超过3的部分不拆分</span>\n      automaticNameDelimiter<span class="token operator">:</span> <span class="token string">&#39;~&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 默认的连接符</span>\n      name<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 拆分的chunk名,设为true表示根据模块名和CacheGroup的key来自动生成,使用上面连接符连接</span>\n      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 缓存组配置,上面配置读取完成后进行拆分,如果需要把多个模块拆分到一个文件,就需要缓存,所以命名为缓存组</span>\n        vendors<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 自定义缓存组名</span>\n          test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\\\/]node_modules[\\\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 检查node_modules目录,只要模块在该目录下就使用上面配置拆分到这个组</span>\n          priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span> <span class="token comment">// 权重-10,决定了哪个组优先匹配,例如node_modules下有个模块要拆分,同时满足vendors和default组,此时就会分到vendors组,因为-10 &gt; -20</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 默认缓存组名</span>\n          minChunks<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 最少引用两次才会被拆分</span>\n          priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token comment">// 权重-20</span>\n          reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 如果主入口中引入了两个模块,其中一个正好也引用了后一个,就会直接复用,无需引用两次</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="_2-4-持久缓存优化" tabindex="-1"><a class="header-anchor" href="#_2-4-持久缓存优化" aria-hidden="true">#</a> 2.4 持久缓存优化</h4><p>​ <strong>目标</strong>:每次打包, 保证未改变内容的文件的hash保持不变;</p><h5 id="_1、-hash、chunkhash、contenthash区别" tabindex="-1"><a class="header-anchor" href="#_1、-hash、chunkhash、contenthash区别" aria-hidden="true">#</a> 1、 hash、chunkhash、contenthash区别</h5><ul><li>hash</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>\n<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hash</span><span class="token template-punctuation string">`</span></span> 和每次 <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">build</span><span class="token template-punctuation string">`</span></span>有关，\n打包后所有文件的hash都一样；\n没有任何改变的情况下，每次编译出来的 <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hash</span><span class="token template-punctuation string">`</span></span>都是一样的；\n\n\n但当你改变了任何一点东西，所有的<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hash</span><span class="token template-punctuation string">`</span></span>全都会发生改变。\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="'+e+'" alt="image-20200424104539602"></p><hr><ul><li>chunkhash</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>\n\n<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">chunkhash</span><span class="token template-punctuation string">`</span></span>是和<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">chunk</span><span class="token template-punctuation string">`</span></span>有关<span class="token punctuation">;</span>\n根据具体每一个模块文件自己的的内容包括它的依赖计算所得的<span class="token punctuation">;</span>\n某个文件的改动只会影响它本身和所引入的文件<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hash</span><span class="token template-punctuation string">`</span></span>，不会影响其它文件。\n\n同一类chunk 有相同的hash<span class="token punctuation">.</span>\n\n比如：main<span class="token punctuation">.</span>js中引入base<span class="token punctuation">.</span>css<span class="token punctuation">;</span>\n当你改main<span class="token punctuation">.</span>js或改base<span class="token punctuation">.</span>css时<span class="token operator">:</span>main 和 base 的hash都会改变<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="'+o+'" alt="image-20200424105511640"></p><hr><ul><li>contenthash</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>\n\n它的出现主要是为了解决，让<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">css</span><span class="token template-punctuation string">`</span></span>文件不受<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">js</span><span class="token template-punctuation string">`</span></span>文件的影响。比如<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">foo.css</span><span class="token template-punctuation string">`</span></span>被<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">foo.js</span><span class="token template-punctuation string">`</span></span>引用了，所以它们共用相同的<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">chunkhash</span><span class="token template-punctuation string">`</span></span>值。但这样子是有问题的，如果<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">foo.js</span><span class="token template-punctuation string">`</span></span>修改了代码，<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">css</span><span class="token template-punctuation string">`</span></span>文件就算内容没有任何改变，由于是该模块的 <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hash</span><span class="token template-punctuation string">`</span></span> 发生了改变，其<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">css</span><span class="token template-punctuation string">`</span></span>文件的<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hash</span><span class="token template-punctuation string">`</span></span>也会随之改变。\n\n每个文件的hash都不一样\n\n比如：main<span class="token punctuation">.</span>js中引入base<span class="token punctuation">.</span>css<span class="token punctuation">;</span>\n当你改main<span class="token punctuation">.</span>js时<span class="token operator">:</span>base 的hash不会都会改变<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="'+c+'" alt="image-20200424110619538"></p><p>**问题:**当有增加异步模块时,因chunks的Id数字自增 会导致未改变文件的hash值改变;</p><p><img src="'+l+'" alt="image-20200424114026021"></p><p>需要webpack内置插件NamedChunksPlugin 和 HashedModuleIdsPlugin 解决:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nplugin<span class="token operator">:</span><span class="token punctuation">{</span>\n<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HashedModuleIdsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n\t\t\t\tcontext<span class="token operator">:</span> __dirname<span class="token punctuation">,</span>\n\t\t\t\thashDigestLength<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>\n\t\t\t<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NamedChunksPlugin</span><span class="token punctuation">(</span>\n\t<span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>\n\t\tchunk<span class="token punctuation">.</span>name <span class="token operator">||</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>chunk<span class="token punctuation">.</span>modulesIterable<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;_&quot;</span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><img src="'+u+'" alt="image-20200424121335154"></p><h5 id="_2、-hashedmoduleidsplugin-和-namedchunksplugin-区别" tabindex="-1"><a class="header-anchor" href="#_2、-hashedmoduleidsplugin-和-namedchunksplugin-区别" aria-hidden="true">#</a> 2、 HashedModuleIdsPlugin 和 NamedChunksPlugin 区别</h5><h5 id="_3、runtimechunk" tabindex="-1"><a class="header-anchor" href="#_3、runtimechunk" aria-hidden="true">#</a> 3、runtimeChunk</h5><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>作用<span class="token operator">:</span>将包含chunks映射关系单独提出出来<span class="token punctuation">,</span>避免main<span class="token punctuation">.</span>js hash变动\n使用<span class="token operator">:</span>\noptimization<span class="token operator">:</span><span class="token punctuation">{</span>\n\truntimeChunk<span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t<span class="token function-variable function">name</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">entrypoint</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">runtime~</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entrypoint<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>\n\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="三、babel7-配置" tabindex="-1"><a class="header-anchor" href="#三、babel7-配置" aria-hidden="true">#</a> 三、babel7 配置</h2><h3 id="_1-babel-preset-env" tabindex="-1"><a class="header-anchor" href="#_1-babel-preset-env" aria-hidden="true">#</a> 1. babel/preset-env</h3><ul><li><p>安装:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev @babel<span class="token operator">/</span>preset<span class="token operator">-</span>env\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ul><h3 id="_2-core-js-3" tabindex="-1"><a class="header-anchor" href="#_2-core-js-3" aria-hidden="true">#</a> 2.core-js@3</h3><ul><li><p>安装:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm i <span class="token operator">--</span>save core<span class="token operator">-</span>js@<span class="token number">3</span> \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ul><h3 id="_3-babel-plugin-transform-runtime" tabindex="-1"><a class="header-anchor" href="#_3-babel-plugin-transform-runtime" aria-hidden="true">#</a> 3.babel/plugin-transform-runtime</h3><ul><li><p>安装:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm install --save-dev @babel/plugin-transform-runtime\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ul><h3 id="_4-babel-runtime" tabindex="-1"><a class="header-anchor" href="#_4-babel-runtime" aria-hidden="true">#</a> 4.@babel/runtime</h3><ul><li><p>安装:https://babeljs.io/docs/en/babel-plugin-transform-runtime#docsNav</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>根据corejs选项选定<span class="token operator">:</span>\nnpm install <span class="token operator">--</span>save @babel<span class="token operator">/</span>runtime\t\t\t<span class="token comment">// corejs: false</span>\nnpm install <span class="token operator">--</span>save @babel<span class="token operator">/</span>runtime<span class="token operator">-</span>corejs2\t<span class="token comment">// corejs: 2</span>\nnpm install <span class="token operator">--</span>save @babel<span class="token operator">/</span>runtime<span class="token operator">-</span>corejs3 \t<span class="token comment">// corejs: 3</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul><h3 id="_5-webpack配置babel" tabindex="-1"><a class="header-anchor" href="#_5-webpack配置babel" aria-hidden="true">#</a> 5.webpack配置babel</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// webpack.prod.conf.js</span>\n<span class="token punctuation">{</span>\t<span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span>\n\tmodule<span class="token operator">:</span><span class="token punctuation">{</span>\n\t\trules<span class="token operator">:</span><span class="token punctuation">[</span>\n            <span class="token operator">...</span><span class="token punctuation">.</span>\n\t\t<span class="token punctuation">{</span>\n          test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n          use<span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span>\n          exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(node_modules)</span><span class="token regex-delimiter">/</span></span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t<span class="token punctuation">]</span>\n\t<span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// babel.config.js</span>\nmodule<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">api</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  api<span class="token punctuation">.</span><span class="token function">cache</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">const</span> presets <span class="token operator">=</span> <span class="token punctuation">[</span>\n    <span class="token punctuation">[</span>\n      <span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        useBuiltIns<span class="token operator">:</span> <span class="token string">&#39;usage&#39;</span><span class="token punctuation">,</span>\n        corejs<span class="token operator">:</span> <span class="token punctuation">{</span>\n          version<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>\n          proposals<span class="token operator">:</span> <span class="token boolean">true</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        targets<span class="token operator">:</span> <span class="token punctuation">{</span>\n          browsers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;&gt; 1%&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;last 2 versions&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;not ie&lt;= 8&#39;</span><span class="token punctuation">]</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">]</span>\n  <span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> plugins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#39;@babel/plugin-transform-runtime&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> corejs<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    presets<span class="token punctuation">,</span>\n    plugins\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="插件说明" tabindex="-1"><a class="header-anchor" href="#插件说明" aria-hidden="true">#</a> 插件说明:</h2><h3 id="html" tabindex="-1"><a class="header-anchor" href="#html" aria-hidden="true">#</a> html</h3><ul><li><p>作用:</p></li><li><p>安装:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev html<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>使用:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>jianshu<span class="token punctuation">.</span>com<span class="token operator">/</span>p<span class="token operator">/</span><span class="token number">08</span>a60756ffda\n<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 打包输出HTML</span>\n      title<span class="token operator">:</span> <span class="token string">&#39;Hello World app&#39;</span><span class="token punctuation">,</span>\n      minify<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 压缩HTML文件</span>\n        removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 移除HTML中的注释</span>\n        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 删除空白符与换行符</span>\n        minifyCSS<span class="token operator">:</span> <span class="token boolean">true</span><span class="token comment">// 压缩内联css</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      filename<span class="token operator">:</span> <span class="token string">&#39;index.html&#39;</span><span class="token punctuation">,</span> <span class="token comment">//输出文件名</span>\n      template<span class="token operator">:</span> <span class="token string">&#39;index.html&#39;</span><span class="token punctuation">,</span> <span class="token comment">//模板来源</span>\n      inject<span class="token operator">:</span><span class="token boolean">true</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li></ul><h3 id="cross-env" tabindex="-1"><a class="header-anchor" href="#cross-env" aria-hidden="true">#</a> cross-env</h3><ul><li><p>作用:用于命令行中指定变量.多用于指定环境变量或文件名.</p></li><li><p>安装:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev cross<span class="token operator">-</span>env\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>使用:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>package.json\n<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n  <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=development webpack-dev-server&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env FILE_NAME=production webpack&quot;</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ul><h3 id="webpack-defineplugin" tabindex="-1"><a class="header-anchor" href="#webpack-defineplugin" aria-hidden="true">#</a> webpack.definePlugin</h3><ul><li><p>作用: 用于创建编译时 “配置的全局常量” 以方便进行 环境转换,或指定文件名. 用于把cross-env中的变量变成全局常量.</p></li><li><p>安装:webpack自带</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>使用:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n    plugins<span class="token operator">:</span><span class="token punctuation">[</span>\n        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n            <span class="token string">&#39;process.env&#39;</span><span class="token operator">:</span> <span class="token constant">ENV</span><span class="token punctuation">,</span>\n            <span class="token string">&#39;process.env.FILE_NAME&#39;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">FILE_NAME</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">)</span>\n    <span class="token punctuation">]</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul><h2 id="loader说明" tabindex="-1"><a class="header-anchor" href="#loader说明" aria-hidden="true">#</a> loader说明:</h2><h3 id="file-loader-和url-loader" tabindex="-1"><a class="header-anchor" href="#file-loader-和url-loader" aria-hidden="true">#</a> file-loader 和url-loader</h3><ul><li><p>作用: 处理图片打包后路径url-loader可以把图片打包成base64</p></li><li><p>安装:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev file<span class="token operator">-</span>loader\nnpm install <span class="token operator">--</span>save<span class="token operator">-</span>dev url<span class="token operator">-</span>loader <span class="token comment">//推荐</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>使用:</p></li><li><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t       <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(png|jpe?g|gif|svg)(\\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n        loader<span class="token operator">:</span> <span class="token string">&#39;url-loader&#39;</span><span class="token punctuation">,</span>\n        options<span class="token operator">:</span> <span class="token punctuation">{</span>\n          limit<span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>\n          name<span class="token operator">:</span> utils<span class="token punctuation">.</span><span class="token function">assetsPath</span><span class="token punctuation">(</span><span class="token string">&#39;img/[name].[hash:7].[ext]&#39;</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(mp4|webm|ogg|mp3|wav|flac|aac)(\\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n        loader<span class="token operator">:</span> <span class="token string">&#39;url-loader&#39;</span><span class="token punctuation">,</span>\n        options<span class="token operator">:</span> <span class="token punctuation">{</span>\n          limit<span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>\n          name<span class="token operator">:</span> utils<span class="token punctuation">.</span><span class="token function">assetsPath</span><span class="token punctuation">(</span><span class="token string">&#39;media/[name].[hash:7].[ext]&#39;</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(woff2?|eot|ttf|otf)(\\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n        loader<span class="token operator">:</span> <span class="token string">&#39;url-loader&#39;</span><span class="token punctuation">,</span>\n        options<span class="token operator">:</span> <span class="token punctuation">{</span>\n          limit<span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>\n          name<span class="token operator">:</span> utils<span class="token punctuation">.</span><span class="token function">assetsPath</span><span class="token punctuation">(</span><span class="token string">&#39;fonts/[name].[hash:7].[ext]&#39;</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>   \n<span class="token punctuation">]</span><span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div></li></ul><h3 id="vue-loader" tabindex="-1"><a class="header-anchor" href="#vue-loader" aria-hidden="true">#</a> vue-loader</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm install -D vue-loader vue-template-compiler\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="webpack-dev-server" tabindex="-1"><a class="header-anchor" href="#webpack-dev-server" aria-hidden="true">#</a> webpack-dev-server</h3><ul><li><p>作用:实时重新加载</p></li><li><p>安装:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm install --save-dev webpack-dev-server\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>使用:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ul><h2 id="打包分析" tabindex="-1"><a class="header-anchor" href="#打包分析" aria-hidden="true">#</a> 打包分析</h2><h3 id="打包时间分析" tabindex="-1"><a class="header-anchor" href="#打包时间分析" aria-hidden="true">#</a> 打包时间分析</h3><p>安装:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm install --save-dev speed-measure-webpack-plugin\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> SpeedMeasurePlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;speed-measure-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> smp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpeedMeasurePlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> smp<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="打包分析-1" tabindex="-1"><a class="header-anchor" href="#打包分析-1" aria-hidden="true">#</a> 打包分析</h3><p>安装:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev webpack<span class="token operator">-</span>bundle<span class="token operator">-</span>analyzer\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> BundleAnalyzerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-bundle-analyzer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>BundleAnalyzerPlugin<span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n\n运行打包后访问：<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>：<span class="token number">8888</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div>',105),i={},k=(0,a(3744).Z)(i,[["render",function(n,s){return r}]])},3744:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,p]of s)a[n]=p;return a}},3757:(n,s,a)=>{n.exports=a.p+"assets/img/image-20200422150952677.2d7b2ccf.png"},4822:(n,s,a)=>{n.exports=a.p+"assets/img/image-20200424104539602.4caac31f.png"},118:(n,s,a)=>{n.exports=a.p+"assets/img/image-20200424105511640.99025e4d.png"},1167:(n,s,a)=>{n.exports=a.p+"assets/img/image-20200424110619538.995bddd7.png"},3065:(n,s,a)=>{n.exports=a.p+"assets/img/image-20200424114026021.14d9dfe7.png"},1926:(n,s,a)=>{n.exports=a.p+"assets/img/image-20200424121335154.a1d75f40.png"}}]);